import{r as t,h as i,c as n}from"./p-3b8269e0.js";const s=class{constructor(i){t(this,i),this.text="\r\n    Hint #1: Hit ctrl+shift+p to open the menu\r\n    Hint #2: Click anywhere and type!\r\n    "}handleEditorTextUpdated(t){this.text=t.detail}render(){return i("div",{class:"root-container"},i("mono-editor",{tag:"#helloworld",text:this.text,dimensions:{cols:80,rows:24}}),i("popup-menu",null))}};s.style=".root-container{display:flex;align-items:center;justify-content:center;height:100vh;width:100vw}";const e="[",r={};function h(t,i,n){return t(n={path:i,exports:{},require:function(){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},n.exports),n.exports}r.style={reset:"[0m",bold:"[1m",italic:"[3m",underline:"[4m",fontDefault:"[10m",font2:"[11m",font3:"[12m",font4:"[13m",font5:"[14m",font6:"[15m",imageNegative:"[7m",imagePositive:"[27m",black:"[30m",red:"[31m",green:"[32m",yellow:"[33m",blue:"[34m",magenta:"[35m",cyan:"[36m",white:"[37m",grey:"[90m",gray:"[90m",brightRed:"[91m",brightGreen:"[92m",brightYellow:"[93m",brightBlue:"[94m",brightMagenta:"[95m",brightCyan:"[96m",brightWhite:"[97m","bg-black":"[40m","bg-red":"[41m","bg-green":"[42m","bg-yellow":"[43m","bg-blue":"[44m","bg-magenta":"[45m","bg-cyan":"[46m","bg-white":"[47m","bg-grey":"[100m","bg-gray":"[100m","bg-brightRed":"[101m","bg-brightGreen":"[102m","bg-brightYellow":"[103m","bg-brightBlue":"[104m","bg-brightMagenta":"[105m","bg-brightCyan":"[106m","bg-brightWhite":"[107m"},r.rgb=function(t,i,n){return`[38;2;${t};${i};${n}m`},r.bgRgb=function(t,i,n){return`[48;2;${t};${i};${n}m`},r.styles=function(t){var i;return i=t,(t=Array.isArray(i)?i:void 0===i?[]:function(t){return function(t){return"object"==typeof t&&null!==t}(t)&&"number"==typeof t.length}(i)||i instanceof Set?Array.from(i):[i]).map((function(t){const i=t.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/),n=t.match(/bg-rgb\((\d+),\s*(\d+),\s*(\d+)\)/);if(n){const[t,i,s,e]=n;return r.bgRgb(i,s,e)}if(i){const[t,n,s,e]=i;return r.rgb(n,s,e)}return r.style[t]})).join("")},r.format=function(t,i){const n=/\[([\w\s-\(\),]+)\]{([^]*?)}/;let s;if(!(t=String(t)))return"";for(;s=t.match(n);){const i=s[1].split(/\s+/);t=t.replace(s[0],r.format(s[2],i))}return i&&i.length?r.styles(i)+t+r.style.reset:t},r.cursor={up:function(t){return e+(t||1)+"A"},down:function(t){return e+(t||1)+"B"},forward:function(t){return e+(t||1)+"C"},back:function(t){return e+(t||1)+"D"},nextLine:function(t){return e+(t||1)+"E"},previousLine:function(t){return e+(t||1)+"F"},horizontalAbsolute:function(t){return e+t+"G"},position:function(t,i){return e+(t||1)+";"+(i||1)+"H"},hide:"[?25l",show:"[?25h"},r.erase={display:function(t){return e+(t||0)+"J"},inLine:function(t){return e+(t||0)+"K"}};var o=h((function(t){var i,n;self,t.exports=(i={775:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FitAddon=void 0;var n=function(){function t(){}return t.prototype.activate=function(t){this._terminal=t},t.prototype.dispose=function(){},t.prototype.fit=function(){var t=this.proposeDimensions();t&&this._terminal&&(this._terminal.rows===t.rows&&this._terminal.cols===t.cols||(this._terminal._core._renderService.clear(),this._terminal.resize(t.cols,t.rows)))},t.prototype.proposeDimensions=function(){if(this._terminal&&this._terminal.element&&this._terminal.element.parentElement){var t=this._terminal._core;if(0!==t._renderService.dimensions.actualCellWidth&&0!==t._renderService.dimensions.actualCellHeight){var i=window.getComputedStyle(this._terminal.element.parentElement),n=parseInt(i.getPropertyValue("height")),s=Math.max(0,parseInt(i.getPropertyValue("width"))),e=window.getComputedStyle(this._terminal.element),r=n-(parseInt(e.getPropertyValue("padding-top"))+parseInt(e.getPropertyValue("padding-bottom"))),h=s-(parseInt(e.getPropertyValue("padding-right"))+parseInt(e.getPropertyValue("padding-left")))-t.viewport.scrollBarWidth;return{cols:Math.max(2,Math.floor(h/t._renderService.dimensions.actualCellWidth)),rows:Math.max(1,Math.floor(r/t._renderService.dimensions.actualCellHeight))}}}},t}();i.FitAddon=n}},n={},function t(s){if(n[s])return n[s].exports;var e=n[s]={exports:{}};return i[s](e,e.exports,t),e.exports}(775))})),u=h((function(t){self,t.exports=(()=>{var t={4567:function(t,i,n){var s,e=this&&this.__extends||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"__esModule",{value:!0}),i.AccessibilityManager=void 0;var r=n(9042),h=n(6114),o=n(6193),u=n(3656),c=n(844),f=n(5596),a=n(9631),l=function(t){function i(i,n){var s=t.call(this)||this;s._terminal=i,s._renderService=n,s._liveRegionLineCount=0,s._charsToConsume=[],s._charsToAnnounce="",s._accessibilityTreeRoot=document.createElement("div"),s._accessibilityTreeRoot.classList.add("xterm-accessibility"),s._rowContainer=document.createElement("div"),s._rowContainer.setAttribute("role","list"),s._rowContainer.classList.add("xterm-accessibility-tree"),s._rowElements=[];for(var e=0;e<s._terminal.rows;e++)s._rowElements[e]=s._createAccessibilityTreeNode(),s._rowContainer.appendChild(s._rowElements[e]);if(s._topBoundaryFocusListener=function(t){return s._onBoundaryFocus(t,0)},s._bottomBoundaryFocusListener=function(t){return s._onBoundaryFocus(t,1)},s._rowElements[0].addEventListener("focus",s._topBoundaryFocusListener),s._rowElements[s._rowElements.length-1].addEventListener("focus",s._bottomBoundaryFocusListener),s._refreshRowsDimensions(),s._accessibilityTreeRoot.appendChild(s._rowContainer),s._renderRowsDebouncer=new o.RenderDebouncer(s._renderRows.bind(s)),s._refreshRows(),s._liveRegion=document.createElement("div"),s._liveRegion.classList.add("live-region"),s._liveRegion.setAttribute("aria-live","assertive"),s._accessibilityTreeRoot.appendChild(s._liveRegion),!s._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");return s._terminal.element.insertAdjacentElement("afterbegin",s._accessibilityTreeRoot),s.register(s._renderRowsDebouncer),s.register(s._terminal.onResize((function(t){return s._onResize(t.rows)}))),s.register(s._terminal.onRender((function(t){return s._refreshRows(t.start,t.end)}))),s.register(s._terminal.onScroll((function(){return s._refreshRows()}))),s.register(s._terminal.onA11yChar((function(t){return s._onChar(t)}))),s.register(s._terminal.onLineFeed((function(){return s._onChar("\n")}))),s.register(s._terminal.onA11yTab((function(t){return s._onTab(t)}))),s.register(s._terminal.onKey((function(t){return s._onKey(t.key)}))),s.register(s._terminal.onBlur((function(){return s._clearLiveRegion()}))),s.register(s._renderService.onDimensionsChange((function(){return s._refreshRowsDimensions()}))),s._screenDprMonitor=new f.ScreenDprMonitor,s.register(s._screenDprMonitor),s._screenDprMonitor.setListener((function(){return s._refreshRowsDimensions()})),s.register(u.addDisposableDomListener(window,"resize",(function(){return s._refreshRowsDimensions()}))),s}return e(i,t),i.prototype.dispose=function(){t.prototype.dispose.call(this),a.removeElementFromParent(this._accessibilityTreeRoot),this._rowElements.length=0},i.prototype._onBoundaryFocus=function(t,i){var n=t.target,s=this._rowElements[0===i?1:this._rowElements.length-2];if(n.getAttribute("aria-posinset")!==(0===i?"1":""+this._terminal.buffer.lines.length)&&t.relatedTarget===s){var e,r;if(0===i?(e=n,r=this._rowElements.pop(),this._rowContainer.removeChild(r)):(e=this._rowElements.shift(),r=n,this._rowContainer.removeChild(e)),e.removeEventListener("focus",this._topBoundaryFocusListener),r.removeEventListener("focus",this._bottomBoundaryFocusListener),0===i){var h=this._createAccessibilityTreeNode();this._rowElements.unshift(h),this._rowContainer.insertAdjacentElement("afterbegin",h)}else h=this._createAccessibilityTreeNode(),this._rowElements.push(h),this._rowContainer.appendChild(h);this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(0===i?-1:1),this._rowElements[0===i?1:this._rowElements.length-2].focus(),t.preventDefault(),t.stopImmediatePropagation()}},i.prototype._onResize=function(t){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(var i=this._rowContainer.children.length;i<this._terminal.rows;i++)this._rowElements[i]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[i]);for(;this._rowElements.length>t;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()},i.prototype._createAccessibilityTreeNode=function(){var t=document.createElement("div");return t.setAttribute("role","listitem"),t.tabIndex=-1,this._refreshRowDimensions(t),t},i.prototype._onTab=function(t){for(var i=0;i<t;i++)this._onChar(" ")},i.prototype._onChar=function(t){var i=this;this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==t&&(this._charsToAnnounce+=t):this._charsToAnnounce+=t,"\n"===t&&(this._liveRegionLineCount++,21===this._liveRegionLineCount&&(this._liveRegion.textContent+=r.tooMuchOutput)),h.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout((function(){i._accessibilityTreeRoot.appendChild(i._liveRegion)}),0))},i.prototype._clearLiveRegion=function(){this._liveRegion.textContent="",this._liveRegionLineCount=0,h.isMac&&a.removeElementFromParent(this._liveRegion)},i.prototype._onKey=function(t){this._clearLiveRegion(),this._charsToConsume.push(t)},i.prototype._refreshRows=function(t,i){this._renderRowsDebouncer.refresh(t,i,this._terminal.rows)},i.prototype._renderRows=function(t,i){for(var n=this._terminal.buffer,s=n.lines.length.toString(),e=t;e<=i;e++){var r=n.translateBufferLineToString(n.ydisp+e,!0),h=(n.ydisp+e+1).toString(),o=this._rowElements[e];o&&(0===r.length?o.innerText="Â ":o.textContent=r,o.setAttribute("aria-posinset",h),o.setAttribute("aria-setsize",s))}this._announceCharacters()},i.prototype._refreshRowsDimensions=function(){if(this._renderService.dimensions.actualCellHeight){this._rowElements.length!==this._terminal.rows&&this._onResize(this._terminal.rows);for(var t=0;t<this._terminal.rows;t++)this._refreshRowDimensions(this._rowElements[t])}},i.prototype._refreshRowDimensions=function(t){t.style.height=this._renderService.dimensions.actualCellHeight+"px"},i.prototype._announceCharacters=function(){0!==this._charsToAnnounce.length&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")},i}(c.Disposable);i.AccessibilityManager=l},3614:(t,i)=>{function n(t){return t.replace(/\r?\n/g,"\r")}function s(t,i){return i?"[200~"+t+"[201~":t}function e(t,i,e){t=s(t=n(t),e.decPrivateModes.bracketedPasteMode),e.triggerDataEvent(t,!0),i.value=""}function r(t,i,n){var s=n.getBoundingClientRect(),e=t.clientX-s.left-10,r=t.clientY-s.top-10;i.style.width="20px",i.style.height="20px",i.style.left=e+"px",i.style.top=r+"px",i.style.zIndex="1000",i.focus()}Object.defineProperty(i,"__esModule",{value:!0}),i.rightClickHandler=i.moveTextAreaUnderMouseCursor=i.paste=i.handlePasteEvent=i.copyHandler=i.bracketTextForPaste=i.prepareTextForTerminal=void 0,i.prepareTextForTerminal=n,i.bracketTextForPaste=s,i.copyHandler=function(t,i){t.clipboardData&&t.clipboardData.setData("text/plain",i.selectionText),t.preventDefault()},i.handlePasteEvent=function(t,i,n){t.stopPropagation(),t.clipboardData&&e(t.clipboardData.getData("text/plain"),i,n)},i.paste=e,i.moveTextAreaUnderMouseCursor=r,i.rightClickHandler=function(t,i,n,s,e){r(t,i,n),e&&s.rightClickSelect(t),i.value=s.selectionText,i.select()}},4774:(t,i)=>{var n,s,e,r;function h(t){var i=t.toString(16);return i.length<2?"0"+i:i}function o(t,i){return t<i?(i+.05)/(t+.05):(t+.05)/(i+.05)}Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=void 0,function(t){t.toCss=function(t,i,n,s){return void 0!==s?"#"+h(t)+h(i)+h(n)+h(s):"#"+h(t)+h(i)+h(n)},t.toRgba=function(t,i,n,s){return void 0===s&&(s=255),(t<<24|i<<16|n<<8|s)>>>0}}(n=i.channels||(i.channels={})),(s=i.color||(i.color={})).blend=function(t,i){var s=(255&i.rgba)/255;if(1===s)return{css:i.css,rgba:i.rgba};var e=i.rgba>>16&255,r=i.rgba>>8&255,h=t.rgba>>24&255,o=t.rgba>>16&255,u=t.rgba>>8&255,c=h+Math.round(((i.rgba>>24&255)-h)*s),f=o+Math.round((e-o)*s),a=u+Math.round((r-u)*s);return{css:n.toCss(c,f,a),rgba:n.toRgba(c,f,a)}},s.isOpaque=function(t){return 255==(255&t.rgba)},s.ensureContrastRatio=function(t,i,n){var s=r.ensureContrastRatio(t.rgba,i.rgba,n);if(s)return r.toColor(s>>24&255,s>>16&255,s>>8&255)},s.opaque=function(t){var i=(255|t.rgba)>>>0,s=r.toChannels(i);return{css:n.toCss(s[0],s[1],s[2]),rgba:i}},s.opacity=function(t,i){var s=Math.round(255*i),e=r.toChannels(t.rgba),h=e[0],o=e[1],u=e[2];return{css:n.toCss(h,o,u,s),rgba:n.toRgba(h,o,u,s)}},(i.css||(i.css={})).toColor=function(t){switch(t.length){case 7:return{css:t,rgba:(parseInt(t.slice(1),16)<<8|255)>>>0};case 9:return{css:t,rgba:parseInt(t.slice(1),16)>>>0}}throw new Error("css.toColor: Unsupported css format")},function(t){function i(t,i,n){var s=t/255,e=i/255,r=n/255;return.2126*(s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))}t.relativeLuminance=function(t){return i(t>>16&255,t>>8&255,255&t)},t.relativeLuminance2=i}(e=i.rgb||(i.rgb={})),function(t){function i(t,i,n){for(var s=t>>24&255,r=t>>16&255,h=t>>8&255,u=i>>24&255,c=i>>16&255,f=i>>8&255,a=o(e.relativeLuminance2(u,f,c),e.relativeLuminance2(s,r,h));a<n&&(u>0||c>0||f>0);)u-=Math.max(0,Math.ceil(.1*u)),c-=Math.max(0,Math.ceil(.1*c)),f-=Math.max(0,Math.ceil(.1*f)),a=o(e.relativeLuminance2(u,f,c),e.relativeLuminance2(s,r,h));return(u<<24|c<<16|f<<8|255)>>>0}function s(t,i,n){for(var s=t>>24&255,r=t>>16&255,h=t>>8&255,u=i>>24&255,c=i>>16&255,f=i>>8&255,a=o(e.relativeLuminance2(u,f,c),e.relativeLuminance2(s,r,h));a<n&&(u<255||c<255||f<255);)u=Math.min(255,u+Math.ceil(.1*(255-u))),c=Math.min(255,c+Math.ceil(.1*(255-c))),f=Math.min(255,f+Math.ceil(.1*(255-f))),a=o(e.relativeLuminance2(u,f,c),e.relativeLuminance2(s,r,h));return(u<<24|c<<16|f<<8|255)>>>0}t.ensureContrastRatio=function(t,n,r){var h=e.relativeLuminance(t>>8),u=e.relativeLuminance(n>>8);if(o(h,u)<r)return u<h?i(t,n,r):s(t,n,r)},t.reduceLuminance=i,t.increaseLuminance=s,t.toChannels=function(t){return[t>>24&255,t>>16&255,t>>8&255,255&t]},t.toColor=function(t,i,s){return{css:n.toCss(t,i,s),rgba:n.toRgba(t,i,s)}}}(r=i.rgba||(i.rgba={})),i.toPaddedHex=h,i.contrastRatio=o},7239:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorContrastCache=void 0;var n=function(){function t(){this._color={},this._rgba={}}return t.prototype.clear=function(){this._color={},this._rgba={}},t.prototype.setCss=function(t,i,n){this._rgba[t]||(this._rgba[t]={}),this._rgba[t][i]=n},t.prototype.getCss=function(t,i){return this._rgba[t]?this._rgba[t][i]:void 0},t.prototype.setColor=function(t,i,n){this._color[t]||(this._color[t]={}),this._color[t][i]=n},t.prototype.getColor=function(t,i){return this._color[t]?this._color[t][i]:void 0},t}();i.ColorContrastCache=n},5680:(t,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorManager=i.DEFAULT_ANSI_COLORS=void 0;var s=n(4774),e=n(7239),r=s.css.toColor("#ffffff"),h=s.css.toColor("#000000"),o=s.css.toColor("#ffffff"),u=s.css.toColor("#000000"),c={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};i.DEFAULT_ANSI_COLORS=Object.freeze(function(){for(var t=[s.css.toColor("#2e3436"),s.css.toColor("#cc0000"),s.css.toColor("#4e9a06"),s.css.toColor("#c4a000"),s.css.toColor("#3465a4"),s.css.toColor("#75507b"),s.css.toColor("#06989a"),s.css.toColor("#d3d7cf"),s.css.toColor("#555753"),s.css.toColor("#ef2929"),s.css.toColor("#8ae234"),s.css.toColor("#fce94f"),s.css.toColor("#729fcf"),s.css.toColor("#ad7fa8"),s.css.toColor("#34e2e2"),s.css.toColor("#eeeeec")],i=[0,95,135,175,215,255],n=0;n<216;n++){var e=i[n/36%6|0],r=i[n/6%6|0],h=i[n%6];t.push({css:s.channels.toCss(e,r,h),rgba:s.channels.toRgba(e,r,h)})}for(n=0;n<24;n++){var o=8+10*n;t.push({css:s.channels.toCss(o,o,o),rgba:s.channels.toRgba(o,o,o)})}return t}());var f=function(){function t(t,n){this.allowTransparency=n;var f=t.createElement("canvas");f.width=1,f.height=1;var a=f.getContext("2d");if(!a)throw new Error("Could not get rendering context");this._ctx=a,this._ctx.globalCompositeOperation="copy",this._litmusColor=this._ctx.createLinearGradient(0,0,1,1),this._contrastCache=new e.ColorContrastCache,this.colors={foreground:r,background:h,cursor:o,cursorAccent:u,selectionTransparent:c,selectionOpaque:s.color.blend(h,c),ansi:i.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache}}return t.prototype.onOptionsChange=function(t){"minimumContrastRatio"===t&&this._contrastCache.clear()},t.prototype.setTheme=function(t){void 0===t&&(t={}),this.colors.foreground=this._parseColor(t.foreground,r),this.colors.background=this._parseColor(t.background,h),this.colors.cursor=this._parseColor(t.cursor,o,!0),this.colors.cursorAccent=this._parseColor(t.cursorAccent,u,!0),this.colors.selectionTransparent=this._parseColor(t.selection,c,!0),this.colors.selectionOpaque=s.color.blend(this.colors.background,this.colors.selectionTransparent),s.color.isOpaque(this.colors.selectionTransparent)&&(this.colors.selectionTransparent=s.color.opacity(this.colors.selectionTransparent,.3)),this.colors.ansi[0]=this._parseColor(t.black,i.DEFAULT_ANSI_COLORS[0]),this.colors.ansi[1]=this._parseColor(t.red,i.DEFAULT_ANSI_COLORS[1]),this.colors.ansi[2]=this._parseColor(t.green,i.DEFAULT_ANSI_COLORS[2]),this.colors.ansi[3]=this._parseColor(t.yellow,i.DEFAULT_ANSI_COLORS[3]),this.colors.ansi[4]=this._parseColor(t.blue,i.DEFAULT_ANSI_COLORS[4]),this.colors.ansi[5]=this._parseColor(t.magenta,i.DEFAULT_ANSI_COLORS[5]),this.colors.ansi[6]=this._parseColor(t.cyan,i.DEFAULT_ANSI_COLORS[6]),this.colors.ansi[7]=this._parseColor(t.white,i.DEFAULT_ANSI_COLORS[7]),this.colors.ansi[8]=this._parseColor(t.brightBlack,i.DEFAULT_ANSI_COLORS[8]),this.colors.ansi[9]=this._parseColor(t.brightRed,i.DEFAULT_ANSI_COLORS[9]),this.colors.ansi[10]=this._parseColor(t.brightGreen,i.DEFAULT_ANSI_COLORS[10]),this.colors.ansi[11]=this._parseColor(t.brightYellow,i.DEFAULT_ANSI_COLORS[11]),this.colors.ansi[12]=this._parseColor(t.brightBlue,i.DEFAULT_ANSI_COLORS[12]),this.colors.ansi[13]=this._parseColor(t.brightMagenta,i.DEFAULT_ANSI_COLORS[13]),this.colors.ansi[14]=this._parseColor(t.brightCyan,i.DEFAULT_ANSI_COLORS[14]),this.colors.ansi[15]=this._parseColor(t.brightWhite,i.DEFAULT_ANSI_COLORS[15]),this._contrastCache.clear()},t.prototype._parseColor=function(t,i,n){if(void 0===n&&(n=this.allowTransparency),void 0===t)return i;if(this._ctx.fillStyle=this._litmusColor,this._ctx.fillStyle=t,"string"!=typeof this._ctx.fillStyle)return console.warn("Color: "+t+" is invalid using fallback "+i.css),i;this._ctx.fillRect(0,0,1,1);var e=this._ctx.getImageData(0,0,1,1).data;if(255!==e[3]){if(!n)return console.warn("Color: "+t+" is using transparency, but allowTransparency is false. Using fallback "+i.css+"."),i;var r=this._ctx.fillStyle.substring(5,this._ctx.fillStyle.length-1).split(",").map((function(t){return Number(t)})),h=r[0],o=r[1],u=r[2],c=Math.round(255*r[3]);return{rgba:s.channels.toRgba(h,o,u,c),css:t}}return{css:this._ctx.fillStyle,rgba:s.channels.toRgba(e[0],e[1],e[2],e[3])}},t}();i.ColorManager=f},9631:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.removeElementFromParent=void 0,i.removeElementFromParent=function(){for(var t,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];for(var s=0,e=i;s<e.length;s++){var r=e[s];null===(t=null==r?void 0:r.parentElement)||void 0===t||t.removeChild(r)}}},3656:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(t,i,n,s){t.addEventListener(i,n,s);var e=!1;return{dispose:function(){e||(e=!0,t.removeEventListener(i,n,s))}}}},3551:function(t,i,n){var s=this&&this.__decorate||function(t,i,n,s){var e,r=arguments.length,h=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,s);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(h=(r<3?e(h):r>3?e(i,n,h):e(i,n))||h);return r>3&&h&&Object.defineProperty(i,n,h),h},e=this&&this.__param||function(t,i){return function(n,s){i(n,s,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.MouseZone=i.Linkifier=void 0;var r=n(8460),h=n(2585),o=function(){function t(t,i,n){this._bufferService=t,this._logService=i,this._unicodeService=n,this._linkMatchers=[],this._nextLinkMatcherId=0,this._onShowLinkUnderline=new r.EventEmitter,this._onHideLinkUnderline=new r.EventEmitter,this._onLinkTooltip=new r.EventEmitter,this._rowsToLinkify={start:void 0,end:void 0}}return Object.defineProperty(t.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onLinkTooltip",{get:function(){return this._onLinkTooltip.event},enumerable:!1,configurable:!0}),t.prototype.attachToDom=function(t,i){this._element=t,this._mouseZoneManager=i},t.prototype.linkifyRows=function(i,n){var s=this;this._mouseZoneManager&&(void 0===this._rowsToLinkify.start||void 0===this._rowsToLinkify.end?(this._rowsToLinkify.start=i,this._rowsToLinkify.end=n):(this._rowsToLinkify.start=Math.min(this._rowsToLinkify.start,i),this._rowsToLinkify.end=Math.max(this._rowsToLinkify.end,n)),this._mouseZoneManager.clearAll(i,n),this._rowsTimeoutId&&clearTimeout(this._rowsTimeoutId),this._rowsTimeoutId=setTimeout((function(){return s._linkifyRows()}),t._timeBeforeLatency))},t.prototype._linkifyRows=function(){this._rowsTimeoutId=void 0;var t=this._bufferService.buffer;if(void 0!==this._rowsToLinkify.start&&void 0!==this._rowsToLinkify.end){var i=t.ydisp+this._rowsToLinkify.start;if(!(i>=t.lines.length)){for(var n=t.ydisp+Math.min(this._rowsToLinkify.end,this._bufferService.rows)+1,s=Math.ceil(2e3/this._bufferService.cols),e=this._bufferService.buffer.iterator(!1,i,n,s,s);e.hasNext();)for(var r=e.next(),h=0;h<this._linkMatchers.length;h++)this._doLinkifyRow(r.range.first,r.content,this._linkMatchers[h]);this._rowsToLinkify.start=void 0,this._rowsToLinkify.end=void 0}}else this._logService.debug("_rowToLinkify was unset before _linkifyRows was called")},t.prototype.registerLinkMatcher=function(t,i,n){if(void 0===n&&(n={}),!i)throw new Error("handler must be defined");var s={id:this._nextLinkMatcherId++,regex:t,handler:i,matchIndex:n.matchIndex,validationCallback:n.validationCallback,hoverTooltipCallback:n.tooltipCallback,hoverLeaveCallback:n.leaveCallback,willLinkActivate:n.willLinkActivate,priority:n.priority||0};return this._addLinkMatcherToList(s),s.id},t.prototype._addLinkMatcherToList=function(t){if(0!==this._linkMatchers.length){for(var i=this._linkMatchers.length-1;i>=0;i--)if(t.priority<=this._linkMatchers[i].priority)return void this._linkMatchers.splice(i+1,0,t);this._linkMatchers.splice(0,0,t)}else this._linkMatchers.push(t)},t.prototype.deregisterLinkMatcher=function(t){for(var i=0;i<this._linkMatchers.length;i++)if(this._linkMatchers[i].id===t)return this._linkMatchers.splice(i,1),!0;return!1},t.prototype._doLinkifyRow=function(t,i,n){for(var s,e=this,r=new RegExp(n.regex.source,(n.regex.flags||"")+"g"),h=-1,o=function(){var o=s["number"!=typeof n.matchIndex?0:n.matchIndex];if(!o)return u._logService.debug("match found without corresponding matchIndex",s,n),"break";if(h=i.indexOf(o,h+1),r.lastIndex=h+o.length,h<0)return"break";var c=u._bufferService.buffer.stringIndexToBufferIndex(t,h);if(c[0]<0)return"break";var f=u._bufferService.buffer.lines.get(c[0]);if(!f)return"break";var a=f.getFg(c[1]),l=a?a>>9&511:void 0;n.validationCallback?n.validationCallback(o,(function(t){e._rowsTimeoutId||t&&e._addLink(c[1],c[0]-e._bufferService.buffer.ydisp,o,n,l)})):u._addLink(c[1],c[0]-u._bufferService.buffer.ydisp,o,n,l)},u=this;null!==(s=r.exec(i))&&"break"!==o(););},t.prototype._addLink=function(t,i,n,s,e){var r=this;if(this._mouseZoneManager&&this._element){var h=this._unicodeService.getStringCellWidth(n),o=t%this._bufferService.cols,c=i+Math.floor(t/this._bufferService.cols),f=(o+h)%this._bufferService.cols,a=c+Math.floor((o+h)/this._bufferService.cols);0===f&&(f=this._bufferService.cols,a--),this._mouseZoneManager.add(new u(o+1,c+1,f+1,a+1,(function(t){if(s.handler)return s.handler(t,n);var i=window.open();i?(i.opener=null,i.location.href=n):console.warn("Opening link blocked as opener could not be cleared")}),(function(){r._onShowLinkUnderline.fire(r._createLinkHoverEvent(o,c,f,a,e)),r._element.classList.add("xterm-cursor-pointer")}),(function(t){r._onLinkTooltip.fire(r._createLinkHoverEvent(o,c,f,a,e)),s.hoverTooltipCallback&&s.hoverTooltipCallback(t,n,{start:{x:o,y:c},end:{x:f,y:a}})}),(function(){r._onHideLinkUnderline.fire(r._createLinkHoverEvent(o,c,f,a,e)),r._element.classList.remove("xterm-cursor-pointer"),s.hoverLeaveCallback&&s.hoverLeaveCallback()}),(function(t){return!s.willLinkActivate||s.willLinkActivate(t,n)})))}},t.prototype._createLinkHoverEvent=function(t,i,n,s,e){return{x1:t,y1:i,x2:n,y2:s,cols:this._bufferService.cols,fg:e}},t._timeBeforeLatency=200,t=s([e(0,h.IBufferService),e(1,h.ILogService),e(2,h.IUnicodeService)],t)}();i.Linkifier=o;var u=function(t,i,n,s,e,r,h,o,u){this.x1=t,this.y1=i,this.x2=n,this.y2=s,this.clickCallback=e,this.hoverCallback=r,this.tooltipCallback=h,this.leaveCallback=o,this.willLinkActivate=u};i.MouseZone=u},6465:function(t,i,n){var s,e=this&&this.__extends||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),r=this&&this.__decorate||function(t,i,n,s){var e,r=arguments.length,h=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,s);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(h=(r<3?e(h):r>3?e(i,n,h):e(i,n))||h);return r>3&&h&&Object.defineProperty(i,n,h),h},h=this&&this.__param||function(t,i){return function(n,s){i(n,s,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Linkifier2=void 0;var o=n(2585),u=n(8460),c=n(844),f=n(3656),a=function(t){function i(i){var n=t.call(this)||this;return n._bufferService=i,n._linkProviders=[],n._linkCacheDisposables=[],n._isMouseOut=!0,n._activeLine=-1,n._onShowLinkUnderline=n.register(new u.EventEmitter),n._onHideLinkUnderline=n.register(new u.EventEmitter),n.register(c.getDisposeArrayDisposable(n._linkCacheDisposables)),n}return e(i,t),Object.defineProperty(i.prototype,"currentLink",{get:function(){return this._currentLink},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),i.prototype.registerLinkProvider=function(t){var i=this;return this._linkProviders.push(t),{dispose:function(){var n=i._linkProviders.indexOf(t);-1!==n&&i._linkProviders.splice(n,1)}}},i.prototype.attachToDom=function(t,i,n){var s=this;this._element=t,this._mouseService=i,this._renderService=n,this.register(f.addDisposableDomListener(this._element,"mouseleave",(function(){s._isMouseOut=!0,s._clearCurrentLink()}))),this.register(f.addDisposableDomListener(this._element,"mousemove",this._onMouseMove.bind(this))),this.register(f.addDisposableDomListener(this._element,"click",this._onClick.bind(this)))},i.prototype._onMouseMove=function(t){if(this._lastMouseEvent=t,this._element&&this._mouseService){var i=this._positionFromMouseEvent(t,this._element,this._mouseService);if(i){this._isMouseOut=!1;for(var n=t.composedPath(),s=0;s<n.length;s++){var e=n[s];if(e.classList.contains("xterm"))break;if(e.classList.contains("xterm-hover"))return}this._lastBufferCell&&i.x===this._lastBufferCell.x&&i.y===this._lastBufferCell.y||(this._onHover(i),this._lastBufferCell=i)}}},i.prototype._onHover=function(t){if(this._activeLine!==t.y)return this._clearCurrentLink(),void this._askForLink(t,!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,t)||(this._clearCurrentLink(),this._askForLink(t,!0))},i.prototype._askForLink=function(t,i){var n,s=this;this._activeProviderReplies&&i||(null===(n=this._activeProviderReplies)||void 0===n||n.forEach((function(t){null==t||t.forEach((function(t){t.link.dispose&&t.link.dispose()}))})),this._activeProviderReplies=new Map,this._activeLine=t.y);var e=!1;this._linkProviders.forEach((function(n,r){var h;i?(null===(h=s._activeProviderReplies)||void 0===h?void 0:h.get(r))&&(e=s._checkLinkProviderResult(r,t,e)):n.provideLinks(t.y,(function(i){var n,h;if(!s._isMouseOut){var o=null==i?void 0:i.map((function(t){return{link:t}}));null===(n=s._activeProviderReplies)||void 0===n||n.set(r,o),e=s._checkLinkProviderResult(r,t,e),(null===(h=s._activeProviderReplies)||void 0===h?void 0:h.size)===s._linkProviders.length&&s._removeIntersectingLinks(t.y,s._activeProviderReplies)}}))}))},i.prototype._removeIntersectingLinks=function(t,i){for(var n=new Set,s=0;s<i.size;s++){var e=i.get(s);if(e)for(var r=0;r<e.length;r++)for(var h=e[r],o=h.link.range.end.y>t?this._bufferService.cols:h.link.range.end.x,u=h.link.range.start.y<t?0:h.link.range.start.x;u<=o;u++){if(n.has(u)){e.splice(r--,1);break}n.add(u)}}},i.prototype._checkLinkProviderResult=function(t,i,n){var s,e=this;if(!this._activeProviderReplies)return n;for(var r=this._activeProviderReplies.get(t),h=!1,o=0;o<t;o++)this._activeProviderReplies.has(o)&&!this._activeProviderReplies.get(o)||(h=!0);if(!h&&r){var u=r.find((function(t){return e._linkAtPosition(t.link,i)}));u&&(n=!0,this._handleNewLink(u))}if(this._activeProviderReplies.size===this._linkProviders.length&&!n)for(o=0;o<this._activeProviderReplies.size;o++){var c=null===(s=this._activeProviderReplies.get(o))||void 0===s?void 0:s.find((function(t){return e._linkAtPosition(t.link,i)}));if(c){n=!0,this._handleNewLink(c);break}}return n},i.prototype._onClick=function(t){if(this._element&&this._mouseService&&this._currentLink){var i=this._positionFromMouseEvent(t,this._element,this._mouseService);i&&this._linkAtPosition(this._currentLink.link,i)&&this._currentLink.link.activate(t,this._currentLink.link.text)}},i.prototype._clearCurrentLink=function(t,i){this._element&&this._currentLink&&this._lastMouseEvent&&(!t||!i||this._currentLink.link.range.start.y>=t&&this._currentLink.link.range.end.y<=i)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,c.disposeArray(this._linkCacheDisposables))},i.prototype._handleNewLink=function(t){var i=this;if(this._element&&this._lastMouseEvent&&this._mouseService){var n=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);n&&this._linkAtPosition(t.link,n)&&(this._currentLink=t,this._currentLink.state={decorations:{underline:void 0===t.link.decorations||t.link.decorations.underline,pointerCursor:void 0===t.link.decorations||t.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,t.link,this._lastMouseEvent),t.link.decorations={},Object.defineProperties(t.link.decorations,{pointerCursor:{get:function(){var t,n;return null===(n=null===(t=i._currentLink)||void 0===t?void 0:t.state)||void 0===n?void 0:n.decorations.pointerCursor},set:function(t){var n,s;(null===(n=i._currentLink)||void 0===n?void 0:n.state)&&i._currentLink.state.decorations.pointerCursor!==t&&(i._currentLink.state.decorations.pointerCursor=t,i._currentLink.state.isHovered&&(null===(s=i._element)||void 0===s||s.classList.toggle("xterm-cursor-pointer",t)))}},underline:{get:function(){var t,n;return null===(n=null===(t=i._currentLink)||void 0===t?void 0:t.state)||void 0===n?void 0:n.decorations.underline},set:function(n){var s,e,r;(null===(s=i._currentLink)||void 0===s?void 0:s.state)&&(null===(r=null===(e=i._currentLink)||void 0===e?void 0:e.state)||void 0===r?void 0:r.decorations.underline)!==n&&(i._currentLink.state.decorations.underline=n,i._currentLink.state.isHovered&&i._fireUnderlineEvent(t.link,n))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedBufferChange((function(t){i._clearCurrentLink(0===t.start?0:t.start+1+i._bufferService.buffer.ydisp,t.end+1+i._bufferService.buffer.ydisp)}))))}},i.prototype._linkHover=function(t,i,n){var s;(null===(s=this._currentLink)||void 0===s?void 0:s.state)&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(i,!0),this._currentLink.state.decorations.pointerCursor&&t.classList.add("xterm-cursor-pointer")),i.hover&&i.hover(n,i.text)},i.prototype._fireUnderlineEvent=function(t,i){var n=t.range,s=this._bufferService.buffer.ydisp,e=this._createLinkUnderlineEvent(n.start.x-1,n.start.y-s-1,n.end.x,n.end.y-s-1,void 0);(i?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(e)},i.prototype._linkLeave=function(t,i,n){var s;(null===(s=this._currentLink)||void 0===s?void 0:s.state)&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(i,!1),this._currentLink.state.decorations.pointerCursor&&t.classList.remove("xterm-cursor-pointer")),i.leave&&i.leave(n,i.text)},i.prototype._linkAtPosition=function(t,i){var n=t.range.start.y<i.y,s=t.range.end.y>i.y;return(t.range.start.y===t.range.end.y&&t.range.start.x<=i.x&&t.range.end.x>=i.x||n&&t.range.end.x>=i.x||s&&t.range.start.x<=i.x||n&&s)&&t.range.start.y<=i.y&&t.range.end.y>=i.y},i.prototype._positionFromMouseEvent=function(t,i,n){var s=n.getCoords(t,i,this._bufferService.cols,this._bufferService.rows);if(s)return{x:s[0],y:s[1]+this._bufferService.buffer.ydisp}},i.prototype._createLinkUnderlineEvent=function(t,i,n,s,e){return{x1:t,y1:i,x2:n,y2:s,cols:this._bufferService.cols,fg:e}},r([h(0,o.IBufferService)],i)}(c.Disposable);i.Linkifier2=a},9042:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tooMuchOutput=i.promptLabel=void 0,i.promptLabel="Terminal input",i.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},6954:function(t,i,n){var s,e=this&&this.__extends||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),r=this&&this.__decorate||function(t,i,n,s){var e,r=arguments.length,h=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,s);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(h=(r<3?e(h):r>3?e(i,n,h):e(i,n))||h);return r>3&&h&&Object.defineProperty(i,n,h),h},h=this&&this.__param||function(t,i){return function(n,s){i(n,s,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.MouseZoneManager=void 0;var o=n(844),u=n(3656),c=n(4725),f=n(2585),a=function(t){function i(i,n,s,e,r,h){var o=t.call(this)||this;return o._element=i,o._screenElement=n,o._bufferService=s,o._mouseService=e,o._selectionService=r,o._optionsService=h,o._zones=[],o._areZonesActive=!1,o._lastHoverCoords=[void 0,void 0],o._initialSelectionLength=0,o.register(u.addDisposableDomListener(o._element,"mousedown",(function(t){return o._onMouseDown(t)}))),o._mouseMoveListener=function(t){return o._onMouseMove(t)},o._mouseLeaveListener=function(t){return o._onMouseLeave(t)},o._clickListener=function(t){return o._onClick(t)},o}return e(i,t),i.prototype.dispose=function(){t.prototype.dispose.call(this),this._deactivate()},i.prototype.add=function(t){this._zones.push(t),1===this._zones.length&&this._activate()},i.prototype.clearAll=function(t,i){if(0!==this._zones.length){t&&i||(t=0,i=this._bufferService.rows-1);for(var n=0;n<this._zones.length;n++){var s=this._zones[n];(s.y1>t&&s.y1<=i+1||s.y2>t&&s.y2<=i+1||s.y1<t&&s.y2>i+1)&&(this._currentZone&&this._currentZone===s&&(this._currentZone.leaveCallback(),this._currentZone=void 0),this._zones.splice(n--,1))}0===this._zones.length&&this._deactivate()}},i.prototype._activate=function(){this._areZonesActive||(this._areZonesActive=!0,this._element.addEventListener("mousemove",this._mouseMoveListener),this._element.addEventListener("mouseleave",this._mouseLeaveListener),this._element.addEventListener("click",this._clickListener))},i.prototype._deactivate=function(){this._areZonesActive&&(this._areZonesActive=!1,this._element.removeEventListener("mousemove",this._mouseMoveListener),this._element.removeEventListener("mouseleave",this._mouseLeaveListener),this._element.removeEventListener("click",this._clickListener))},i.prototype._onMouseMove=function(t){this._lastHoverCoords[0]===t.pageX&&this._lastHoverCoords[1]===t.pageY||(this._onHover(t),this._lastHoverCoords=[t.pageX,t.pageY])},i.prototype._onHover=function(t){var i=this,n=this._findZoneEventAt(t);n!==this._currentZone&&(this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout)),n&&(this._currentZone=n,n.hoverCallback&&n.hoverCallback(t),this._tooltipTimeout=window.setTimeout((function(){return i._onTooltip(t)}),this._optionsService.options.linkTooltipHoverDuration)))},i.prototype._onTooltip=function(t){this._tooltipTimeout=void 0;var i=this._findZoneEventAt(t);null==i||i.tooltipCallback(t)},i.prototype._onMouseDown=function(t){if(this._initialSelectionLength=this._getSelectionLength(),this._areZonesActive){var i=this._findZoneEventAt(t);(null==i?void 0:i.willLinkActivate(t))&&(t.preventDefault(),t.stopImmediatePropagation())}},i.prototype._onMouseLeave=function(){this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout))},i.prototype._onClick=function(t){var i=this._findZoneEventAt(t),n=this._getSelectionLength();i&&n===this._initialSelectionLength&&(i.clickCallback(t),t.preventDefault(),t.stopImmediatePropagation())},i.prototype._getSelectionLength=function(){var t=this._selectionService.selectionText;return t?t.length:0},i.prototype._findZoneEventAt=function(t){var i=this._mouseService.getCoords(t,this._screenElement,this._bufferService.cols,this._bufferService.rows);if(i)for(var n=i[0],s=i[1],e=0;e<this._zones.length;e++){var r=this._zones[e];if(r.y1===r.y2){if(s===r.y1&&n>=r.x1&&n<r.x2)return r}else if(s===r.y1&&n>=r.x1||s===r.y2&&n<r.x2||s>r.y1&&s<r.y2)return r}},r([h(2,f.IBufferService),h(3,c.IMouseService),h(4,c.ISelectionService),h(5,f.IOptionsService)],i)}(o.Disposable);i.MouseZoneManager=a},6193:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderDebouncer=void 0;var n=function(){function t(t){this._renderCallback=t}return t.prototype.dispose=function(){this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},t.prototype.refresh=function(t,i,n){var s=this;this._rowCount=n,t=void 0!==t?t:0,i=void 0!==i?i:this._rowCount-1,this._rowStart=void 0!==this._rowStart?Math.min(this._rowStart,t):t,this._rowEnd=void 0!==this._rowEnd?Math.max(this._rowEnd,i):i,this._animationFrame||(this._animationFrame=window.requestAnimationFrame((function(){return s._innerRefresh()})))},t.prototype._innerRefresh=function(){if(void 0!==this._rowStart&&void 0!==this._rowEnd&&void 0!==this._rowCount){var t=Math.max(this._rowStart,0),i=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._animationFrame=void 0,this._renderCallback(t,i)}},t}();i.RenderDebouncer=n},5596:function(t,i,n){var s,e=this&&this.__extends||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"__esModule",{value:!0}),i.ScreenDprMonitor=void 0;var r=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i._currentDevicePixelRatio=window.devicePixelRatio,i}return e(i,t),i.prototype.setListener=function(t){var i=this;this._listener&&this.clearListener(),this._listener=t,this._outerListener=function(){i._listener&&(i._listener(window.devicePixelRatio,i._currentDevicePixelRatio),i._updateDpr())},this._updateDpr()},i.prototype.dispose=function(){t.prototype.dispose.call(this),this.clearListener()},i.prototype._updateDpr=function(){var t;this._outerListener&&(null===(t=this._resolutionMediaMatchList)||void 0===t||t.removeListener(this._outerListener),this._currentDevicePixelRatio=window.devicePixelRatio,this._resolutionMediaMatchList=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)"),this._resolutionMediaMatchList.addListener(this._outerListener))},i.prototype.clearListener=function(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)},i}(n(844).Disposable);i.ScreenDprMonitor=r},3236:function(t,i,n){var s,e=this&&this.__extends||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"__esModule",{value:!0}),i.Terminal=void 0;var r=n(2950),h=n(1680),o=n(3614),u=n(2584),c=n(5435),f=n(3525),a=n(3551),l=n(9312),v=n(6114),d=n(3656),b=n(9042),w=n(357),m=n(6954),g=n(4567),p=n(1296),O=n(7399),j=n(8460),y=n(8437),_=n(5680),k=n(3230),M=n(4725),x=n(428),q=n(8934),S=n(6465),A=n(5114),C=n(8969),R=n(4774),E=n(4269),T="undefined"!=typeof window?window.document:null,U=function(t){function i(i){void 0===i&&(i={});var n=t.call(this,i)||this;return n.browser=v,n._keyDownHandled=!1,n._onCursorMove=new j.EventEmitter,n._onKey=new j.EventEmitter,n._onRender=new j.EventEmitter,n._onSelectionChange=new j.EventEmitter,n._onTitleChange=new j.EventEmitter,n._onBell=new j.EventEmitter,n._onFocus=new j.EventEmitter,n._onBlur=new j.EventEmitter,n._onA11yCharEmitter=new j.EventEmitter,n._onA11yTabEmitter=new j.EventEmitter,n._setup(),n.linkifier=n._instantiationService.createInstance(a.Linkifier),n.linkifier2=n.register(n._instantiationService.createInstance(S.Linkifier2)),n.register(n._inputHandler.onRequestBell((function(){return n.bell()}))),n.register(n._inputHandler.onRequestRefreshRows((function(t,i){return n.refresh(t,i)}))),n.register(n._inputHandler.onRequestReset((function(){return n.reset()}))),n.register(n._inputHandler.onRequestWindowsOptionsReport((function(t){return n._reportWindowsOptions(t)}))),n.register(n._inputHandler.onAnsiColorChange((function(t){return n._changeAnsiColor(t)}))),n.register(j.forwardEvent(n._inputHandler.onCursorMove,n._onCursorMove)),n.register(j.forwardEvent(n._inputHandler.onTitleChange,n._onTitleChange)),n.register(j.forwardEvent(n._inputHandler.onA11yChar,n._onA11yCharEmitter)),n.register(j.forwardEvent(n._inputHandler.onA11yTab,n._onA11yTabEmitter)),n.register(n._bufferService.onResize((function(t){return n._afterResize(t.cols,t.rows)}))),n}return e(i,t),Object.defineProperty(i.prototype,"options",{get:function(){return this.optionsService.options},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onKey",{get:function(){return this._onKey.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onBell",{get:function(){return this._onBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onFocus",{get:function(){return this._onFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onBlur",{get:function(){return this._onBlur.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onA11yChar",{get:function(){return this._onA11yCharEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onA11yTab",{get:function(){return this._onA11yTabEmitter.event},enumerable:!1,configurable:!0}),i.prototype._changeAnsiColor=function(t){var i,n;if(this._colorManager){for(var s=0,e=t.colors;s<e.length;s++){var r=e[s],h=R.rgba.toColor(r.red,r.green,r.blue);this._colorManager.colors.ansi[r.colorIndex]=h}null===(i=this._renderService)||void 0===i||i.setColors(this._colorManager.colors),null===(n=this.viewport)||void 0===n||n.onThemeChange(this._colorManager.colors)}},i.prototype.dispose=function(){var i,n,s;this._isDisposed||(t.prototype.dispose.call(this),null===(i=this._renderService)||void 0===i||i.dispose(),this._customKeyEventHandler=void 0,this.write=function(){},null===(s=null===(n=this.element)||void 0===n?void 0:n.parentNode)||void 0===s||s.removeChild(this.element))},i.prototype._setup=function(){t.prototype._setup.call(this),this._customKeyEventHandler=void 0},Object.defineProperty(i.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),i.prototype.focus=function(){this.textarea&&this.textarea.focus({preventScroll:!0})},i.prototype._updateOptions=function(i){var n,s,e,r;switch(t.prototype._updateOptions.call(this,i),i){case"fontFamily":case"fontSize":null===(n=this._renderService)||void 0===n||n.clear(),null===(s=this._charSizeService)||void 0===s||s.measure();break;case"cursorBlink":case"cursorStyle":this.refresh(this.buffer.y,this.buffer.y);break;case"drawBoldTextInBrightColors":case"letterSpacing":case"lineHeight":case"fontWeight":case"fontWeightBold":case"minimumContrastRatio":this._renderService&&(this._renderService.clear(),this._renderService.onResize(this.cols,this.rows),this.refresh(0,this.rows-1));break;case"rendererType":this._renderService&&(this._renderService.setRenderer(this._createRenderer()),this._renderService.onResize(this.cols,this.rows));break;case"scrollback":null===(e=this.viewport)||void 0===e||e.syncScrollArea();break;case"screenReaderMode":this.optionsService.options.screenReaderMode?!this._accessibilityManager&&this._renderService&&(this._accessibilityManager=new g.AccessibilityManager(this,this._renderService)):(null===(r=this._accessibilityManager)||void 0===r||r.dispose(),this._accessibilityManager=void 0);break;case"tabStopWidth":this.buffers.setupTabStops();break;case"theme":this._setTheme(this.optionsService.options.theme)}},i.prototype._onTextAreaFocus=function(t){this._coreService.decPrivateModes.sendFocus&&this._coreService.triggerDataEvent(u.C0.ESC+"[I"),this.updateCursorStyle(t),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()},i.prototype.blur=function(){var t;return null===(t=this.textarea)||void 0===t?void 0:t.blur()},i.prototype._onTextAreaBlur=function(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this._coreService.decPrivateModes.sendFocus&&this._coreService.triggerDataEvent(u.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()},i.prototype._syncTextArea=function(){if(this.textarea&&this.buffer.isCursorInViewport&&!this._compositionHelper.isComposing&&this._renderService){var t=this.buffer.lines.get(this.buffer.ybase+this.buffer.y);if(t){var i=Math.min(this.buffer.x,this.cols-1),n=this._renderService.dimensions.actualCellHeight,s=t.getWidth(i),e=this._renderService.dimensions.actualCellWidth*s,r=this.buffer.y*this._renderService.dimensions.actualCellHeight;this.textarea.style.left=i*this._renderService.dimensions.actualCellWidth+"px",this.textarea.style.top=r+"px",this.textarea.style.width=e+"px",this.textarea.style.height=n+"px",this.textarea.style.lineHeight=n+"px",this.textarea.style.zIndex="-5"}}},i.prototype._initGlobal=function(){var t=this;this._bindKeys(),this.register(d.addDisposableDomListener(this.element,"copy",(function(i){t.hasSelection()&&o.copyHandler(i,t._selectionService)})));var i=function(i){return o.handlePasteEvent(i,t.textarea,t._coreService)};this.register(d.addDisposableDomListener(this.textarea,"paste",i)),this.register(d.addDisposableDomListener(this.element,"paste",i)),this.register(v.isFirefox?d.addDisposableDomListener(this.element,"mousedown",(function(i){2===i.button&&o.rightClickHandler(i,t.textarea,t.screenElement,t._selectionService,t.options.rightClickSelectsWord)})):d.addDisposableDomListener(this.element,"contextmenu",(function(i){o.rightClickHandler(i,t.textarea,t.screenElement,t._selectionService,t.options.rightClickSelectsWord)}))),v.isLinux&&this.register(d.addDisposableDomListener(this.element,"auxclick",(function(i){1===i.button&&o.moveTextAreaUnderMouseCursor(i,t.textarea,t.screenElement)})))},i.prototype._bindKeys=function(){var t=this;this.register(d.addDisposableDomListener(this.textarea,"keyup",(function(i){return t._keyUp(i)}),!0)),this.register(d.addDisposableDomListener(this.textarea,"keydown",(function(i){return t._keyDown(i)}),!0)),this.register(d.addDisposableDomListener(this.textarea,"keypress",(function(i){return t._keyPress(i)}),!0)),this.register(d.addDisposableDomListener(this.textarea,"compositionstart",(function(){return t._compositionHelper.compositionstart()}))),this.register(d.addDisposableDomListener(this.textarea,"compositionupdate",(function(i){return t._compositionHelper.compositionupdate(i)}))),this.register(d.addDisposableDomListener(this.textarea,"compositionend",(function(){return t._compositionHelper.compositionend()}))),this.register(this.onRender((function(){return t._compositionHelper.updateCompositionElements()}))),this.register(this.onRender((function(i){return t._queueLinkification(i.start,i.end)})))},i.prototype.open=function(t){var i=this;if(!t)throw new Error("Terminal requires a parent element.");t.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=t.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),this.element.setAttribute("role","document"),t.appendChild(this.element);var n=T.createDocumentFragment();this._viewportElement=T.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),n.appendChild(this._viewportElement),this._viewportScrollArea=T.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=T.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=T.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),n.appendChild(this.screenElement),this.textarea=T.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",b.promptLabel),this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this.register(d.addDisposableDomListener(this.textarea,"focus",(function(t){return i._onTextAreaFocus(t)}))),this.register(d.addDisposableDomListener(this.textarea,"blur",(function(){return i._onTextAreaBlur()}))),this._helperContainer.appendChild(this.textarea);var s=this._instantiationService.createInstance(A.CoreBrowserService,this.textarea);this._instantiationService.setService(M.ICoreBrowserService,s),this._charSizeService=this._instantiationService.createInstance(x.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(M.ICharSizeService,this._charSizeService),this._theme=this.options.theme||this._theme,this._colorManager=new _.ColorManager(T,this.options.allowTransparency),this.register(this.optionsService.onOptionChange((function(t){return i._colorManager.onOptionsChange(t)}))),this._colorManager.setTheme(this._theme),this._characterJoinerService=this._instantiationService.createInstance(E.CharacterJoinerService),this._instantiationService.setService(M.ICharacterJoinerService,this._characterJoinerService);var e=this._createRenderer();this._renderService=this.register(this._instantiationService.createInstance(k.RenderService,e,this.rows,this.screenElement)),this._instantiationService.setService(M.IRenderService,this._renderService),this.register(this._renderService.onRenderedBufferChange((function(t){return i._onRender.fire(t)}))),this.onResize((function(t){return i._renderService.resize(t.cols,t.rows)})),this._compositionView=T.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(r.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(n),this._soundService=this._instantiationService.createInstance(w.SoundService),this._instantiationService.setService(M.ISoundService,this._soundService),this._mouseService=this._instantiationService.createInstance(q.MouseService),this._instantiationService.setService(M.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(h.Viewport,(function(t){return i.scrollLines(t,!0,1)}),this._viewportElement,this._viewportScrollArea),this.viewport.onThemeChange(this._colorManager.colors),this.register(this._inputHandler.onRequestSyncScrollBar((function(){return i.viewport.syncScrollArea()}))),this.register(this.viewport),this.register(this.onCursorMove((function(){i._renderService.onCursorMove(),i._syncTextArea()}))),this.register(this.onResize((function(){return i._renderService.onResize(i.cols,i.rows)}))),this.register(this.onBlur((function(){return i._renderService.onBlur()}))),this.register(this.onFocus((function(){return i._renderService.onFocus()}))),this.register(this._renderService.onDimensionsChange((function(){return i.viewport.syncScrollArea()}))),this._selectionService=this.register(this._instantiationService.createInstance(l.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(M.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines((function(t){return i.scrollLines(t.amount,t.suppressScrollEvent)}))),this.register(this._selectionService.onSelectionChange((function(){return i._onSelectionChange.fire()}))),this.register(this._selectionService.onRequestRedraw((function(t){return i._renderService.onSelectionChanged(t.start,t.end,t.columnSelectMode)}))),this.register(this._selectionService.onLinuxMouseSelection((function(t){i.textarea.value=t,i.textarea.focus(),i.textarea.select()}))),this.register(this._onScroll.event((function(){i.viewport.syncScrollArea(),i._selectionService.refresh()}))),this.register(d.addDisposableDomListener(this._viewportElement,"scroll",(function(){return i._selectionService.refresh()}))),this._mouseZoneManager=this._instantiationService.createInstance(m.MouseZoneManager,this.element,this.screenElement),this.register(this._mouseZoneManager),this.register(this.onScroll((function(){return i._mouseZoneManager.clearAll()}))),this.linkifier.attachToDom(this.element,this._mouseZoneManager),this.linkifier2.attachToDom(this.element,this._mouseService,this._renderService),this.register(d.addDisposableDomListener(this.element,"mousedown",(function(t){return i._selectionService.onMouseDown(t)}))),this._coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new g.AccessibilityManager(this,this._renderService)),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()},i.prototype._createRenderer=function(){switch(this.options.rendererType){case"canvas":return this._instantiationService.createInstance(f.Renderer,this._colorManager.colors,this.screenElement,this.linkifier,this.linkifier2);case"dom":return this._instantiationService.createInstance(p.DomRenderer,this._colorManager.colors,this.element,this.screenElement,this._viewportElement,this.linkifier,this.linkifier2);default:throw new Error('Unrecognized rendererType "'+this.options.rendererType+'"')}},i.prototype._setTheme=function(t){var i,n,s;this._theme=t,null===(i=this._colorManager)||void 0===i||i.setTheme(t),null===(n=this._renderService)||void 0===n||n.setColors(this._colorManager.colors),null===(s=this.viewport)||void 0===s||s.onThemeChange(this._colorManager.colors)},i.prototype.bindMouse=function(){var t=this,i=this,n=this.element;function s(t){var n,s,e=i._mouseService.getRawByteCoords(t,i.screenElement,i.cols,i.rows);if(!e)return!1;switch(t.overrideType||t.type){case"mousemove":s=32,void 0===t.buttons?(n=3,void 0!==t.button&&(n=t.button<3?t.button:3)):n=1&t.buttons?0:4&t.buttons?1:2&t.buttons?2:3;break;case"mouseup":s=0,n=t.button<3?t.button:3;break;case"mousedown":s=1,n=t.button<3?t.button:3;break;case"wheel":0!==t.deltaY&&(s=t.deltaY<0?0:1),n=4;break;default:return!1}return!(void 0===s||void 0===n||n>4)&&i._coreMouseService.triggerMouseEvent({col:e.x-33,row:e.y-33,button:n,action:s,ctrl:t.ctrlKey,alt:t.altKey,shift:t.shiftKey})}var e={mouseup:null,wheel:null,mousedrag:null,mousemove:null},r=function(i){return s(i),i.buttons||(t._document.removeEventListener("mouseup",e.mouseup),e.mousedrag&&t._document.removeEventListener("mousemove",e.mousedrag)),t.cancel(i)},h=function(i){return s(i),i.preventDefault(),t.cancel(i)},o=function(t){t.buttons&&s(t)},c=function(t){t.buttons||s(t)};this.register(this._coreMouseService.onProtocolChange((function(i){i?("debug"===t.optionsService.options.logLevel&&t._logService.debug("Binding to mouse events:",t._coreMouseService.explainEvents(i)),t.element.classList.add("enable-mouse-events"),t._selectionService.disable()):(t._logService.debug("Unbinding from mouse events."),t.element.classList.remove("enable-mouse-events"),t._selectionService.enable()),8&i?e.mousemove||(n.addEventListener("mousemove",c),e.mousemove=c):(n.removeEventListener("mousemove",e.mousemove),e.mousemove=null),16&i?e.wheel||(n.addEventListener("wheel",h,{passive:!1}),e.wheel=h):(n.removeEventListener("wheel",e.wheel),e.wheel=null),2&i?e.mouseup||(e.mouseup=r):(t._document.removeEventListener("mouseup",e.mouseup),e.mouseup=null),4&i?e.mousedrag||(e.mousedrag=o):(t._document.removeEventListener("mousemove",e.mousedrag),e.mousedrag=null)}))),this._coreMouseService.activeProtocol=this._coreMouseService.activeProtocol,this.register(d.addDisposableDomListener(n,"mousedown",(function(i){if(i.preventDefault(),t.focus(),t._coreMouseService.areMouseEventsActive&&!t._selectionService.shouldForceSelection(i))return s(i),e.mouseup&&t._document.addEventListener("mouseup",e.mouseup),e.mousedrag&&t._document.addEventListener("mousemove",e.mousedrag),t.cancel(i)}))),this.register(d.addDisposableDomListener(n,"wheel",(function(i){if(e.wheel);else if(!t.buffer.hasScrollback){var n=t.viewport.getLinesScrolled(i);if(0===n)return;for(var s=u.C0.ESC+(t._coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(i.deltaY<0?"A":"B"),r="",h=0;h<Math.abs(n);h++)r+=s;t._coreService.triggerDataEvent(r,!0)}}),{passive:!0})),this.register(d.addDisposableDomListener(n,"wheel",(function(i){if(!e.wheel)return t.viewport.onWheel(i)?void 0:t.cancel(i)}),{passive:!1})),this.register(d.addDisposableDomListener(n,"touchstart",(function(i){if(!t._coreMouseService.areMouseEventsActive)return t.viewport.onTouchStart(i),t.cancel(i)}),{passive:!0})),this.register(d.addDisposableDomListener(n,"touchmove",(function(i){if(!t._coreMouseService.areMouseEventsActive)return t.viewport.onTouchMove(i)?void 0:t.cancel(i)}),{passive:!1}))},i.prototype.refresh=function(t,i){var n;null===(n=this._renderService)||void 0===n||n.refreshRows(t,i)},i.prototype._queueLinkification=function(t,i){var n;null===(n=this.linkifier)||void 0===n||n.linkifyRows(t,i)},i.prototype.updateCursorStyle=function(t){var i;(null===(i=this._selectionService)||void 0===i?void 0:i.shouldColumnSelect(t))?this.element.classList.add("column-select"):this.element.classList.remove("column-select")},i.prototype._showCursor=function(){this._coreService.isCursorInitialized||(this._coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))},i.prototype.scrollLines=function(i,n,s){void 0===s&&(s=0),t.prototype.scrollLines.call(this,i,n,s),this.refresh(0,this.rows-1)},i.prototype.paste=function(t){o.paste(t,this.textarea,this._coreService)},i.prototype.attachCustomKeyEventHandler=function(t){this._customKeyEventHandler=t},i.prototype.registerLinkMatcher=function(t,i,n){var s=this.linkifier.registerLinkMatcher(t,i,n);return this.refresh(0,this.rows-1),s},i.prototype.deregisterLinkMatcher=function(t){this.linkifier.deregisterLinkMatcher(t)&&this.refresh(0,this.rows-1)},i.prototype.registerLinkProvider=function(t){return this.linkifier2.registerLinkProvider(t)},i.prototype.registerCharacterJoiner=function(t){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");var i=this._characterJoinerService.register(t);return this.refresh(0,this.rows-1),i},i.prototype.deregisterCharacterJoiner=function(t){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(t)&&this.refresh(0,this.rows-1)},Object.defineProperty(i.prototype,"markers",{get:function(){return this.buffer.markers},enumerable:!1,configurable:!0}),i.prototype.addMarker=function(t){if(this.buffer===this.buffers.normal)return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+t)},i.prototype.hasSelection=function(){return!!this._selectionService&&this._selectionService.hasSelection},i.prototype.select=function(t,i,n){this._selectionService.setSelection(t,i,n)},i.prototype.getSelection=function(){return this._selectionService?this._selectionService.selectionText:""},i.prototype.getSelectionPosition=function(){if(this._selectionService&&this._selectionService.hasSelection)return{startColumn:this._selectionService.selectionStart[0],startRow:this._selectionService.selectionStart[1],endColumn:this._selectionService.selectionEnd[0],endRow:this._selectionService.selectionEnd[1]}},i.prototype.clearSelection=function(){var t;null===(t=this._selectionService)||void 0===t||t.clearSelection()},i.prototype.selectAll=function(){var t;null===(t=this._selectionService)||void 0===t||t.selectAll()},i.prototype.selectLines=function(t,i){var n;null===(n=this._selectionService)||void 0===n||n.selectLines(t,i)},i.prototype._keyDown=function(t){if(this._keyDownHandled=!1,this._customKeyEventHandler&&!1===this._customKeyEventHandler(t))return!1;if(!this._compositionHelper.keydown(t))return this.buffer.ybase!==this.buffer.ydisp&&this._bufferService.scrollToBottom(),!1;var i=O.evaluateKeyboardEvent(t,this._coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(t),3===i.type||2===i.type){var n=this.rows-1;return this.scrollLines(2===i.type?-n:n),this.cancel(t,!0)}return 1===i.type&&this.selectAll(),!!this._isThirdLevelShift(this.browser,t)||(i.cancel&&this.cancel(t,!0),!i.key||(i.key!==u.C0.ETX&&i.key!==u.C0.CR||(this.textarea.value=""),this._onKey.fire({key:i.key,domEvent:t}),this._showCursor(),this._coreService.triggerDataEvent(i.key,!0),this.optionsService.options.screenReaderMode?void(this._keyDownHandled=!0):this.cancel(t,!0)))},i.prototype._isThirdLevelShift=function(t,i){var n=t.isMac&&!this.options.macOptionIsMeta&&i.altKey&&!i.ctrlKey&&!i.metaKey||t.isWindows&&i.altKey&&i.ctrlKey&&!i.metaKey;return"keypress"===i.type?n:n&&(!i.keyCode||i.keyCode>47)},i.prototype._keyUp=function(t){this._customKeyEventHandler&&!1===this._customKeyEventHandler(t)||(function(t){return 16===t.keyCode||17===t.keyCode||18===t.keyCode}(t)||this.focus(),this.updateCursorStyle(t))},i.prototype._keyPress=function(t){var i;if(this._keyDownHandled)return!1;if(this._customKeyEventHandler&&!1===this._customKeyEventHandler(t))return!1;if(this.cancel(t),t.charCode)i=t.charCode;else if(null==t.which)i=t.keyCode;else{if(0===t.which||0===t.charCode)return!1;i=t.which}return!(!i||(t.altKey||t.ctrlKey||t.metaKey)&&!this._isThirdLevelShift(this.browser,t)||(i=String.fromCharCode(i),this._onKey.fire({key:i,domEvent:t}),this._showCursor(),this._coreService.triggerDataEvent(i,!0),0))},i.prototype.bell=function(){var t;this._soundBell()&&(null===(t=this._soundService)||void 0===t||t.playBellSound()),this._onBell.fire()},i.prototype.resize=function(i,n){i!==this.cols||n!==this.rows?t.prototype.resize.call(this,i,n):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()},i.prototype._afterResize=function(){var t,i;null===(t=this._charSizeService)||void 0===t||t.measure(),null===(i=this.viewport)||void 0===i||i.syncScrollArea(!0)},i.prototype.clear=function(){if(0!==this.buffer.ybase||0!==this.buffer.y){this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(var t=1;t<this.rows;t++)this.buffer.lines.push(this.buffer.getBlankLine(y.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire({position:this.buffer.ydisp,source:0})}},i.prototype.reset=function(){var i,n;this.options.rows=this.rows,this.options.cols=this.cols;var s=this._customKeyEventHandler;this._setup(),t.prototype.reset.call(this),null===(i=this._selectionService)||void 0===i||i.reset(),this._customKeyEventHandler=s,this.refresh(0,this.rows-1),null===(n=this.viewport)||void 0===n||n.syncScrollArea()},i.prototype._reportWindowsOptions=function(t){if(this._renderService)switch(t){case c.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:var i=this._renderService.dimensions.scaledCanvasWidth.toFixed(0),n=this._renderService.dimensions.scaledCanvasHeight.toFixed(0);this._coreService.triggerDataEvent(u.C0.ESC+"[4;"+n+";"+i+"t");break;case c.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:var s=this._renderService.dimensions.scaledCellWidth.toFixed(0),e=this._renderService.dimensions.scaledCellHeight.toFixed(0);this._coreService.triggerDataEvent(u.C0.ESC+"[6;"+e+";"+s+"t")}},i.prototype.cancel=function(t,i){if(this.options.cancelEvents||i)return t.preventDefault(),t.stopPropagation(),!1},i.prototype._visualBell=function(){return!1},i.prototype._soundBell=function(){return"sound"===this.options.bellStyle},i}(C.CoreTerminal);i.Terminal=U},1680:function(t,i,n){var s,e=this&&this.__extends||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),r=this&&this.__decorate||function(t,i,n,s){var e,r=arguments.length,h=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,s);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(h=(r<3?e(h):r>3?e(i,n,h):e(i,n))||h);return r>3&&h&&Object.defineProperty(i,n,h),h},h=this&&this.__param||function(t,i){return function(n,s){i(n,s,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Viewport=void 0;var o=n(844),u=n(3656),c=n(4725),f=n(2585),a=function(t){function i(i,n,s,e,r,h,o){var c=t.call(this)||this;return c._scrollLines=i,c._viewportElement=n,c._scrollArea=s,c._bufferService=e,c._optionsService=r,c._charSizeService=h,c._renderService=o,c.scrollBarWidth=0,c._currentRowHeight=0,c._lastRecordedBufferLength=0,c._lastRecordedViewportHeight=0,c._lastRecordedBufferHeight=0,c._lastTouchY=0,c._lastScrollTop=0,c._wheelPartialScroll=0,c._refreshAnimationFrame=null,c._ignoreNextScrollEvent=!1,c.scrollBarWidth=c._viewportElement.offsetWidth-c._scrollArea.offsetWidth||15,c.register(u.addDisposableDomListener(c._viewportElement,"scroll",c._onScroll.bind(c))),setTimeout((function(){return c.syncScrollArea()}),0),c}return e(i,t),i.prototype.onThemeChange=function(t){this._viewportElement.style.backgroundColor=t.background.css},i.prototype._refresh=function(t){var i=this;if(t)return this._innerRefresh(),void(null!==this._refreshAnimationFrame&&cancelAnimationFrame(this._refreshAnimationFrame));null===this._refreshAnimationFrame&&(this._refreshAnimationFrame=requestAnimationFrame((function(){return i._innerRefresh()})))},i.prototype._innerRefresh=function(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;var t=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.canvasHeight);this._lastRecordedBufferHeight!==t&&(this._lastRecordedBufferHeight=t,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}var i=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==i&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=i),this._refreshAnimationFrame=null},i.prototype.syncScrollArea=function(t){if(void 0===t&&(t=!1),this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(t);this._lastRecordedViewportHeight===this._renderService.dimensions.canvasHeight&&this._lastScrollTop===this._bufferService.buffer.ydisp*this._currentRowHeight&&this._lastScrollTop===this._viewportElement.scrollTop&&this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio===this._currentRowHeight||this._refresh(t)},i.prototype._onScroll=function(){if(this._lastScrollTop=this._viewportElement.scrollTop,this._viewportElement.offsetParent){if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._scrollLines(0);var t=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._scrollLines(t)}},i.prototype._bubbleScroll=function(t,i){return!(i<0&&0!==this._viewportElement.scrollTop||i>0&&this._viewportElement.scrollTop+this._lastRecordedViewportHeight<this._lastRecordedBufferHeight)||(t.cancelable&&t.preventDefault(),!1)},i.prototype.onWheel=function(t){var i=this._getPixelsScrolled(t);return 0!==i&&(this._viewportElement.scrollTop+=i,this._bubbleScroll(t,i))},i.prototype._getPixelsScrolled=function(t){if(0===t.deltaY)return 0;var i=this._applyScrollModifier(t.deltaY,t);return t.deltaMode===WheelEvent.DOM_DELTA_LINE?i*=this._currentRowHeight:t.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(i*=this._currentRowHeight*this._bufferService.rows),i},i.prototype.getLinesScrolled=function(t){if(0===t.deltaY)return 0;var i=this._applyScrollModifier(t.deltaY,t);return t.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(this._wheelPartialScroll+=i/=this._currentRowHeight+0,i=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):t.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(i*=this._bufferService.rows),i},i.prototype._applyScrollModifier=function(t,i){var n=this._optionsService.options.fastScrollModifier;return"alt"===n&&i.altKey||"ctrl"===n&&i.ctrlKey||"shift"===n&&i.shiftKey?t*this._optionsService.options.fastScrollSensitivity*this._optionsService.options.scrollSensitivity:t*this._optionsService.options.scrollSensitivity},i.prototype.onTouchStart=function(t){this._lastTouchY=t.touches[0].pageY},i.prototype.onTouchMove=function(t){var i=this._lastTouchY-t.touches[0].pageY;return this._lastTouchY=t.touches[0].pageY,0!==i&&(this._viewportElement.scrollTop+=i,this._bubbleScroll(t,i))},r([h(3,f.IBufferService),h(4,f.IOptionsService),h(5,c.ICharSizeService),h(6,c.IRenderService)],i)}(o.Disposable);i.Viewport=a},2950:function(t,i,n){var s=this&&this.__decorate||function(t,i,n,s){var e,r=arguments.length,h=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,s);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(h=(r<3?e(h):r>3?e(i,n,h):e(i,n))||h);return r>3&&h&&Object.defineProperty(i,n,h),h},e=this&&this.__param||function(t,i){return function(n,s){i(n,s,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CompositionHelper=void 0;var r=n(4725),h=n(2585),o=function(){function t(t,i,n,s,e,r){this._textarea=t,this._compositionView=i,this._bufferService=n,this._optionsService=s,this._coreService=e,this._renderService=r,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}return Object.defineProperty(t.prototype,"isComposing",{get:function(){return this._isComposing},enumerable:!1,configurable:!0}),t.prototype.compositionstart=function(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")},t.prototype.compositionupdate=function(t){var i=this;this._compositionView.textContent=t.data,this.updateCompositionElements(),setTimeout((function(){i._compositionPosition.end=i._textarea.value.length}),0)},t.prototype.compositionend=function(){this._finalizeComposition(!0)},t.prototype.keydown=function(t){if(this._isComposing||this._isSendingComposition){if(229===t.keyCode)return!1;if(16===t.keyCode||17===t.keyCode||18===t.keyCode)return!1;this._finalizeComposition(!1)}return 229!==t.keyCode||(this._handleAnyTextareaChanges(),!1)},t.prototype._finalizeComposition=function(t){var i=this;if(this._compositionView.classList.remove("active"),this._isComposing=!1,t){var n={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout((function(){var t;i._isSendingComposition&&(i._isSendingComposition=!1,n.start+=i._dataAlreadySent.length,(t=i._isComposing?i._textarea.value.substring(n.start,n.end):i._textarea.value.substring(n.start)).length>0&&i._coreService.triggerDataEvent(t,!0))}),0)}else{this._isSendingComposition=!1;var s=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(s,!0)}},t.prototype._handleAnyTextareaChanges=function(){var t=this,i=this._textarea.value;setTimeout((function(){if(!t._isComposing){var n=t._textarea.value.replace(i,"");n.length>0&&(t._dataAlreadySent=n,t._coreService.triggerDataEvent(n,!0))}}),0)},t.prototype.updateCompositionElements=function(t){var i=this;if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){var n=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),s=this._renderService.dimensions.actualCellHeight,e=this._bufferService.buffer.y*this._renderService.dimensions.actualCellHeight,r=n*this._renderService.dimensions.actualCellWidth;this._compositionView.style.left=r+"px",this._compositionView.style.top=e+"px",this._compositionView.style.height=s+"px",this._compositionView.style.lineHeight=s+"px",this._compositionView.style.fontFamily=this._optionsService.options.fontFamily,this._compositionView.style.fontSize=this._optionsService.options.fontSize+"px";var h=this._compositionView.getBoundingClientRect();this._textarea.style.left=r+"px",this._textarea.style.top=e+"px",this._textarea.style.width=Math.max(h.width,1)+"px",this._textarea.style.height=Math.max(h.height,1)+"px",this._textarea.style.lineHeight=h.height+"px"}t||setTimeout((function(){return i.updateCompositionElements(!0)}),0)}},s([e(2,h.IBufferService),e(3,h.IOptionsService),e(4,h.ICoreService),e(5,r.IRenderService)],t)}();i.CompositionHelper=o},9806:(t,i)=>{function n(t,i){var n=i.getBoundingClientRect();return[t.clientX-n.left,t.clientY-n.top]}Object.defineProperty(i,"__esModule",{value:!0}),i.getRawByteCoords=i.getCoords=i.getCoordsRelativeToElement=void 0,i.getCoordsRelativeToElement=n,i.getCoords=function(t,i,s,e,r,h,o,u){if(r){var c=n(t,i);if(c)return c[0]=Math.ceil((c[0]+(u?h/2:0))/h),c[1]=Math.ceil(c[1]/o),c[0]=Math.min(Math.max(c[0],1),s+(u?1:0)),c[1]=Math.min(Math.max(c[1],1),e),c}},i.getRawByteCoords=function(t){if(t)return{x:t[0]+32,y:t[1]+32}}},9504:(t,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.moveToCellSequence=void 0;var s=n(2584);function e(t,i,n,s){var e=t-r(n,t),o=i-r(n,i);return c(Math.abs(e-o)-function(t,i,n){for(var s=0,e=t-r(n,t),o=i-r(n,i),u=0;u<Math.abs(e-o);u++){var c="A"===h(t,i)?-1:1,f=n.buffer.lines.get(e+c*u);f&&f.isWrapped&&s++}return s}(t,i,n),u(h(t,i),s))}function r(t,i){for(var n=0,s=t.buffer.lines.get(i),e=s&&s.isWrapped;e&&i>=0&&i<t.rows;)n++,e=(s=t.buffer.lines.get(--i))&&s.isWrapped;return n}function h(t,i){return t>i?"A":"B"}function o(t,i,n,s,e,r){for(var h=t,o=i,u="";h!==n||o!==s;)h+=e?1:-1,e&&h>r.cols-1?(u+=r.buffer.translateBufferLineToString(o,!1,t,h),h=0,t=0,o++):!e&&h<0&&(u+=r.buffer.translateBufferLineToString(o,!1,0,t+1),t=h=r.cols-1,o--);return u+r.buffer.translateBufferLineToString(o,!1,t,h)}function u(t,i){return s.C0.ESC+(i?"O":"[")+t}function c(t,i){t=Math.floor(t);for(var n="",s=0;s<t;s++)n+=i;return n}i.moveToCellSequence=function(t,i,n,s){var h,f=n.buffer.x,a=n.buffer.y;if(!n.buffer.hasScrollback)return function(t,i,n,s,h,f){return 0===e(i,s,h,f).length?"":c(o(t,i,t,i-r(h,i),!1,h).length,u("D",f))}(f,a,0,i,n,s)+e(a,i,n,s)+function(t,i,n,s,h,f){var a;a=e(i,s,h,f).length>0?s-r(h,s):i;var l=s,v=function(t,i,n,s,h,o){var u;return u=e(n,s,h,o).length>0?s-r(h,s):i,t<n&&u<=s||t>=n&&u<s?"C":"D"}(t,i,n,s,h,f);return c(o(t,a,n,l,"C"===v,h).length,u(v,f))}(f,a,t,i,n,s);if(a===i)return h=f>t?"D":"C",c(Math.abs(f-t),u(h,s));h=a>i?"D":"C";var l=Math.abs(a-i);return c(function(t,i){return i.cols-t}(a>i?t:f,n)+(l-1)*n.cols+1+((a>i?f:t)-1),u(h,s))}},244:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AddonManager=void 0;var n=function(){function t(){this._addons=[]}return t.prototype.dispose=function(){for(var t=this._addons.length-1;t>=0;t--)this._addons[t].instance.dispose()},t.prototype.loadAddon=function(t,i){var n=this,s={instance:i,dispose:i.dispose,isDisposed:!1};this._addons.push(s),i.dispose=function(){return n._wrappedAddonDispose(s)},i.activate(t)},t.prototype._wrappedAddonDispose=function(t){if(!t.isDisposed){for(var i=-1,n=0;n<this._addons.length;n++)if(this._addons[n]===t){i=n;break}if(-1===i)throw new Error("Could not dispose an addon that has not been loaded");t.isDisposed=!0,t.dispose.apply(t.instance),this._addons.splice(i,1)}},t}();i.AddonManager=n},1546:(t,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BaseRenderLayer=void 0;var s=n(643),e=n(8803),r=n(1420),h=n(3734),o=n(1752),u=n(4774),c=n(9631),f=function(){function t(t,i,n,s,e,r,h,o){this._container=t,this._alpha=s,this._colors=e,this._rendererId=r,this._bufferService=h,this._optionsService=o,this._scaledCharWidth=0,this._scaledCharHeight=0,this._scaledCellWidth=0,this._scaledCellHeight=0,this._scaledCharLeft=0,this._scaledCharTop=0,this._currentGlyphIdentifier={chars:"",code:0,bg:0,fg:0,bold:!1,dim:!1,italic:!1},this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-"+i+"-layer"),this._canvas.style.zIndex=n.toString(),this._initCanvas(),this._container.appendChild(this._canvas)}return t.prototype.dispose=function(){var t;c.removeElementFromParent(this._canvas),null===(t=this._charAtlas)||void 0===t||t.dispose()},t.prototype._initCanvas=function(){this._ctx=o.throwIfFalsy(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()},t.prototype.onOptionsChanged=function(){},t.prototype.onBlur=function(){},t.prototype.onFocus=function(){},t.prototype.onCursorMove=function(){},t.prototype.onGridChanged=function(){},t.prototype.onSelectionChanged=function(){},t.prototype.setColors=function(t){this._refreshCharAtlas(t)},t.prototype._setTransparency=function(t){if(t!==this._alpha){var i=this._canvas;this._alpha=t,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,i),this._refreshCharAtlas(this._colors),this.onGridChanged(0,this._bufferService.rows-1)}},t.prototype._refreshCharAtlas=function(t){this._scaledCharWidth<=0&&this._scaledCharHeight<=0||(this._charAtlas=r.acquireCharAtlas(this._optionsService.options,this._rendererId,t,this._scaledCharWidth,this._scaledCharHeight),this._charAtlas.warmUp())},t.prototype.resize=function(t){this._scaledCellWidth=t.scaledCellWidth,this._scaledCellHeight=t.scaledCellHeight,this._scaledCharWidth=t.scaledCharWidth,this._scaledCharHeight=t.scaledCharHeight,this._scaledCharLeft=t.scaledCharLeft,this._scaledCharTop=t.scaledCharTop,this._canvas.width=t.scaledCanvasWidth,this._canvas.height=t.scaledCanvasHeight,this._canvas.style.width=t.canvasWidth+"px",this._canvas.style.height=t.canvasHeight+"px",this._alpha||this._clearAll(),this._refreshCharAtlas(this._colors)},t.prototype._fillCells=function(t,i,n,s){this._ctx.fillRect(t*this._scaledCellWidth,i*this._scaledCellHeight,n*this._scaledCellWidth,s*this._scaledCellHeight)},t.prototype._fillBottomLineAtCells=function(t,i,n){void 0===n&&(n=1),this._ctx.fillRect(t*this._scaledCellWidth,(i+1)*this._scaledCellHeight-window.devicePixelRatio-1,n*this._scaledCellWidth,window.devicePixelRatio)},t.prototype._fillLeftLineAtCell=function(t,i,n){this._ctx.fillRect(t*this._scaledCellWidth,i*this._scaledCellHeight,window.devicePixelRatio*n,this._scaledCellHeight)},t.prototype._strokeRectAtCell=function(t,i,n,s){this._ctx.lineWidth=window.devicePixelRatio,this._ctx.strokeRect(t*this._scaledCellWidth+window.devicePixelRatio/2,i*this._scaledCellHeight+window.devicePixelRatio/2,n*this._scaledCellWidth-window.devicePixelRatio,s*this._scaledCellHeight-window.devicePixelRatio)},t.prototype._clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))},t.prototype._clearCells=function(t,i,n,s){this._alpha?this._ctx.clearRect(t*this._scaledCellWidth,i*this._scaledCellHeight,n*this._scaledCellWidth,s*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(t*this._scaledCellWidth,i*this._scaledCellHeight,n*this._scaledCellWidth,s*this._scaledCellHeight))},t.prototype._fillCharTrueColor=function(t,i,n){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline="ideographic",this._clipRow(n),this._ctx.fillText(t.getChars(),i*this._scaledCellWidth+this._scaledCharLeft,n*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight)},t.prototype._drawChars=function(t,i,n){var r,h,o=this._getContrastColor(t);o||t.isFgRGB()||t.isBgRGB()?this._drawUncachedChars(t,i,n,o):(t.isInverse()?(r=t.isBgDefault()?e.INVERTED_DEFAULT_COLOR:t.getBgColor(),h=t.isFgDefault()?e.INVERTED_DEFAULT_COLOR:t.getFgColor()):(h=t.isBgDefault()?s.DEFAULT_COLOR:t.getBgColor(),r=t.isFgDefault()?s.DEFAULT_COLOR:t.getFgColor()),r+=this._optionsService.options.drawBoldTextInBrightColors&&t.isBold()&&r<8?8:0,this._currentGlyphIdentifier.chars=t.getChars()||s.WHITESPACE_CELL_CHAR,this._currentGlyphIdentifier.code=t.getCode()||s.WHITESPACE_CELL_CODE,this._currentGlyphIdentifier.bg=h,this._currentGlyphIdentifier.fg=r,this._currentGlyphIdentifier.bold=!!t.isBold(),this._currentGlyphIdentifier.dim=!!t.isDim(),this._currentGlyphIdentifier.italic=!!t.isItalic(),this._charAtlas&&this._charAtlas.draw(this._ctx,this._currentGlyphIdentifier,i*this._scaledCellWidth+this._scaledCharLeft,n*this._scaledCellHeight+this._scaledCharTop)||this._drawUncachedChars(t,i,n))},t.prototype._drawUncachedChars=function(t,i,n,s){if(this._ctx.save(),this._ctx.font=this._getFont(!!t.isBold(),!!t.isItalic()),this._ctx.textBaseline="ideographic",t.isInverse())if(s)this._ctx.fillStyle=s.css;else if(t.isBgDefault())this._ctx.fillStyle=u.color.opaque(this._colors.background).css;else if(t.isBgRGB())this._ctx.fillStyle="rgb("+h.AttributeData.toColorRGB(t.getBgColor()).join(",")+")";else{var r=t.getBgColor();this._optionsService.options.drawBoldTextInBrightColors&&t.isBold()&&r<8&&(r+=8),this._ctx.fillStyle=this._colors.ansi[r].css}else if(s)this._ctx.fillStyle=s.css;else if(t.isFgDefault())this._ctx.fillStyle=this._colors.foreground.css;else if(t.isFgRGB())this._ctx.fillStyle="rgb("+h.AttributeData.toColorRGB(t.getFgColor()).join(",")+")";else{var o=t.getFgColor();this._optionsService.options.drawBoldTextInBrightColors&&t.isBold()&&o<8&&(o+=8),this._ctx.fillStyle=this._colors.ansi[o].css}this._clipRow(n),t.isDim()&&(this._ctx.globalAlpha=e.DIM_OPACITY),this._ctx.fillText(t.getChars(),i*this._scaledCellWidth+this._scaledCharLeft,n*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight),this._ctx.restore()},t.prototype._clipRow=function(t){this._ctx.beginPath(),this._ctx.rect(0,t*this._scaledCellHeight,this._bufferService.cols*this._scaledCellWidth,this._scaledCellHeight),this._ctx.clip()},t.prototype._getFont=function(t,i){return(i?"italic":"")+" "+(t?this._optionsService.options.fontWeightBold:this._optionsService.options.fontWeight)+" "+this._optionsService.options.fontSize*window.devicePixelRatio+"px "+this._optionsService.options.fontFamily},t.prototype._getContrastColor=function(t){if(1!==this._optionsService.options.minimumContrastRatio){var i=this._colors.contrastCache.getColor(t.bg,t.fg);if(void 0!==i)return i||void 0;var n=t.getFgColor(),s=t.getFgColorMode(),e=t.getBgColor(),r=t.getBgColorMode(),h=!!t.isInverse(),o=!!t.isInverse();if(h){var c=n;n=e,e=c;var f=s;s=r,r=f}var a=this._resolveBackgroundRgba(r,e,h),l=this._resolveForegroundRgba(s,n,h,o),v=u.rgba.ensureContrastRatio(a,l,this._optionsService.options.minimumContrastRatio);if(v){var d={css:u.channels.toCss(v>>24&255,v>>16&255,v>>8&255),rgba:v};return this._colors.contrastCache.setColor(t.bg,t.fg,d),d}this._colors.contrastCache.setColor(t.bg,t.fg,null)}},t.prototype._resolveBackgroundRgba=function(t,i,n){switch(t){case 16777216:case 33554432:return this._colors.ansi[i].rgba;case 50331648:return i<<8;case 0:default:return n?this._colors.foreground.rgba:this._colors.background.rgba}},t.prototype._resolveForegroundRgba=function(t,i,n,s){switch(t){case 16777216:case 33554432:return this._optionsService.options.drawBoldTextInBrightColors&&s&&i<8&&(i+=8),this._colors.ansi[i].rgba;case 50331648:return i<<8;case 0:default:return n?this._colors.background.rgba:this._colors.foreground.rgba}},t}();i.BaseRenderLayer=f},2512:function(t,i,n){var s,e=this&&this.__extends||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),r=this&&this.__decorate||function(t,i,n,s){var e,r=arguments.length,h=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,s);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(h=(r<3?e(h):r>3?e(i,n,h):e(i,n))||h);return r>3&&h&&Object.defineProperty(i,n,h),h},h=this&&this.__param||function(t,i){return function(n,s){i(n,s,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CursorRenderLayer=void 0;var o=n(1546),u=n(511),c=n(2585),f=n(4725),a=600,l=function(t){function i(i,n,s,e,r,h,o,c,f){var a=t.call(this,i,"cursor",n,!0,s,e,h,o)||this;return a._onRequestRedraw=r,a._coreService=c,a._coreBrowserService=f,a._cell=new u.CellData,a._state={x:0,y:0,isFocused:!1,style:"",width:0},a._cursorRenderers={bar:a._renderBarCursor.bind(a),block:a._renderBlockCursor.bind(a),underline:a._renderUnderlineCursor.bind(a)},a}return e(i,t),i.prototype.resize=function(i){t.prototype.resize.call(this,i),this._state={x:0,y:0,isFocused:!1,style:"",width:0}},i.prototype.reset=function(){this._clearCursor(),this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=void 0,this.onOptionsChanged())},i.prototype.onBlur=function(){this._cursorBlinkStateManager&&this._cursorBlinkStateManager.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},i.prototype.onFocus=function(){this._cursorBlinkStateManager?this._cursorBlinkStateManager.resume():this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},i.prototype.onOptionsChanged=function(){var t,i=this;this._optionsService.options.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new v(this._coreBrowserService.isFocused,(function(){i._render(!0)}))):(null===(t=this._cursorBlinkStateManager)||void 0===t||t.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},i.prototype.onCursorMove=function(){this._cursorBlinkStateManager&&this._cursorBlinkStateManager.restartBlinkAnimation()},i.prototype.onGridChanged=function(){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(!1):this._cursorBlinkStateManager.restartBlinkAnimation()},i.prototype._render=function(){if(this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden){var t=this._bufferService.buffer.ybase+this._bufferService.buffer.y,i=t-this._bufferService.buffer.ydisp;if(i<0||i>=this._bufferService.rows)this._clearCursor();else{var n=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(t).loadCell(n,this._cell),void 0!==this._cell.content){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css;var s=this._optionsService.options.cursorStyle;return s&&"block"!==s?this._cursorRenderers[s](n,i,this._cell):this._renderBlurCursor(n,i,this._cell),this._ctx.restore(),this._state.x=n,this._state.y=i,this._state.isFocused=!1,this._state.style=s,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===n&&this._state.y===i&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.options.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.options.cursorStyle||"block"](n,i,this._cell),this._ctx.restore(),this._state.x=n,this._state.y=i,this._state.isFocused=!1,this._state.style=this._optionsService.options.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}}else this._clearCursor()},i.prototype._clearCursor=function(){this._state&&(this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})},i.prototype._renderBarCursor=function(t,i){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillLeftLineAtCell(t,i,this._optionsService.options.cursorWidth),this._ctx.restore()},i.prototype._renderBlockCursor=function(t,i,n){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillCells(t,i,n.getWidth(),1),this._ctx.fillStyle=this._colors.cursorAccent.css,this._fillCharTrueColor(n,t,i),this._ctx.restore()},i.prototype._renderUnderlineCursor=function(t,i){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillBottomLineAtCells(t,i),this._ctx.restore()},i.prototype._renderBlurCursor=function(t,i,n){this._ctx.save(),this._ctx.strokeStyle=this._colors.cursor.css,this._strokeRectAtCell(t,i,n.getWidth(),1),this._ctx.restore()},r([h(5,c.IBufferService),h(6,c.IOptionsService),h(7,c.ICoreService),h(8,f.ICoreBrowserService)],i)}(o.BaseRenderLayer);i.CursorRenderLayer=l;var v=function(){function t(t,i){this._renderCallback=i,this.isCursorVisible=!0,t&&this._restartInterval()}return Object.defineProperty(t.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},t.prototype.restartBlinkAnimation=function(){var t=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame((function(){t._renderCallback(),t._animationFrame=void 0}))))},t.prototype._restartInterval=function(t){var i=this;void 0===t&&(t=a),this._blinkInterval&&window.clearInterval(this._blinkInterval),this._blinkStartTimeout=window.setTimeout((function(){if(i._animationTimeRestarted){var t=a-(Date.now()-i._animationTimeRestarted);if(i._animationTimeRestarted=void 0,t>0)return void i._restartInterval(t)}i.isCursorVisible=!1,i._animationFrame=window.requestAnimationFrame((function(){i._renderCallback(),i._animationFrame=void 0})),i._blinkInterval=window.setInterval((function(){if(i._animationTimeRestarted){var t=a-(Date.now()-i._animationTimeRestarted);return i._animationTimeRestarted=void 0,void i._restartInterval(t)}i.isCursorVisible=!i.isCursorVisible,i._animationFrame=window.requestAnimationFrame((function(){i._renderCallback(),i._animationFrame=void 0}))}),a)}),t)},t.prototype.pause=function(){this.isCursorVisible=!0,this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},t.prototype.resume=function(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()},t}()},3700:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.GridCache=void 0;var n=function(){function t(){this.cache=[]}return t.prototype.resize=function(t,i){for(var n=0;n<t;n++){this.cache.length<=n&&this.cache.push([]);for(var s=this.cache[n].length;s<i;s++)this.cache[n].push(void 0);this.cache[n].length=i}this.cache.length=t},t.prototype.clear=function(){for(var t=0;t<this.cache.length;t++)for(var i=0;i<this.cache[t].length;i++)this.cache[t][i]=void 0},t}();i.GridCache=n},5098:function(t,i,n){var s,e=this&&this.__extends||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),r=this&&this.__decorate||function(t,i,n,s){var e,r=arguments.length,h=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,s);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(h=(r<3?e(h):r>3?e(i,n,h):e(i,n))||h);return r>3&&h&&Object.defineProperty(i,n,h),h},h=this&&this.__param||function(t,i){return function(n,s){i(n,s,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.LinkRenderLayer=void 0;var o=n(1546),u=n(8803),c=n(2040),f=n(2585),a=function(t){function i(i,n,s,e,r,h,o,u){var c=t.call(this,i,"link",n,!0,s,e,o,u)||this;return r.onShowLinkUnderline((function(t){return c._onShowLinkUnderline(t)})),r.onHideLinkUnderline((function(t){return c._onHideLinkUnderline(t)})),h.onShowLinkUnderline((function(t){return c._onShowLinkUnderline(t)})),h.onHideLinkUnderline((function(t){return c._onHideLinkUnderline(t)})),c}return e(i,t),i.prototype.resize=function(i){t.prototype.resize.call(this,i),this._state=void 0},i.prototype.reset=function(){this._clearCurrentLink()},i.prototype._clearCurrentLink=function(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var t=this._state.y2-this._state.y1-1;t>0&&this._clearCells(0,this._state.y1+1,this._state.cols,t),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}},i.prototype._onShowLinkUnderline=function(t){if(this._ctx.fillStyle=t.fg===u.INVERTED_DEFAULT_COLOR?this._colors.background.css:t.fg&&c.is256Color(t.fg)?this._colors.ansi[t.fg].css:this._colors.foreground.css,t.y1===t.y2)this._fillBottomLineAtCells(t.x1,t.y1,t.x2-t.x1);else{this._fillBottomLineAtCells(t.x1,t.y1,t.cols-t.x1);for(var i=t.y1+1;i<t.y2;i++)this._fillBottomLineAtCells(0,i,t.cols);this._fillBottomLineAtCells(0,t.y2,t.x2)}this._state=t},i.prototype._onHideLinkUnderline=function(){this._clearCurrentLink()},r([h(6,f.IBufferService),h(7,f.IOptionsService)],i)}(o.BaseRenderLayer);i.LinkRenderLayer=a},3525:function(t,i,n){var s,e=this&&this.__extends||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),r=this&&this.__decorate||function(t,i,n,s){var e,r=arguments.length,h=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,s);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(h=(r<3?e(h):r>3?e(i,n,h):e(i,n))||h);return r>3&&h&&Object.defineProperty(i,n,h),h},h=this&&this.__param||function(t,i){return function(n,s){i(n,s,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Renderer=void 0;var o=n(9596),u=n(4149),c=n(2512),f=n(5098),a=n(844),l=n(4725),v=n(2585),d=n(1420),b=n(8460),w=1,m=function(t){function i(i,n,s,e,r,h,a,l){var v=t.call(this)||this;return v._colors=i,v._screenElement=n,v._bufferService=h,v._charSizeService=a,v._optionsService=l,v._id=w++,v._onRequestRedraw=new b.EventEmitter,v._renderLayers=[r.createInstance(o.TextRenderLayer,v._screenElement,0,v._colors,v._optionsService.options.allowTransparency,v._id),r.createInstance(u.SelectionRenderLayer,v._screenElement,1,v._colors,v._id),r.createInstance(f.LinkRenderLayer,v._screenElement,2,v._colors,v._id,s,e),r.createInstance(c.CursorRenderLayer,v._screenElement,3,v._colors,v._id,v._onRequestRedraw)],v.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},v._devicePixelRatio=window.devicePixelRatio,v._updateDimensions(),v.onOptionsChanged(),v}return e(i,t),Object.defineProperty(i.prototype,"onRequestRedraw",{get:function(){return this._onRequestRedraw.event},enumerable:!1,configurable:!0}),i.prototype.dispose=function(){for(var i=0,n=this._renderLayers;i<n.length;i++)n[i].dispose();t.prototype.dispose.call(this),d.removeTerminalFromCache(this._id)},i.prototype.onDevicePixelRatioChange=function(){this._devicePixelRatio!==window.devicePixelRatio&&(this._devicePixelRatio=window.devicePixelRatio,this.onResize(this._bufferService.cols,this._bufferService.rows))},i.prototype.setColors=function(t){this._colors=t;for(var i=0,n=this._renderLayers;i<n.length;i++){var s=n[i];s.setColors(this._colors),s.reset()}},i.prototype.onResize=function(){this._updateDimensions();for(var t=0,i=this._renderLayers;t<i.length;t++)i[t].resize(this.dimensions);this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},i.prototype.onCharSizeChanged=function(){this.onResize(this._bufferService.cols,this._bufferService.rows)},i.prototype.onBlur=function(){this._runOperation((function(t){return t.onBlur()}))},i.prototype.onFocus=function(){this._runOperation((function(t){return t.onFocus()}))},i.prototype.onSelectionChanged=function(t,i,n){void 0===n&&(n=!1),this._runOperation((function(s){return s.onSelectionChanged(t,i,n)}))},i.prototype.onCursorMove=function(){this._runOperation((function(t){return t.onCursorMove()}))},i.prototype.onOptionsChanged=function(){this._runOperation((function(t){return t.onOptionsChanged()}))},i.prototype.clear=function(){this._runOperation((function(t){return t.reset()}))},i.prototype._runOperation=function(t){for(var i=0,n=this._renderLayers;i<n.length;i++)t(n[i])},i.prototype.renderRows=function(t,i){for(var n=0,s=this._renderLayers;n<s.length;n++)s[n].onGridChanged(t,i)},i.prototype._updateDimensions=function(){this._charSizeService.hasValidSize&&(this.dimensions.scaledCharWidth=Math.floor(this._charSizeService.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharTop=1===this._optionsService.options.lineHeight?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this._optionsService.options.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._bufferService.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._bufferService.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols)},r([h(4,v.IInstantiationService),h(5,v.IBufferService),h(6,l.ICharSizeService),h(7,v.IOptionsService)],i)}(a.Disposable);i.Renderer=m},1752:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.throwIfFalsy=void 0,i.throwIfFalsy=function(t){if(!t)throw new Error("value must not be falsy");return t}},4149:function(t,i,n){var s,e=this&&this.__extends||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),r=this&&this.__decorate||function(t,i,n,s){var e,r=arguments.length,h=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,s);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(h=(r<3?e(h):r>3?e(i,n,h):e(i,n))||h);return r>3&&h&&Object.defineProperty(i,n,h),h},h=this&&this.__param||function(t,i){return function(n,s){i(n,s,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionRenderLayer=void 0;var o=n(1546),u=n(2585),c=function(t){function i(i,n,s,e,r,h){var o=t.call(this,i,"selection",n,!0,s,e,r,h)||this;return o._clearState(),o}return e(i,t),i.prototype._clearState=function(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}},i.prototype.resize=function(i){t.prototype.resize.call(this,i),this._clearState()},i.prototype.reset=function(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())},i.prototype.onSelectionChanged=function(t,i,n){if(this._didStateChange(t,i,n,this._bufferService.buffer.ydisp))if(this._clearAll(),t&&i){var s=t[1]-this._bufferService.buffer.ydisp,e=i[1]-this._bufferService.buffer.ydisp,r=Math.max(s,0),h=Math.min(e,this._bufferService.rows-1);if(r>=this._bufferService.rows||h<0)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=this._colors.selectionTransparent.css,n){var o=t[0];this._fillCells(o,r,i[0]-o,h-r+1)}else{this._fillCells(o=s===r?t[0]:0,r,(r===e?i[0]:this._bufferService.cols)-o,1);var u=Math.max(h-r-1,0);this._fillCells(0,r+1,this._bufferService.cols,u),r!==h&&this._fillCells(0,h,e===h?i[0]:this._bufferService.cols,1)}this._state.start=[t[0],t[1]],this._state.end=[i[0],i[1]],this._state.columnSelectMode=n,this._state.ydisp=this._bufferService.buffer.ydisp}}else this._clearState()},i.prototype._didStateChange=function(t,i,n,s){return!this._areCoordinatesEqual(t,this._state.start)||!this._areCoordinatesEqual(i,this._state.end)||n!==this._state.columnSelectMode||s!==this._state.ydisp},i.prototype._areCoordinatesEqual=function(t,i){return!(!t||!i)&&t[0]===i[0]&&t[1]===i[1]},r([h(4,u.IBufferService),h(5,u.IOptionsService)],i)}(o.BaseRenderLayer);i.SelectionRenderLayer=c},9596:function(t,i,n){var s,e=this&&this.__extends||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),r=this&&this.__decorate||function(t,i,n,s){var e,r=arguments.length,h=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,s);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(h=(r<3?e(h):r>3?e(i,n,h):e(i,n))||h);return r>3&&h&&Object.defineProperty(i,n,h),h},h=this&&this.__param||function(t,i){return function(n,s){i(n,s,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.TextRenderLayer=void 0;var o=n(3700),u=n(1546),c=n(3734),f=n(643),a=n(511),l=n(2585),v=n(4725),d=n(4269),b=function(t){function i(i,n,s,e,r,h,u,c){var f=t.call(this,i,"text",n,e,s,r,h,u)||this;return f._characterJoinerService=c,f._characterWidth=0,f._characterFont="",f._characterOverlapCache={},f._workCell=new a.CellData,f._state=new o.GridCache,f}return e(i,t),i.prototype.resize=function(i){t.prototype.resize.call(this,i);var n=this._getFont(!1,!1);this._characterWidth===i.scaledCharWidth&&this._characterFont===n||(this._characterWidth=i.scaledCharWidth,this._characterFont=n,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)},i.prototype.reset=function(){this._state.clear(),this._clearAll()},i.prototype._forEachCell=function(t,i,n){for(var s=t;s<=i;s++)for(var e=s+this._bufferService.buffer.ydisp,r=this._bufferService.buffer.lines.get(e),h=this._characterJoinerService.getJoinedCharacters(e),o=0;o<this._bufferService.cols;o++){r.loadCell(o,this._workCell);var u=this._workCell,c=!1,a=o;if(0!==u.getWidth()){if(h.length>0&&o===h[0][0]){c=!0;var l=h.shift();u=new d.JoinedCellData(this._workCell,r.translateToString(!0,l[0],l[1]),l[1]-l[0]),a=l[1]-1}!c&&this._isOverlapping(u)&&a<r.length-1&&r.getCodePoint(a+1)===f.NULL_CELL_CODE&&(u.content&=-12582913,u.content|=2<<22),n(u,o,s),o=a}}},i.prototype._drawBackground=function(t,i){var n=this,s=this._ctx,e=this._bufferService.cols,r=0,h=0,o=null;s.save(),this._forEachCell(t,i,(function(t,i,u){var f=null;t.isInverse()?f=t.isFgDefault()?n._colors.foreground.css:t.isFgRGB()?"rgb("+c.AttributeData.toColorRGB(t.getFgColor()).join(",")+")":n._colors.ansi[t.getFgColor()].css:t.isBgRGB()?f="rgb("+c.AttributeData.toColorRGB(t.getBgColor()).join(",")+")":t.isBgPalette()&&(f=n._colors.ansi[t.getBgColor()].css),null===o&&(r=i,h=u),u!==h?(s.fillStyle=o||"",n._fillCells(r,h,e-r,1),r=i,h=u):o!==f&&(s.fillStyle=o||"",n._fillCells(r,h,i-r,1),r=i,h=u),o=f})),null!==o&&(s.fillStyle=o,this._fillCells(r,h,e-r,1)),s.restore()},i.prototype._drawForeground=function(t,i){var n=this;this._forEachCell(t,i,(function(t,i,s){if(!t.isInvisible()&&(n._drawChars(t,i,s),t.isUnderline())){if(n._ctx.save(),t.isInverse())if(t.isBgDefault())n._ctx.fillStyle=n._colors.background.css;else if(t.isBgRGB())n._ctx.fillStyle="rgb("+c.AttributeData.toColorRGB(t.getBgColor()).join(",")+")";else{var e=t.getBgColor();n._optionsService.options.drawBoldTextInBrightColors&&t.isBold()&&e<8&&(e+=8),n._ctx.fillStyle=n._colors.ansi[e].css}else if(t.isFgDefault())n._ctx.fillStyle=n._colors.foreground.css;else if(t.isFgRGB())n._ctx.fillStyle="rgb("+c.AttributeData.toColorRGB(t.getFgColor()).join(",")+")";else{var r=t.getFgColor();n._optionsService.options.drawBoldTextInBrightColors&&t.isBold()&&r<8&&(r+=8),n._ctx.fillStyle=n._colors.ansi[r].css}n._fillBottomLineAtCells(i,s,t.getWidth()),n._ctx.restore()}}))},i.prototype.onGridChanged=function(t,i){0!==this._state.cache.length&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,t,this._bufferService.cols,i-t+1),this._drawBackground(t,i),this._drawForeground(t,i))},i.prototype.onOptionsChanged=function(){this._setTransparency(this._optionsService.options.allowTransparency)},i.prototype._isOverlapping=function(t){if(1!==t.getWidth())return!1;if(t.getCode()<256)return!1;var i=t.getChars();if(this._characterOverlapCache.hasOwnProperty(i))return this._characterOverlapCache[i];this._ctx.save(),this._ctx.font=this._characterFont;var n=Math.floor(this._ctx.measureText(i).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[i]=n,n},r([h(5,l.IBufferService),h(6,l.IOptionsService),h(7,v.ICharacterJoinerService)],i)}(u.BaseRenderLayer);i.TextRenderLayer=b},9616:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BaseCharAtlas=void 0;var n=function(){function t(){this._didWarmUp=!1}return t.prototype.dispose=function(){},t.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)},t.prototype._doWarmUp=function(){},t.prototype.beginFrame=function(){},t}();i.BaseCharAtlas=n},1420:(t,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.removeTerminalFromCache=i.acquireCharAtlas=void 0;var s=n(2040),e=n(1906),r=[];i.acquireCharAtlas=function(t,i,n,h,o){for(var u=s.generateConfig(h,o,t,n),c=0;c<r.length;c++){var f=(a=r[c]).ownedBy.indexOf(i);if(f>=0){if(s.configEquals(a.config,u))return a.atlas;1===a.ownedBy.length?(a.atlas.dispose(),r.splice(c,1)):a.ownedBy.splice(f,1);break}}for(c=0;c<r.length;c++){var a=r[c];if(s.configEquals(a.config,u))return a.ownedBy.push(i),a.atlas}var l={atlas:new e.DynamicCharAtlas(document,u),config:u,ownedBy:[i]};return r.push(l),l.atlas},i.removeTerminalFromCache=function(t){for(var i=0;i<r.length;i++){var n=r[i].ownedBy.indexOf(t);if(-1!==n){1===r[i].ownedBy.length?(r[i].atlas.dispose(),r.splice(i,1)):r[i].ownedBy.splice(n,1);break}}}},2040:(t,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.is256Color=i.configEquals=i.generateConfig=void 0;var s=n(643);i.generateConfig=function(t,i,n,s){return{devicePixelRatio:window.devicePixelRatio,scaledCharWidth:t,scaledCharHeight:i,fontFamily:n.fontFamily,fontSize:n.fontSize,fontWeight:n.fontWeight,fontWeightBold:n.fontWeightBold,allowTransparency:n.allowTransparency,colors:{foreground:s.foreground,background:s.background,cursor:void 0,cursorAccent:void 0,selection:void 0,ansi:s.ansi}}},i.configEquals=function(t,i){for(var n=0;n<t.colors.ansi.length;n++)if(t.colors.ansi[n].rgba!==i.colors.ansi[n].rgba)return!1;return t.devicePixelRatio===i.devicePixelRatio&&t.fontFamily===i.fontFamily&&t.fontSize===i.fontSize&&t.fontWeight===i.fontWeight&&t.fontWeightBold===i.fontWeightBold&&t.allowTransparency===i.allowTransparency&&t.scaledCharWidth===i.scaledCharWidth&&t.scaledCharHeight===i.scaledCharHeight&&t.colors.foreground===i.colors.foreground&&t.colors.background===i.colors.background},i.is256Color=function(t){return t<s.DEFAULT_COLOR}},8803:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CHAR_ATLAS_CELL_SPACING=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0,i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.CHAR_ATLAS_CELL_SPACING=1},1906:function(t,i,n){var s,e=this&&this.__extends||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"__esModule",{value:!0}),i.NoneCharAtlas=i.DynamicCharAtlas=i.getGlyphCacheKey=void 0;var r=n(8803),h=n(9616),o=n(5680),u=n(7001),c=n(6114),f=n(1752),a=n(4774),l={css:"rgba(0, 0, 0, 0)",rgba:0};function v(t){return t.code<<21|t.bg<<12|t.fg<<3|(t.bold?0:4)+(t.dim?0:2)+(t.italic?0:1)}i.getGlyphCacheKey=v;var d=function(t){function i(i,n){var s=t.call(this)||this;s._config=n,s._drawToCacheCount=0,s._glyphsWaitingOnBitmap=[],s._bitmapCommitTimeout=null,s._bitmap=null,s._cacheCanvas=i.createElement("canvas"),s._cacheCanvas.width=1024,s._cacheCanvas.height=1024,s._cacheCtx=f.throwIfFalsy(s._cacheCanvas.getContext("2d",{alpha:!0}));var e=i.createElement("canvas");e.width=s._config.scaledCharWidth,e.height=s._config.scaledCharHeight,s._tmpCtx=f.throwIfFalsy(e.getContext("2d",{alpha:s._config.allowTransparency})),s._width=Math.floor(1024/s._config.scaledCharWidth),s._height=Math.floor(1024/s._config.scaledCharHeight);var r=s._width*s._height;return s._cacheMap=new u.LRUMap(r),s._cacheMap.prealloc(r),s}return e(i,t),i.prototype.dispose=function(){null!==this._bitmapCommitTimeout&&(window.clearTimeout(this._bitmapCommitTimeout),this._bitmapCommitTimeout=null)},i.prototype.beginFrame=function(){this._drawToCacheCount=0},i.prototype.draw=function(t,i,n,s){if(32===i.code)return!0;if(!this._canCache(i))return!1;var e=v(i),r=this._cacheMap.get(e);if(null!=r)return this._drawFromCache(t,r,n,s),!0;if(this._drawToCacheCount<100){var h;h=this._cacheMap.size<this._cacheMap.capacity?this._cacheMap.size:this._cacheMap.peek().index;var o=this._drawToCache(i,h);return this._cacheMap.set(e,o),this._drawFromCache(t,o,n,s),!0}return!1},i.prototype._canCache=function(t){return t.code<256},i.prototype._toCoordinateX=function(t){return t%this._width*this._config.scaledCharWidth},i.prototype._toCoordinateY=function(t){return Math.floor(t/this._width)*this._config.scaledCharHeight},i.prototype._drawFromCache=function(t,i,n,s){if(!i.isEmpty){var e=this._toCoordinateX(i.index),r=this._toCoordinateY(i.index);t.drawImage(i.inBitmap?this._bitmap:this._cacheCanvas,e,r,this._config.scaledCharWidth,this._config.scaledCharHeight,n,s,this._config.scaledCharWidth,this._config.scaledCharHeight)}},i.prototype._getColorFromAnsiIndex=function(t){return t<this._config.colors.ansi.length?this._config.colors.ansi[t]:o.DEFAULT_ANSI_COLORS[t]},i.prototype._getBackgroundColor=function(t){return this._config.allowTransparency?l:t.bg===r.INVERTED_DEFAULT_COLOR?this._config.colors.foreground:t.bg<256?this._getColorFromAnsiIndex(t.bg):this._config.colors.background},i.prototype._getForegroundColor=function(t){return t.fg===r.INVERTED_DEFAULT_COLOR?a.color.opaque(this._config.colors.background):t.fg<256?this._getColorFromAnsiIndex(t.fg):this._config.colors.foreground},i.prototype._drawToCache=function(t,i){this._drawToCacheCount++,this._tmpCtx.save();var n=this._getBackgroundColor(t);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=n.css,this._tmpCtx.fillRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),this._tmpCtx.globalCompositeOperation="source-over",this._tmpCtx.font=(t.italic?"italic":"")+" "+(t.bold?this._config.fontWeightBold:this._config.fontWeight)+" "+this._config.fontSize*this._config.devicePixelRatio+"px "+this._config.fontFamily,this._tmpCtx.textBaseline="ideographic",this._tmpCtx.fillStyle=this._getForegroundColor(t).css,t.dim&&(this._tmpCtx.globalAlpha=r.DIM_OPACITY),this._tmpCtx.fillText(t.chars,0,this._config.scaledCharHeight),this._tmpCtx.restore();var s=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),e=!1;this._config.allowTransparency||(e=function(t,i){for(var n=!0,s=i.rgba>>>24,e=i.rgba>>>16&255,r=i.rgba>>>8&255,h=0;h<t.data.length;h+=4)t.data[h]===s&&t.data[h+1]===e&&t.data[h+2]===r?t.data[h+3]=0:n=!1;return n}(s,n));var h=this._toCoordinateX(i),o=this._toCoordinateY(i);this._cacheCtx.putImageData(s,h,o);var u={index:i,isEmpty:e,inBitmap:!1};return this._addGlyphToBitmap(u),u},i.prototype._addGlyphToBitmap=function(t){var i=this;!("createImageBitmap"in window)||c.isFirefox||c.isSafari||(this._glyphsWaitingOnBitmap.push(t),null===this._bitmapCommitTimeout&&(this._bitmapCommitTimeout=window.setTimeout((function(){return i._generateBitmap()}),100)))},i.prototype._generateBitmap=function(){var t=this,i=this._glyphsWaitingOnBitmap;this._glyphsWaitingOnBitmap=[],window.createImageBitmap(this._cacheCanvas).then((function(n){t._bitmap=n;for(var s=0;s<i.length;s++)i[s].inBitmap=!0})),this._bitmapCommitTimeout=null},i}(h.BaseCharAtlas);i.DynamicCharAtlas=d;var b=function(t){function i(){return t.call(this)||this}return e(i,t),i.prototype.draw=function(){return!1},i}(h.BaseCharAtlas);i.NoneCharAtlas=b},7001:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.LRUMap=void 0;var n=function(){function t(t){this.capacity=t,this._map={},this._head=null,this._tail=null,this._nodePool=[],this.size=0}return t.prototype._unlinkNode=function(t){var i=t.prev,n=t.next;t===this._head&&(this._head=n),t===this._tail&&(this._tail=i),null!==i&&(i.next=n),null!==n&&(n.prev=i)},t.prototype._appendNode=function(t){var i=this._tail;null!==i&&(i.next=t),t.prev=i,t.next=null,this._tail=t,null===this._head&&(this._head=t)},t.prototype.prealloc=function(t){for(var i=this._nodePool,n=0;n<t;n++)i.push({prev:null,next:null,key:null,value:null})},t.prototype.get=function(t){var i=this._map[t];return void 0!==i?(this._unlinkNode(i),this._appendNode(i),i.value):null},t.prototype.peekValue=function(t){var i=this._map[t];return void 0!==i?i.value:null},t.prototype.peek=function(){var t=this._head;return null===t?null:t.value},t.prototype.set=function(t,i){var n=this._map[t];if(void 0!==n)this._unlinkNode(n=this._map[t]),n.value=i;else if(this.size>=this.capacity)this._unlinkNode(n=this._head),delete this._map[n.key],n.key=t,n.value=i,this._map[t]=n;else{var s=this._nodePool;s.length>0?((n=s.pop()).key=t,n.value=i):n={prev:null,next:null,key:t,value:i},this._map[t]=n,this.size++}this._appendNode(n)},t}();i.LRUMap=n},1296:function(t,i,n){var s,e=this&&this.__extends||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),r=this&&this.__decorate||function(t,i,n,s){var e,r=arguments.length,h=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,s);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(h=(r<3?e(h):r>3?e(i,n,h):e(i,n))||h);return r>3&&h&&Object.defineProperty(i,n,h),h},h=this&&this.__param||function(t,i){return function(n,s){i(n,s,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRenderer=void 0;var o=n(3787),u=n(8803),c=n(844),f=n(4725),a=n(2585),l=n(8460),v=n(4774),d=n(9631),b="xterm-dom-renderer-owner-",w="xterm-fg-",m="xterm-bg-",g="xterm-focus",p=1,O=function(t){function i(i,n,s,e,r,h,u,c,f,a){var l=t.call(this)||this;return l._colors=i,l._element=n,l._screenElement=s,l._viewportElement=e,l._linkifier=r,l._linkifier2=h,l._charSizeService=c,l._optionsService=f,l._bufferService=a,l._terminalClass=p++,l._rowElements=[],l._rowContainer=document.createElement("div"),l._rowContainer.classList.add("xterm-rows"),l._rowContainer.style.lineHeight="normal",l._rowContainer.setAttribute("aria-hidden","true"),l._refreshRowElements(l._bufferService.cols,l._bufferService.rows),l._selectionContainer=document.createElement("div"),l._selectionContainer.classList.add("xterm-selection"),l._selectionContainer.setAttribute("aria-hidden","true"),l.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},l._updateDimensions(),l._injectCss(),l._rowFactory=u.createInstance(o.DomRendererRowFactory,document,l._colors),l._element.classList.add(b+l._terminalClass),l._screenElement.appendChild(l._rowContainer),l._screenElement.appendChild(l._selectionContainer),l._linkifier.onShowLinkUnderline((function(t){return l._onLinkHover(t)})),l._linkifier.onHideLinkUnderline((function(t){return l._onLinkLeave(t)})),l._linkifier2.onShowLinkUnderline((function(t){return l._onLinkHover(t)})),l._linkifier2.onHideLinkUnderline((function(t){return l._onLinkLeave(t)})),l}return e(i,t),Object.defineProperty(i.prototype,"onRequestRedraw",{get:function(){return(new l.EventEmitter).event},enumerable:!1,configurable:!0}),i.prototype.dispose=function(){this._element.classList.remove(b+this._terminalClass),d.removeElementFromParent(this._rowContainer,this._selectionContainer,this._themeStyleElement,this._dimensionsStyleElement),t.prototype.dispose.call(this)},i.prototype._updateDimensions=function(){this.dimensions.scaledCharWidth=this._charSizeService.width*window.devicePixelRatio,this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharLeft=0,this.dimensions.scaledCharTop=0,this.dimensions.scaledCanvasWidth=this.dimensions.scaledCellWidth*this._bufferService.cols,this.dimensions.scaledCanvasHeight=this.dimensions.scaledCellHeight*this._bufferService.rows,this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols,this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows;for(var t=0,i=this._rowElements;t<i.length;t++){var n=i[t];n.style.width=this.dimensions.canvasWidth+"px",n.style.height=this.dimensions.actualCellHeight+"px",n.style.lineHeight=this.dimensions.actualCellHeight+"px",n.style.overflow="hidden"}this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement)),this._dimensionsStyleElement.textContent=this._terminalSelector+" .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: "+this.dimensions.actualCellWidth+"px}",this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},i.prototype.setColors=function(t){this._colors=t,this._injectCss()},i.prototype._injectCss=function(){var t=this;this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));var i=this._terminalSelector+" .xterm-rows { color: "+this._colors.foreground.css+"; font-family: "+this._optionsService.options.fontFamily+"; font-size: "+this._optionsService.options.fontSize+"px;}";i+=this._terminalSelector+" span:not(."+o.BOLD_CLASS+") { font-weight: "+this._optionsService.options.fontWeight+";}"+this._terminalSelector+" span."+o.BOLD_CLASS+" { font-weight: "+this._optionsService.options.fontWeightBold+";}"+this._terminalSelector+" span."+o.ITALIC_CLASS+" { font-style: italic;}",i+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  box-shadow: none; }}",i+="@keyframes blink_block_"+this._terminalClass+" { 0% {  background-color: "+this._colors.cursor.css+";  color: "+this._colors.cursorAccent.css+"; } 50% {  background-color: "+this._colors.cursorAccent.css+";  color: "+this._colors.cursor.css+"; }}",i+=this._terminalSelector+" .xterm-rows:not(.xterm-focus) ."+o.CURSOR_CLASS+"."+o.CURSOR_STYLE_BLOCK_CLASS+" { outline: 1px solid "+this._colors.cursor.css+"; outline-offset: -1px;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+o.CURSOR_CLASS+"."+o.CURSOR_BLINK_CLASS+":not(."+o.CURSOR_STYLE_BLOCK_CLASS+") { animation: blink_box_shadow_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+o.CURSOR_CLASS+"."+o.CURSOR_BLINK_CLASS+"."+o.CURSOR_STYLE_BLOCK_CLASS+" { animation: blink_block_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+o.CURSOR_CLASS+"."+o.CURSOR_STYLE_BLOCK_CLASS+" { background-color: "+this._colors.cursor.css+"; color: "+this._colors.cursorAccent.css+";}"+this._terminalSelector+" .xterm-rows ."+o.CURSOR_CLASS+"."+o.CURSOR_STYLE_BAR_CLASS+" { box-shadow: "+this._optionsService.options.cursorWidth+"px 0 0 "+this._colors.cursor.css+" inset;}"+this._terminalSelector+" .xterm-rows ."+o.CURSOR_CLASS+"."+o.CURSOR_STYLE_UNDERLINE_CLASS+" { box-shadow: 0 -1px 0 "+this._colors.cursor.css+" inset;}",i+=this._terminalSelector+" .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}"+this._terminalSelector+" .xterm-selection div { position: absolute; background-color: "+this._colors.selectionTransparent.css+";}",this._colors.ansi.forEach((function(n,s){i+=t._terminalSelector+" ."+w+s+" { color: "+n.css+"; }"+t._terminalSelector+" ."+m+s+" { background-color: "+n.css+"; }"})),i+=this._terminalSelector+" ."+w+u.INVERTED_DEFAULT_COLOR+" { color: "+v.color.opaque(this._colors.background).css+"; }"+this._terminalSelector+" ."+m+u.INVERTED_DEFAULT_COLOR+" { background-color: "+this._colors.foreground.css+"; }",this._themeStyleElement.textContent=i},i.prototype.onDevicePixelRatioChange=function(){this._updateDimensions()},i.prototype._refreshRowElements=function(t,i){for(var n=this._rowElements.length;n<=i;n++){var s=document.createElement("div");this._rowContainer.appendChild(s),this._rowElements.push(s)}for(;this._rowElements.length>i;)this._rowContainer.removeChild(this._rowElements.pop())},i.prototype.onResize=function(t,i){this._refreshRowElements(t,i),this._updateDimensions()},i.prototype.onCharSizeChanged=function(){this._updateDimensions()},i.prototype.onBlur=function(){this._rowContainer.classList.remove(g)},i.prototype.onFocus=function(){this._rowContainer.classList.add(g)},i.prototype.onSelectionChanged=function(t,i,n){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(t&&i){var s=t[1]-this._bufferService.buffer.ydisp,e=i[1]-this._bufferService.buffer.ydisp,r=Math.max(s,0),h=Math.min(e,this._bufferService.rows-1);if(!(r>=this._bufferService.rows||h<0)){var o=document.createDocumentFragment();n?o.appendChild(this._createSelectionElement(r,t[0],i[0],h-r+1)):(o.appendChild(this._createSelectionElement(r,s===r?t[0]:0,r===e?i[0]:this._bufferService.cols)),o.appendChild(this._createSelectionElement(r+1,0,this._bufferService.cols,h-r-1)),r!==h&&o.appendChild(this._createSelectionElement(h,0,e===h?i[0]:this._bufferService.cols))),this._selectionContainer.appendChild(o)}}},i.prototype._createSelectionElement=function(t,i,n,s){void 0===s&&(s=1);var e=document.createElement("div");return e.style.height=s*this.dimensions.actualCellHeight+"px",e.style.top=t*this.dimensions.actualCellHeight+"px",e.style.left=i*this.dimensions.actualCellWidth+"px",e.style.width=this.dimensions.actualCellWidth*(n-i)+"px",e},i.prototype.onCursorMove=function(){},i.prototype.onOptionsChanged=function(){this._updateDimensions(),this._injectCss()},i.prototype.clear=function(){for(var t=0,i=this._rowElements;t<i.length;t++)i[t].innerText=""},i.prototype.renderRows=function(t,i){for(var n=this._bufferService.buffer.ybase+this._bufferService.buffer.y,s=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),e=this._optionsService.options.cursorBlink,r=t;r<=i;r++){var h=this._rowElements[r];h.innerText="";var o=r+this._bufferService.buffer.ydisp,u=this._bufferService.buffer.lines.get(o);h.appendChild(this._rowFactory.createRow(u,o,o===n,this._optionsService.options.cursorStyle,s,e,this.dimensions.actualCellWidth,this._bufferService.cols))}},Object.defineProperty(i.prototype,"_terminalSelector",{get:function(){return"."+b+this._terminalClass},enumerable:!1,configurable:!0}),i.prototype._onLinkHover=function(t){this._setCellUnderline(t.x1,t.x2,t.y1,t.y2,t.cols,!0)},i.prototype._onLinkLeave=function(t){this._setCellUnderline(t.x1,t.x2,t.y1,t.y2,t.cols,!1)},i.prototype._setCellUnderline=function(t,i,n,s,e,r){for(;t!==i||n!==s;){var h=this._rowElements[n];if(!h)return;var o=h.children[t];o&&(o.style.textDecoration=r?"underline":"none"),++t>=e&&(t=0,n++)}},r([h(6,a.IInstantiationService),h(7,f.ICharSizeService),h(8,a.IOptionsService),h(9,a.IBufferService)],i)}(c.Disposable);i.DomRenderer=O},3787:function(t,i,n){var s=this&&this.__decorate||function(t,i,n,s){var e,r=arguments.length,h=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,s);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(h=(r<3?e(h):r>3?e(i,n,h):e(i,n))||h);return r>3&&h&&Object.defineProperty(i,n,h),h},e=this&&this.__param||function(t,i){return function(n,s){i(n,s,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRendererRowFactory=i.CURSOR_STYLE_UNDERLINE_CLASS=i.CURSOR_STYLE_BAR_CLASS=i.CURSOR_STYLE_BLOCK_CLASS=i.CURSOR_BLINK_CLASS=i.CURSOR_CLASS=i.UNDERLINE_CLASS=i.ITALIC_CLASS=i.DIM_CLASS=i.BOLD_CLASS=void 0;var r=n(8803),h=n(643),o=n(511),u=n(2585),c=n(4774),f=n(4725),a=n(4269);i.BOLD_CLASS="xterm-bold",i.DIM_CLASS="xterm-dim",i.ITALIC_CLASS="xterm-italic",i.UNDERLINE_CLASS="xterm-underline",i.CURSOR_CLASS="xterm-cursor",i.CURSOR_BLINK_CLASS="xterm-cursor-blink",i.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",i.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",i.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";var l=function(){function t(t,i,n,s){this._document=t,this._colors=i,this._characterJoinerService=n,this._optionsService=s,this._workCell=new o.CellData}return t.prototype.setColors=function(t){this._colors=t},t.prototype.createRow=function(t,n,s,e,o,u,f,l){for(var d=this._document.createDocumentFragment(),b=this._characterJoinerService.getJoinedCharacters(n),w=0,m=Math.min(t.length,l)-1;m>=0;m--)if(t.loadCell(m,this._workCell).getCode()!==h.NULL_CELL_CODE||s&&m===o){w=m+1;break}for(m=0;m<w;m++){t.loadCell(m,this._workCell);var g=this._workCell.getWidth();if(0!==g){var p=!1,O=m,j=this._workCell;if(b.length>0&&m===b[0][0]){p=!0;var y=b.shift();j=new a.JoinedCellData(this._workCell,t.translateToString(!0,y[0],y[1]),y[1]-y[0]),O=y[1]-1,g=j.getWidth()}var _=this._document.createElement("span");if(g>1&&(_.style.width=f*g+"px"),p&&(_.style.display="inline",o>=m&&o<=O&&(o=m)),s&&m===o)switch(_.classList.add(i.CURSOR_CLASS),u&&_.classList.add(i.CURSOR_BLINK_CLASS),e){case"bar":_.classList.add(i.CURSOR_STYLE_BAR_CLASS);break;case"underline":_.classList.add(i.CURSOR_STYLE_UNDERLINE_CLASS);break;default:_.classList.add(i.CURSOR_STYLE_BLOCK_CLASS)}j.isBold()&&_.classList.add(i.BOLD_CLASS),j.isItalic()&&_.classList.add(i.ITALIC_CLASS),j.isDim()&&_.classList.add(i.DIM_CLASS),j.isUnderline()&&_.classList.add(i.UNDERLINE_CLASS),_.textContent=j.isInvisible()?h.WHITESPACE_CELL_CHAR:j.getChars()||h.WHITESPACE_CELL_CHAR;var k=j.getFgColor(),M=j.getFgColorMode(),x=j.getBgColor(),q=j.getBgColorMode(),S=!!j.isInverse();if(S){var A=k;k=x,x=A;var C=M;M=q,q=C}switch(M){case 16777216:case 33554432:j.isBold()&&k<8&&this._optionsService.options.drawBoldTextInBrightColors&&(k+=8),this._applyMinimumContrast(_,this._colors.background,this._colors.ansi[k])||_.classList.add("xterm-fg-"+k);break;case 50331648:var R=c.rgba.toColor(k>>16&255,k>>8&255,255&k);this._applyMinimumContrast(_,this._colors.background,R)||this._addStyle(_,"color:#"+v(k.toString(16),"0",6));break;case 0:default:this._applyMinimumContrast(_,this._colors.background,this._colors.foreground)||S&&_.classList.add("xterm-fg-"+r.INVERTED_DEFAULT_COLOR)}switch(q){case 16777216:case 33554432:_.classList.add("xterm-bg-"+x);break;case 50331648:this._addStyle(_,"background-color:#"+v(x.toString(16),"0",6));break;case 0:default:S&&_.classList.add("xterm-bg-"+r.INVERTED_DEFAULT_COLOR)}d.appendChild(_),m=O}}return d},t.prototype._applyMinimumContrast=function(t,i,n){if(1===this._optionsService.options.minimumContrastRatio)return!1;var s=this._colors.contrastCache.getColor(this._workCell.bg,this._workCell.fg);return void 0===s&&(s=c.color.ensureContrastRatio(i,n,this._optionsService.options.minimumContrastRatio),this._colors.contrastCache.setColor(this._workCell.bg,this._workCell.fg,null!=s?s:null)),!!s&&(this._addStyle(t,"color:"+s.css),!0)},t.prototype._addStyle=function(t,i){t.setAttribute("style",""+(t.getAttribute("style")||"")+i+";")},s([e(2,f.ICharacterJoinerService),e(3,u.IOptionsService)],t)}();function v(t,i,n){for(;t.length<n;)t=i+t;return t}i.DomRendererRowFactory=l},456:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionModel=void 0;var n=function(){function t(t){this._bufferService=t,this.isSelectAllActive=!1,this.selectionStartLength=0}return t.prototype.clearSelection=function(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0},Object.defineProperty(t.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"finalSelectionEnd",{get:function(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){var t=this.selectionStart[0]+this.selectionStartLength;return t>this._bufferService.cols?[t%this._bufferService.cols,this.selectionStart[1]+Math.floor(t/this._bufferService.cols)]:[t,this.selectionStart[1]]}return this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?[Math.max(this.selectionStart[0]+this.selectionStartLength,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd}},enumerable:!1,configurable:!0}),t.prototype.areSelectionValuesReversed=function(){var t=this.selectionStart,i=this.selectionEnd;return!(!t||!i)&&(t[1]>i[1]||t[1]===i[1]&&t[0]>i[0])},t.prototype.onTrim=function(t){return this.selectionStart&&(this.selectionStart[1]-=t),this.selectionEnd&&(this.selectionEnd[1]-=t),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)},t}();i.SelectionModel=n},428:function(t,i,n){var s=this&&this.__decorate||function(t,i,n,s){var e,r=arguments.length,h=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,s);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(h=(r<3?e(h):r>3?e(i,n,h):e(i,n))||h);return r>3&&h&&Object.defineProperty(i,n,h),h},e=this&&this.__param||function(t,i){return function(n,s){i(n,s,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharSizeService=void 0;var r=n(2585),h=n(8460),o=function(){function t(t,i,n){this._optionsService=n,this.width=0,this.height=0,this._onCharSizeChange=new h.EventEmitter,this._measureStrategy=new u(t,i,this._optionsService)}return Object.defineProperty(t.prototype,"hasValidSize",{get:function(){return this.width>0&&this.height>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onCharSizeChange",{get:function(){return this._onCharSizeChange.event},enumerable:!1,configurable:!0}),t.prototype.measure=function(){var t=this._measureStrategy.measure();t.width===this.width&&t.height===this.height||(this.width=t.width,this.height=t.height,this._onCharSizeChange.fire())},s([e(2,r.IOptionsService)],t)}();i.CharSizeService=o;var u=function(){function t(t,i,n){this._document=t,this._parentElement=i,this._optionsService=n,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}return t.prototype.measure=function(){this._measureElement.style.fontFamily=this._optionsService.options.fontFamily,this._measureElement.style.fontSize=this._optionsService.options.fontSize+"px";var t=this._measureElement.getBoundingClientRect();return 0!==t.width&&0!==t.height&&(this._result.width=t.width,this._result.height=Math.ceil(t.height)),this._result},t}()},4269:function(t,i,n){var s,e=this&&this.__extends||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),r=this&&this.__decorate||function(t,i,n,s){var e,r=arguments.length,h=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,s);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(h=(r<3?e(h):r>3?e(i,n,h):e(i,n))||h);return r>3&&h&&Object.defineProperty(i,n,h),h},h=this&&this.__param||function(t,i){return function(n,s){i(n,s,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharacterJoinerService=i.JoinedCellData=void 0;var o=n(3734),u=n(643),c=n(511),f=n(2585),a=function(t){function i(i,n,s){var e=t.call(this)||this;return e.content=0,e.combinedData="",e.fg=i.fg,e.bg=i.bg,e.combinedData=n,e._width=s,e}return e(i,t),i.prototype.isCombined=function(){return 2097152},i.prototype.getWidth=function(){return this._width},i.prototype.getChars=function(){return this.combinedData},i.prototype.getCode=function(){return 2097151},i.prototype.setFromCharData=function(){throw new Error("not implemented")},i.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},i}(o.AttributeData);i.JoinedCellData=a;var l=function(){function t(t){this._bufferService=t,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new c.CellData}return t.prototype.register=function(t){var i={id:this._nextCharacterJoinerId++,handler:t};return this._characterJoiners.push(i),i.id},t.prototype.deregister=function(t){for(var i=0;i<this._characterJoiners.length;i++)if(this._characterJoiners[i].id===t)return this._characterJoiners.splice(i,1),!0;return!1},t.prototype.getJoinedCharacters=function(t){if(0===this._characterJoiners.length)return[];var i=this._bufferService.buffer.lines.get(t);if(!i||0===i.length)return[];for(var n=[],s=i.translateToString(!0),e=0,r=0,h=0,o=i.getFg(0),c=i.getBg(0),f=0;f<i.getTrimmedLength();f++)if(i.loadCell(f,this._workCell),0!==this._workCell.getWidth()){if(this._workCell.fg!==o||this._workCell.bg!==c){if(f-e>1)for(var a=this._getJoinedRanges(s,h,r,i,e),l=0;l<a.length;l++)n.push(a[l]);e=f,h=r,o=this._workCell.fg,c=this._workCell.bg}r+=this._workCell.getChars().length||u.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-e>1)for(a=this._getJoinedRanges(s,h,r,i,e),l=0;l<a.length;l++)n.push(a[l]);return n},t.prototype._getJoinedRanges=function(i,n,s,e,r){for(var h=i.substring(n,s),o=this._characterJoiners[0].handler(h),u=1;u<this._characterJoiners.length;u++)for(var c=this._characterJoiners[u].handler(h),f=0;f<c.length;f++)t._mergeRanges(o,c[f]);return this._stringRangesToCellRanges(o,e,r),o},t.prototype._stringRangesToCellRanges=function(t,i,n){var s=0,e=!1,r=0,h=t[s];if(h){for(var o=n;o<this._bufferService.cols;o++){var c=i.getWidth(o),f=i.getString(o).length||u.WHITESPACE_CELL_CHAR.length;if(0!==c){if(!e&&h[0]<=r&&(h[0]=o,e=!0),h[1]<=r){if(h[1]=o,!(h=t[++s]))break;h[0]<=r?(h[0]=o,e=!0):e=!1}r+=f}}h&&(h[1]=this._bufferService.cols)}},t._mergeRanges=function(t,i){for(var n=!1,s=0;s<t.length;s++){var e=t[s];if(n){if(i[1]<=e[0])return t[s-1][1]=i[1],t;if(i[1]<=e[1])return t[s-1][1]=Math.max(i[1],e[1]),t.splice(s,1),t;t.splice(s,1),s--}else{if(i[1]<=e[0])return t.splice(s,0,i),t;if(i[1]<=e[1])return e[0]=Math.min(i[0],e[0]),t;i[0]<e[1]&&(e[0]=Math.min(i[0],e[0]),n=!0)}}return n?t[t.length-1][1]=i[1]:t.push(i),t},t=r([h(0,f.IBufferService)],t)}();i.CharacterJoinerService=l},5114:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreBrowserService=void 0;var n=function(){function t(t){this._textarea=t}return Object.defineProperty(t.prototype,"isFocused",{get:function(){return(this._textarea.getRootNode?this._textarea.getRootNode():document).activeElement===this._textarea&&document.hasFocus()},enumerable:!1,configurable:!0}),t}();i.CoreBrowserService=n},8934:function(t,i,n){var s=this&&this.__decorate||function(t,i,n,s){var e,r=arguments.length,h=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,s);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(h=(r<3?e(h):r>3?e(i,n,h):e(i,n))||h);return r>3&&h&&Object.defineProperty(i,n,h),h},e=this&&this.__param||function(t,i){return function(n,s){i(n,s,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.MouseService=void 0;var r=n(4725),h=n(9806),o=function(){function t(t,i){this._renderService=t,this._charSizeService=i}return t.prototype.getCoords=function(t,i,n,s,e){return h.getCoords(t,i,n,s,this._charSizeService.hasValidSize,this._renderService.dimensions.actualCellWidth,this._renderService.dimensions.actualCellHeight,e)},t.prototype.getRawByteCoords=function(t,i,n,s){var e=this.getCoords(t,i,n,s);return h.getRawByteCoords(e)},s([e(0,r.IRenderService),e(1,r.ICharSizeService)],t)}();i.MouseService=o},3230:function(t,i,n){var s,e=this&&this.__extends||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),r=this&&this.__decorate||function(t,i,n,s){var e,r=arguments.length,h=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,s);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(h=(r<3?e(h):r>3?e(i,n,h):e(i,n))||h);return r>3&&h&&Object.defineProperty(i,n,h),h},h=this&&this.__param||function(t,i){return function(n,s){i(n,s,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.RenderService=void 0;var o=n(6193),u=n(8460),c=n(844),f=n(5596),a=n(3656),l=n(2585),v=n(4725),d=function(t){function i(i,n,s,e,r,h){var c=t.call(this)||this;if(c._renderer=i,c._rowCount=n,c._charSizeService=r,c._isPaused=!1,c._needsFullRefresh=!1,c._isNextRenderRedrawOnly=!0,c._needsSelectionRefresh=!1,c._canvasWidth=0,c._canvasHeight=0,c._selectionState={start:void 0,end:void 0,columnSelectMode:!1},c._onDimensionsChange=new u.EventEmitter,c._onRender=new u.EventEmitter,c._onRefreshRequest=new u.EventEmitter,c.register({dispose:function(){return c._renderer.dispose()}}),c._renderDebouncer=new o.RenderDebouncer((function(t,i){return c._renderRows(t,i)})),c.register(c._renderDebouncer),c._screenDprMonitor=new f.ScreenDprMonitor,c._screenDprMonitor.setListener((function(){return c.onDevicePixelRatioChange()})),c.register(c._screenDprMonitor),c.register(h.onResize((function(){return c._fullRefresh()}))),c.register(e.onOptionChange((function(){return c._renderer.onOptionsChanged()}))),c.register(c._charSizeService.onCharSizeChange((function(){return c.onCharSizeChanged()}))),c._renderer.onRequestRedraw((function(t){return c.refreshRows(t.start,t.end,!0)})),c.register(a.addDisposableDomListener(window,"resize",(function(){return c.onDevicePixelRatioChange()}))),"IntersectionObserver"in window){var l=new IntersectionObserver((function(t){return c._onIntersectionChange(t[t.length-1])}),{threshold:0});l.observe(s),c.register({dispose:function(){return l.disconnect()}})}return c}return e(i,t),Object.defineProperty(i.prototype,"onDimensionsChange",{get:function(){return this._onDimensionsChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onRenderedBufferChange",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onRefreshRequest",{get:function(){return this._onRefreshRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dimensions",{get:function(){return this._renderer.dimensions},enumerable:!1,configurable:!0}),i.prototype._onIntersectionChange=function(t){this._isPaused=void 0===t.isIntersecting?0===t.intersectionRatio:!t.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)},i.prototype.refreshRows=function(t,i,n){void 0===n&&(n=!1),this._isPaused?this._needsFullRefresh=!0:(n||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(t,i,this._rowCount))},i.prototype._renderRows=function(t,i){this._renderer.renderRows(t,i),this._needsSelectionRefresh&&(this._renderer.onSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRender.fire({start:t,end:i}),this._isNextRenderRedrawOnly=!0},i.prototype.resize=function(t,i){this._rowCount=i,this._fireOnCanvasResize()},i.prototype.changeOptions=function(){this._renderer.onOptionsChanged(),this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize()},i.prototype._fireOnCanvasResize=function(){this._renderer.dimensions.canvasWidth===this._canvasWidth&&this._renderer.dimensions.canvasHeight===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions)},i.prototype.dispose=function(){t.prototype.dispose.call(this)},i.prototype.setRenderer=function(t){var i=this;this._renderer.dispose(),this._renderer=t,this._renderer.onRequestRedraw((function(t){return i.refreshRows(t.start,t.end,!0)})),this._needsSelectionRefresh=!0,this._fullRefresh()},i.prototype._fullRefresh=function(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)},i.prototype.setColors=function(t){this._renderer.setColors(t),this._fullRefresh()},i.prototype.onDevicePixelRatioChange=function(){this._charSizeService.measure(),this._renderer.onDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1)},i.prototype.onResize=function(t,i){this._renderer.onResize(t,i),this._fullRefresh()},i.prototype.onCharSizeChanged=function(){this._renderer.onCharSizeChanged()},i.prototype.onBlur=function(){this._renderer.onBlur()},i.prototype.onFocus=function(){this._renderer.onFocus()},i.prototype.onSelectionChanged=function(t,i,n){this._selectionState.start=t,this._selectionState.end=i,this._selectionState.columnSelectMode=n,this._renderer.onSelectionChanged(t,i,n)},i.prototype.onCursorMove=function(){this._renderer.onCursorMove()},i.prototype.clear=function(){this._renderer.clear()},r([h(3,l.IOptionsService),h(4,v.ICharSizeService),h(5,l.IBufferService)],i)}(c.Disposable);i.RenderService=d},9312:function(t,i,n){var s,e=this&&this.__extends||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),r=this&&this.__decorate||function(t,i,n,s){var e,r=arguments.length,h=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,s);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(h=(r<3?e(h):r>3?e(i,n,h):e(i,n))||h);return r>3&&h&&Object.defineProperty(i,n,h),h},h=this&&this.__param||function(t,i){return function(n,s){i(n,s,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionService=void 0;var o=n(6114),u=n(456),c=n(511),f=n(8460),a=n(4725),l=n(2585),v=n(9806),d=n(9504),b=n(844),w=n(4841),m=String.fromCharCode(160),g=new RegExp(m,"g"),p=function(t){function i(i,n,s,e,r,h,o,a){var l=t.call(this)||this;return l._element=i,l._screenElement=n,l._linkifier=s,l._bufferService=e,l._coreService=r,l._mouseService=h,l._optionsService=o,l._renderService=a,l._dragScrollAmount=0,l._enabled=!0,l._workCell=new c.CellData,l._mouseDownTimeStamp=0,l._oldHasSelection=!1,l._oldSelectionStart=void 0,l._oldSelectionEnd=void 0,l._onLinuxMouseSelection=l.register(new f.EventEmitter),l._onRedrawRequest=l.register(new f.EventEmitter),l._onSelectionChange=l.register(new f.EventEmitter),l._onRequestScrollLines=l.register(new f.EventEmitter),l._mouseMoveListener=function(t){return l._onMouseMove(t)},l._mouseUpListener=function(t){return l._onMouseUp(t)},l._coreService.onUserInput((function(){l.hasSelection&&l.clearSelection()})),l._trimListener=l._bufferService.buffer.lines.onTrim((function(t){return l._onTrim(t)})),l.register(l._bufferService.buffers.onBufferActivate((function(t){return l._onBufferActivate(t)}))),l.enable(),l._model=new u.SelectionModel(l._bufferService),l._activeSelectionMode=0,l}return e(i,t),Object.defineProperty(i.prototype,"onLinuxMouseSelection",{get:function(){return this._onLinuxMouseSelection.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onRequestRedraw",{get:function(){return this._onRedrawRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onRequestScrollLines",{get:function(){return this._onRequestScrollLines.event},enumerable:!1,configurable:!0}),i.prototype.dispose=function(){this._removeMouseDownListeners()},i.prototype.reset=function(){this.clearSelection()},i.prototype.disable=function(){this.clearSelection(),this._enabled=!1},i.prototype.enable=function(){this._enabled=!0},Object.defineProperty(i.prototype,"selectionStart",{get:function(){return this._model.finalSelectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selectionEnd",{get:function(){return this._model.finalSelectionEnd},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hasSelection",{get:function(){var t=this._model.finalSelectionStart,i=this._model.finalSelectionEnd;return!(!t||!i||t[0]===i[0]&&t[1]===i[1])},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selectionText",{get:function(){var t=this._model.finalSelectionStart,i=this._model.finalSelectionEnd;if(!t||!i)return"";var n=this._bufferService.buffer,s=[];if(3===this._activeSelectionMode){if(t[0]===i[0])return"";for(var e=t[1];e<=i[1];e++){var r=n.translateBufferLineToString(e,!0,t[0],i[0]);s.push(r)}}else{for(s.push(n.translateBufferLineToString(t[1],!0,t[0],t[1]===i[1]?i[0]:void 0)),e=t[1]+1;e<=i[1]-1;e++){var h=n.lines.get(e);r=n.translateBufferLineToString(e,!0),h&&h.isWrapped?s[s.length-1]+=r:s.push(r)}t[1]!==i[1]&&(h=n.lines.get(i[1]),r=n.translateBufferLineToString(i[1],!0,0,i[0]),h&&h.isWrapped?s[s.length-1]+=r:s.push(r))}return s.map((function(t){return t.replace(g," ")})).join(o.isWindows?"\r\n":"\n")},enumerable:!1,configurable:!0}),i.prototype.clearSelection=function(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()},i.prototype.refresh=function(t){var i=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame((function(){return i._refresh()}))),o.isLinux&&t&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)},i.prototype._refresh=function(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:3===this._activeSelectionMode})},i.prototype._isClickInSelection=function(t){var i=this._getMouseBufferCoords(t),n=this._model.finalSelectionStart,s=this._model.finalSelectionEnd;return!!(n&&s&&i)&&this._areCoordsInSelection(i,n,s)},i.prototype._areCoordsInSelection=function(t,i,n){return t[1]>i[1]&&t[1]<n[1]||i[1]===n[1]&&t[1]===i[1]&&t[0]>=i[0]&&t[0]<n[0]||i[1]<n[1]&&t[1]===n[1]&&t[0]<n[0]||i[1]<n[1]&&t[1]===i[1]&&t[0]>=i[0]},i.prototype._selectWordAtCursor=function(t,i){var n,s,e=null===(s=null===(n=this._linkifier.currentLink)||void 0===n?void 0:n.link)||void 0===s?void 0:s.range;if(e)return this._model.selectionStart=[e.start.x-1,e.start.y-1],this._model.selectionStartLength=w.getRangeLength(e,this._bufferService.cols),this._model.selectionEnd=void 0,!0;var r=this._getMouseBufferCoords(t);return!!r&&(this._selectWordAt(r,i),this._model.selectionEnd=void 0,!0)},i.prototype.selectAll=function(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()},i.prototype.selectLines=function(t,i){this._model.clearSelection(),t=Math.max(t,0),i=Math.min(i,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,t],this._model.selectionEnd=[this._bufferService.cols,i],this.refresh(),this._onSelectionChange.fire()},i.prototype._onTrim=function(t){this._model.onTrim(t)&&this.refresh()},i.prototype._getMouseBufferCoords=function(t){var i=this._mouseService.getCoords(t,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(i)return i[0]--,i[1]--,i[1]+=this._bufferService.buffer.ydisp,i},i.prototype._getMouseEventScrollAmount=function(t){var i=v.getCoordsRelativeToElement(t,this._screenElement)[1],n=this._renderService.dimensions.canvasHeight;return i>=0&&i<=n?0:(i>n&&(i-=n),i=Math.min(Math.max(i,-50),50),(i/=50)/Math.abs(i)+Math.round(14*i))},i.prototype.shouldForceSelection=function(t){return o.isMac?t.altKey&&this._optionsService.options.macOptionClickForcesSelection:t.shiftKey},i.prototype.onMouseDown=function(t){if(this._mouseDownTimeStamp=t.timeStamp,(2!==t.button||!this.hasSelection)&&0===t.button){if(!this._enabled){if(!this.shouldForceSelection(t))return;t.stopPropagation()}t.preventDefault(),this._dragScrollAmount=0,this._enabled&&t.shiftKey?this._onIncrementalClick(t):1===t.detail?this._onSingleClick(t):2===t.detail?this._onDoubleClick(t):3===t.detail&&this._onTripleClick(t),this._addMouseDownListeners(),this.refresh(!0)}},i.prototype._addMouseDownListeners=function(){var t=this;this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=window.setInterval((function(){return t._dragScroll()}),50)},i.prototype._removeMouseDownListeners=function(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0},i.prototype._onIncrementalClick=function(t){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(t))},i.prototype._onSingleClick=function(t){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(t)?3:0,this._model.selectionStart=this._getMouseBufferCoords(t),this._model.selectionStart){this._model.selectionEnd=void 0;var i=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);i&&i.length!==this._model.selectionStart[0]&&0===i.hasWidth(this._model.selectionStart[0])&&this._model.selectionStart[0]++}},i.prototype._onDoubleClick=function(t){this._selectWordAtCursor(t,!0)&&(this._activeSelectionMode=1)},i.prototype._onTripleClick=function(t){var i=this._getMouseBufferCoords(t);i&&(this._activeSelectionMode=2,this._selectLineAt(i[1]))},i.prototype.shouldColumnSelect=function(t){return t.altKey&&!(o.isMac&&this._optionsService.options.macOptionClickForcesSelection)},i.prototype._onMouseMove=function(t){if(t.stopImmediatePropagation(),this._model.selectionStart){var i=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(t),this._model.selectionEnd){2===this._activeSelectionMode?this._model.selectionEnd[0]=this._model.selectionEnd[1]<this._model.selectionStart[1]?0:this._bufferService.cols:1===this._activeSelectionMode&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(t),3!==this._activeSelectionMode&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));var n=this._bufferService.buffer;if(this._model.selectionEnd[1]<n.lines.length){var s=n.lines.get(this._model.selectionEnd[1]);s&&0===s.hasWidth(this._model.selectionEnd[0])&&this._model.selectionEnd[0]++}i&&i[0]===this._model.selectionEnd[0]&&i[1]===this._model.selectionEnd[1]||this.refresh(!0)}else this.refresh(!0)}},i.prototype._dragScroll=function(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});var t=this._bufferService.buffer;this._dragScrollAmount>0?(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(t.ydisp+this._bufferService.rows,t.lines.length-1)):(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=t.ydisp),this.refresh()}},i.prototype._onMouseUp=function(t){var i=t.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&i<500&&t.altKey&&this._optionsService.getOption("altClickMovesCursor")){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){var n=this._mouseService.getCoords(t,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(n&&void 0!==n[0]&&void 0!==n[1]){var s=d.moveToCellSequence(n[0]-1,n[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(s,!0)}}}else this._fireEventIfSelectionChanged()},i.prototype._fireEventIfSelectionChanged=function(){var t=this._model.finalSelectionStart,i=this._model.finalSelectionEnd,n=!(!t||!i||t[0]===i[0]&&t[1]===i[1]);n?t&&i&&(this._oldSelectionStart&&this._oldSelectionEnd&&t[0]===this._oldSelectionStart[0]&&t[1]===this._oldSelectionStart[1]&&i[0]===this._oldSelectionEnd[0]&&i[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(t,i,n)):this._oldHasSelection&&this._fireOnSelectionChange(t,i,n)},i.prototype._fireOnSelectionChange=function(t,i,n){this._oldSelectionStart=t,this._oldSelectionEnd=i,this._oldHasSelection=n,this._onSelectionChange.fire()},i.prototype._onBufferActivate=function(t){var i=this;this.clearSelection(),this._trimListener.dispose(),this._trimListener=t.activeBuffer.lines.onTrim((function(t){return i._onTrim(t)}))},i.prototype._convertViewportColToCharacterIndex=function(t,i){for(var n=i[0],s=0;i[0]>=s;s++){var e=t.loadCell(s,this._workCell).getChars().length;0===this._workCell.getWidth()?n--:e>1&&i[0]!==s&&(n+=e-1)}return n},i.prototype.setSelection=function(t,i,n){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[t,i],this._model.selectionStartLength=n,this.refresh()},i.prototype.rightClickSelect=function(t){this._isClickInSelection(t)||(this._selectWordAtCursor(t,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())},i.prototype._getWordAt=function(t,i,n,s){if(void 0===n&&(n=!0),void 0===s&&(s=!0),!(t[0]>=this._bufferService.cols)){var e=this._bufferService.buffer,r=e.lines.get(t[1]);if(r){var h=e.translateBufferLineToString(t[1],!1),o=this._convertViewportColToCharacterIndex(r,t),u=o,c=t[0]-o,f=0,a=0,l=0,v=0;if(" "===h.charAt(o)){for(;o>0&&" "===h.charAt(o-1);)o--;for(;u<h.length&&" "===h.charAt(u+1);)u++}else{var d=t[0],b=t[0];0===r.getWidth(d)&&(f++,d--),2===r.getWidth(b)&&(a++,b++);var w=r.getString(b).length;for(w>1&&(v+=w-1,u+=w-1);d>0&&o>0&&!this._isCharWordSeparator(r.loadCell(d-1,this._workCell));){r.loadCell(d-1,this._workCell);var m=this._workCell.getChars().length;0===this._workCell.getWidth()?(f++,d--):m>1&&(l+=m-1,o-=m-1),o--,d--}for(;b<r.length&&u+1<h.length&&!this._isCharWordSeparator(r.loadCell(b+1,this._workCell));){r.loadCell(b+1,this._workCell);var g=this._workCell.getChars().length;2===this._workCell.getWidth()?(a++,b++):g>1&&(v+=g-1,u+=g-1),u++,b++}}u++;var p=o+c-f+l,O=Math.min(this._bufferService.cols,u-o+f+a-l-v);if(i||""!==h.slice(o,u).trim()){if(n&&0===p&&32!==r.getCodePoint(0)){var j=e.lines.get(t[1]-1);if(j&&r.isWrapped&&32!==j.getCodePoint(this._bufferService.cols-1)){var y=this._getWordAt([this._bufferService.cols-1,t[1]-1],!1,!0,!1);if(y){var _=this._bufferService.cols-y.start;p-=_,O+=_}}}if(s&&p+O===this._bufferService.cols&&32!==r.getCodePoint(this._bufferService.cols-1)){var k=e.lines.get(t[1]+1);if(k&&k.isWrapped&&32!==k.getCodePoint(0)){var M=this._getWordAt([0,t[1]+1],!1,!1,!0);M&&(O+=M.length)}}return{start:p,length:O}}}}},i.prototype._selectWordAt=function(t,i){var n=this._getWordAt(t,i);if(n){for(;n.start<0;)n.start+=this._bufferService.cols,t[1]--;this._model.selectionStart=[n.start,t[1]],this._model.selectionStartLength=n.length}},i.prototype._selectToWordAt=function(t){var i=this._getWordAt(t,!0);if(i){for(var n=t[1];i.start<0;)i.start+=this._bufferService.cols,n--;if(!this._model.areSelectionValuesReversed())for(;i.start+i.length>this._bufferService.cols;)i.length-=this._bufferService.cols,n++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?i.start:i.start+i.length,n]}},i.prototype._isCharWordSeparator=function(t){return 0!==t.getWidth()&&this._optionsService.options.wordSeparator.indexOf(t.getChars())>=0},i.prototype._selectLineAt=function(t){var i=this._bufferService.buffer.getWrappedRangeForLine(t);this._model.selectionStart=[0,i.first],this._model.selectionEnd=[this._bufferService.cols,i.last],this._model.selectionStartLength=0},r([h(3,l.IBufferService),h(4,l.ICoreService),h(5,a.IMouseService),h(6,l.IOptionsService),h(7,a.IRenderService)],i)}(b.Disposable);i.SelectionService=p},4725:(t,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ICharacterJoinerService=i.ISoundService=i.ISelectionService=i.IRenderService=i.IMouseService=i.ICoreBrowserService=i.ICharSizeService=void 0;var s=n(8343);i.ICharSizeService=s.createDecorator("CharSizeService"),i.ICoreBrowserService=s.createDecorator("CoreBrowserService"),i.IMouseService=s.createDecorator("MouseService"),i.IRenderService=s.createDecorator("RenderService"),i.ISelectionService=s.createDecorator("SelectionService"),i.ISoundService=s.createDecorator("SoundService"),i.ICharacterJoinerService=s.createDecorator("CharacterJoinerService")},357:function(t,i,n){var s=this&&this.__decorate||function(t,i,n,s){var e,r=arguments.length,h=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,s);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(h=(r<3?e(h):r>3?e(i,n,h):e(i,n))||h);return r>3&&h&&Object.defineProperty(i,n,h),h},e=this&&this.__param||function(t,i){return function(n,s){i(n,s,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.SoundService=void 0;var r=n(2585),h=function(){function t(t){this._optionsService=t}return Object.defineProperty(t,"audioContext",{get:function(){if(!t._audioContext){var i=window.AudioContext||window.webkitAudioContext;if(!i)return console.warn("Web Audio API is not supported by this browser. Consider upgrading to the latest version"),null;t._audioContext=new i}return t._audioContext},enumerable:!1,configurable:!0}),t.prototype.playBellSound=function(){var i=t.audioContext;if(i){var n=i.createBufferSource();i.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._optionsService.options.bellSound)),(function(t){n.buffer=t,n.connect(i.destination),n.start(0)}))}},t.prototype._base64ToArrayBuffer=function(t){for(var i=window.atob(t),n=i.length,s=new Uint8Array(n),e=0;e<n;e++)s[e]=i.charCodeAt(e);return s.buffer},t.prototype._removeMimeType=function(t){return t.split(",")[1]},t=s([e(0,r.IOptionsService)],t)}();i.SoundService=h},6349:(t,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CircularList=void 0;var s=n(8460),e=function(){function t(t){this._maxLength=t,this.onDeleteEmitter=new s.EventEmitter,this.onInsertEmitter=new s.EventEmitter,this.onTrimEmitter=new s.EventEmitter,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}return Object.defineProperty(t.prototype,"onDelete",{get:function(){return this.onDeleteEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onInsert",{get:function(){return this.onInsertEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onTrim",{get:function(){return this.onTrimEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxLength",{get:function(){return this._maxLength},set:function(t){if(this._maxLength!==t){for(var i=new Array(t),n=0;n<Math.min(t,this.length);n++)i[n]=this._array[this._getCyclicIndex(n)];this._array=i,this._maxLength=t,this._startIndex=0}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._length},set:function(t){if(t>this._length)for(var i=this._length;i<t;i++)this._array[i]=void 0;this._length=t},enumerable:!1,configurable:!0}),t.prototype.get=function(t){return this._array[this._getCyclicIndex(t)]},t.prototype.set=function(t,i){this._array[this._getCyclicIndex(t)]=i},t.prototype.push=function(t){this._array[this._getCyclicIndex(this._length)]=t,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++},t.prototype.recycle=function(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]},Object.defineProperty(t.prototype,"isFull",{get:function(){return this._length===this._maxLength},enumerable:!1,configurable:!0}),t.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length---1)]},t.prototype.splice=function(t,i){for(var n=[],s=2;s<arguments.length;s++)n[s-2]=arguments[s];if(i){for(var e=t;e<this._length-i;e++)this._array[this._getCyclicIndex(e)]=this._array[this._getCyclicIndex(e+i)];this._length-=i,this.onDeleteEmitter.fire({index:t,amount:i})}for(e=this._length-1;e>=t;e--)this._array[this._getCyclicIndex(e+n.length)]=this._array[this._getCyclicIndex(e)];for(e=0;e<n.length;e++)this._array[this._getCyclicIndex(t+e)]=n[e];if(n.length&&this.onInsertEmitter.fire({index:t,amount:n.length}),this._length+n.length>this._maxLength){var r=this._length+n.length-this._maxLength;this._startIndex+=r,this._length=this._maxLength,this.onTrimEmitter.fire(r)}else this._length+=n.length},t.prototype.trimStart=function(t){t>this._length&&(t=this._length),this._startIndex+=t,this._length-=t,this.onTrimEmitter.fire(t)},t.prototype.shiftElements=function(t,i,n){if(!(i<=0)){if(t<0||t>=this._length)throw new Error("start argument out of range");if(t+n<0)throw new Error("Cannot shift elements in list beyond index 0");if(n>0){for(var s=i-1;s>=0;s--)this.set(t+s+n,this.get(t+s));var e=t+i+n-this._length;if(e>0)for(this._length+=e;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(s=0;s<i;s++)this.set(t+s+n,this.get(t+s))}},t.prototype._getCyclicIndex=function(t){return(this._startIndex+t)%this._maxLength},t}();i.CircularList=e},1439:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.clone=void 0,i.clone=function t(i,n){if(void 0===n&&(n=5),"object"!=typeof i)return i;var s=Array.isArray(i)?[]:{};for(var e in i)s[e]=n<=1?i[e]:i[e]&&t(i[e],n-1);return s}},8969:function(t,i,n){var s,e=this&&this.__extends||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"__esModule",{value:!0}),i.CoreTerminal=void 0;var r=n(844),h=n(2585),o=n(4348),u=n(7866),c=n(744),f=n(7302),a=n(6975),l=n(8460),v=n(1753),d=n(3730),b=n(1480),w=n(7994),m=n(9282),g=n(5435),p=n(5981),O=!1,j=function(t){function i(i){var n=t.call(this)||this;return n._onBinary=new l.EventEmitter,n._onData=new l.EventEmitter,n._onLineFeed=new l.EventEmitter,n._onResize=new l.EventEmitter,n._onScroll=new l.EventEmitter,n._instantiationService=new o.InstantiationService,n.optionsService=new f.OptionsService(i),n._instantiationService.setService(h.IOptionsService,n.optionsService),n._bufferService=n.register(n._instantiationService.createInstance(c.BufferService)),n._instantiationService.setService(h.IBufferService,n._bufferService),n._logService=n._instantiationService.createInstance(u.LogService),n._instantiationService.setService(h.ILogService,n._logService),n._coreService=n.register(n._instantiationService.createInstance(a.CoreService,(function(){return n.scrollToBottom()}))),n._instantiationService.setService(h.ICoreService,n._coreService),n._coreMouseService=n._instantiationService.createInstance(v.CoreMouseService),n._instantiationService.setService(h.ICoreMouseService,n._coreMouseService),n._dirtyRowService=n._instantiationService.createInstance(d.DirtyRowService),n._instantiationService.setService(h.IDirtyRowService,n._dirtyRowService),n.unicodeService=n._instantiationService.createInstance(b.UnicodeService),n._instantiationService.setService(h.IUnicodeService,n.unicodeService),n._charsetService=n._instantiationService.createInstance(w.CharsetService),n._instantiationService.setService(h.ICharsetService,n._charsetService),n._inputHandler=new g.InputHandler(n._bufferService,n._charsetService,n._coreService,n._dirtyRowService,n._logService,n.optionsService,n._coreMouseService,n.unicodeService),n.register(l.forwardEvent(n._inputHandler.onLineFeed,n._onLineFeed)),n.register(n._inputHandler),n.register(l.forwardEvent(n._bufferService.onResize,n._onResize)),n.register(l.forwardEvent(n._coreService.onData,n._onData)),n.register(l.forwardEvent(n._coreService.onBinary,n._onBinary)),n.register(n.optionsService.onOptionChange((function(t){return n._updateOptions(t)}))),n.register(n._bufferService.onScroll((function(){n._onScroll.fire({position:n._bufferService.buffer.ydisp,source:0}),n._dirtyRowService.markRangeDirty(n._bufferService.buffer.scrollTop,n._bufferService.buffer.scrollBottom)}))),n._writeBuffer=new p.WriteBuffer((function(t,i){return n._inputHandler.parse(t,i)})),n}return e(i,t),Object.defineProperty(i.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onScroll",{get:function(){var t=this;return this._onScrollApi||(this._onScrollApi=new l.EventEmitter,this.register(this._onScroll.event((function(i){var n;null===(n=t._onScrollApi)||void 0===n||n.fire(i.position)})))),this._onScrollApi.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cols",{get:function(){return this._bufferService.cols},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rows",{get:function(){return this._bufferService.rows},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"buffers",{get:function(){return this._bufferService.buffers},enumerable:!1,configurable:!0}),i.prototype.dispose=function(){var i;this._isDisposed||(t.prototype.dispose.call(this),null===(i=this._windowsMode)||void 0===i||i.dispose(),this._windowsMode=void 0)},i.prototype.write=function(t,i){this._writeBuffer.write(t,i)},i.prototype.writeSync=function(t,i){this._logService.logLevel<=h.LogLevelEnum.WARN&&!O&&(this._logService.warn("writeSync is unreliable and will be removed soon."),O=!0),this._writeBuffer.writeSync(t,i)},i.prototype.resize=function(t,i){isNaN(t)||isNaN(i)||(t=Math.max(t,c.MINIMUM_COLS),i=Math.max(i,c.MINIMUM_ROWS),this._bufferService.resize(t,i))},i.prototype.scroll=function(t,i){void 0===i&&(i=!1),this._bufferService.scroll(t,i)},i.prototype.scrollLines=function(t,i,n){this._bufferService.scrollLines(t,i,n)},i.prototype.scrollPages=function(t){this._bufferService.scrollPages(t)},i.prototype.scrollToTop=function(){this._bufferService.scrollToTop()},i.prototype.scrollToBottom=function(){this._bufferService.scrollToBottom()},i.prototype.scrollToLine=function(t){this._bufferService.scrollToLine(t)},i.prototype.registerEscHandler=function(t,i){return this._inputHandler.registerEscHandler(t,i)},i.prototype.registerDcsHandler=function(t,i){return this._inputHandler.registerDcsHandler(t,i)},i.prototype.registerCsiHandler=function(t,i){return this._inputHandler.registerCsiHandler(t,i)},i.prototype.registerOscHandler=function(t,i){return this._inputHandler.registerOscHandler(t,i)},i.prototype._setup=function(){this.optionsService.options.windowsMode&&this._enableWindowsMode()},i.prototype.reset=function(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this._coreService.reset(),this._coreMouseService.reset()},i.prototype._updateOptions=function(t){var i;switch(t){case"scrollback":this.buffers.resize(this.cols,this.rows);break;case"windowsMode":this.optionsService.options.windowsMode?this._enableWindowsMode():(null===(i=this._windowsMode)||void 0===i||i.dispose(),this._windowsMode=void 0)}},i.prototype._enableWindowsMode=function(){var t=this;if(!this._windowsMode){var i=[];i.push(this.onLineFeed(m.updateWindowsModeWrappedState.bind(null,this._bufferService))),i.push(this.registerCsiHandler({final:"H"},(function(){return m.updateWindowsModeWrappedState(t._bufferService),!1}))),this._windowsMode={dispose:function(){for(var t=0,n=i;t<n.length;t++)n[t].dispose()}}}},i}(r.Disposable);i.CoreTerminal=j},8460:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.forwardEvent=i.EventEmitter=void 0;var n=function(){function t(){this._listeners=[],this._disposed=!1}return Object.defineProperty(t.prototype,"event",{get:function(){var t=this;return this._event||(this._event=function(i){return t._listeners.push(i),{dispose:function(){if(!t._disposed)for(var n=0;n<t._listeners.length;n++)if(t._listeners[n]===i)return void t._listeners.splice(n,1)}}}),this._event},enumerable:!1,configurable:!0}),t.prototype.fire=function(t,i){for(var n=[],s=0;s<this._listeners.length;s++)n.push(this._listeners[s]);for(s=0;s<n.length;s++)n[s].call(void 0,t,i)},t.prototype.dispose=function(){this._listeners&&(this._listeners.length=0),this._disposed=!0},t}();i.EventEmitter=n,i.forwardEvent=function(t,i){return t((function(t){return i.fire(t)}))}},5435:function(t,i,n){var s,e=this&&this.__extends||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"__esModule",{value:!0}),i.InputHandler=i.WindowsOptionsReportType=void 0;var r,h=n(2584),o=n(7116),u=n(2015),c=n(844),f=n(8273),a=n(482),l=n(8437),v=n(8460),d=n(643),b=n(511),w=n(3734),m=n(2585),g=n(6242),p=n(6351),O={"(":0,")":1,"*":2,"+":3,"-":1,".":2},j=131072;function y(t,i){if(t>24)return i.setWinLines||!1;switch(t){case 1:return!!i.restoreWin;case 2:return!!i.minimizeWin;case 3:return!!i.setWinPosition;case 4:return!!i.setWinSizePixels;case 5:return!!i.raiseWin;case 6:return!!i.lowerWin;case 7:return!!i.refreshWin;case 8:return!!i.setWinSizeChars;case 9:return!!i.maximizeWin;case 10:return!!i.fullscreenWin;case 11:return!!i.getWinState;case 13:return!!i.getWinPosition;case 14:return!!i.getWinSizePixels;case 15:return!!i.getScreenSizePixels;case 16:return!!i.getCellSizePixels;case 18:return!!i.getWinSizeChars;case 19:return!!i.getScreenSizeChars;case 20:return!!i.getIconTitle;case 21:return!!i.getWinTitle;case 22:return!!i.pushTitle;case 23:return!!i.popTitle;case 24:return!!i.setWinLines}return!1}!function(t){t[t.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",t[t.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"}(r=i.WindowsOptionsReportType||(i.WindowsOptionsReportType={}));var _=function(){function t(t,i,n,s){this._bufferService=t,this._coreService=i,this._logService=n,this._optionsService=s,this._data=new Uint32Array(0)}return t.prototype.hook=function(){this._data=new Uint32Array(0)},t.prototype.put=function(t,i,n){this._data=f.concat(this._data,t.subarray(i,n))},t.prototype.unhook=function(t){if(!t)return this._data=new Uint32Array(0),!0;var i=a.utf32ToString(this._data);switch(this._data=new Uint32Array(0),i){case'"q':this._coreService.triggerDataEvent(h.C0.ESC+'P1$r0"q'+h.C0.ESC+"\\");break;case'"p':this._coreService.triggerDataEvent(h.C0.ESC+'P1$r61;1"p'+h.C0.ESC+"\\");break;case"r":this._coreService.triggerDataEvent(h.C0.ESC+"P1$r"+(this._bufferService.buffer.scrollTop+1)+";"+(this._bufferService.buffer.scrollBottom+1)+"r"+h.C0.ESC+"\\");break;case"m":this._coreService.triggerDataEvent(h.C0.ESC+"P1$r0m"+h.C0.ESC+"\\");break;case" q":var n={block:2,underline:4,bar:6}[this._optionsService.options.cursorStyle];this._coreService.triggerDataEvent(h.C0.ESC+"P1$r"+(n-=this._optionsService.options.cursorBlink?1:0)+" q"+h.C0.ESC+"\\");break;default:this._logService.debug("Unknown DCS $q %s",i),this._coreService.triggerDataEvent(h.C0.ESC+"P0$r"+h.C0.ESC+"\\")}return!0},t}(),k=function(t){function i(i,n,s,e,r,c,f,d,w){void 0===w&&(w=new u.EscapeSequenceParser);var m=t.call(this)||this;m._bufferService=i,m._charsetService=n,m._coreService=s,m._dirtyRowService=e,m._logService=r,m._optionsService=c,m._coreMouseService=f,m._unicodeService=d,m._parser=w,m._parseBuffer=new Uint32Array(4096),m._stringDecoder=new a.StringToUtf32,m._utf8Decoder=new a.Utf8ToUtf32,m._workCell=new b.CellData,m._windowTitle="",m._iconName="",m._windowTitleStack=[],m._iconNameStack=[],m._curAttrData=l.DEFAULT_ATTR_DATA.clone(),m._eraseAttrDataInternal=l.DEFAULT_ATTR_DATA.clone(),m._onRequestBell=new v.EventEmitter,m._onRequestRefreshRows=new v.EventEmitter,m._onRequestReset=new v.EventEmitter,m._onRequestSyncScrollBar=new v.EventEmitter,m._onRequestWindowsOptionsReport=new v.EventEmitter,m._onA11yChar=new v.EventEmitter,m._onA11yTab=new v.EventEmitter,m._onCursorMove=new v.EventEmitter,m._onLineFeed=new v.EventEmitter,m._onScroll=new v.EventEmitter,m._onTitleChange=new v.EventEmitter,m._onAnsiColorChange=new v.EventEmitter,m._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},m.register(m._parser),m._parser.setCsiHandlerFallback((function(t,i){m._logService.debug("Unknown CSI code: ",{identifier:m._parser.identToString(t),params:i.toArray()})})),m._parser.setEscHandlerFallback((function(t){m._logService.debug("Unknown ESC code: ",{identifier:m._parser.identToString(t)})})),m._parser.setExecuteHandlerFallback((function(t){m._logService.debug("Unknown EXECUTE code: ",{code:t})})),m._parser.setOscHandlerFallback((function(t,i,n){m._logService.debug("Unknown OSC code: ",{identifier:t,action:i,data:n})})),m._parser.setDcsHandlerFallback((function(t,i,n){"HOOK"===i&&(n=n.toArray()),m._logService.debug("Unknown DCS code: ",{identifier:m._parser.identToString(t),action:i,payload:n})})),m._parser.setPrintHandler((function(t,i,n){return m.print(t,i,n)})),m._parser.registerCsiHandler({final:"@"},(function(t){return m.insertChars(t)})),m._parser.registerCsiHandler({intermediates:" ",final:"@"},(function(t){return m.scrollLeft(t)})),m._parser.registerCsiHandler({final:"A"},(function(t){return m.cursorUp(t)})),m._parser.registerCsiHandler({intermediates:" ",final:"A"},(function(t){return m.scrollRight(t)})),m._parser.registerCsiHandler({final:"B"},(function(t){return m.cursorDown(t)})),m._parser.registerCsiHandler({final:"C"},(function(t){return m.cursorForward(t)})),m._parser.registerCsiHandler({final:"D"},(function(t){return m.cursorBackward(t)})),m._parser.registerCsiHandler({final:"E"},(function(t){return m.cursorNextLine(t)})),m._parser.registerCsiHandler({final:"F"},(function(t){return m.cursorPrecedingLine(t)})),m._parser.registerCsiHandler({final:"G"},(function(t){return m.cursorCharAbsolute(t)})),m._parser.registerCsiHandler({final:"H"},(function(t){return m.cursorPosition(t)})),m._parser.registerCsiHandler({final:"I"},(function(t){return m.cursorForwardTab(t)})),m._parser.registerCsiHandler({final:"J"},(function(t){return m.eraseInDisplay(t)})),m._parser.registerCsiHandler({prefix:"?",final:"J"},(function(t){return m.eraseInDisplay(t)})),m._parser.registerCsiHandler({final:"K"},(function(t){return m.eraseInLine(t)})),m._parser.registerCsiHandler({prefix:"?",final:"K"},(function(t){return m.eraseInLine(t)})),m._parser.registerCsiHandler({final:"L"},(function(t){return m.insertLines(t)})),m._parser.registerCsiHandler({final:"M"},(function(t){return m.deleteLines(t)})),m._parser.registerCsiHandler({final:"P"},(function(t){return m.deleteChars(t)})),m._parser.registerCsiHandler({final:"S"},(function(t){return m.scrollUp(t)})),m._parser.registerCsiHandler({final:"T"},(function(t){return m.scrollDown(t)})),m._parser.registerCsiHandler({final:"X"},(function(t){return m.eraseChars(t)})),m._parser.registerCsiHandler({final:"Z"},(function(t){return m.cursorBackwardTab(t)})),m._parser.registerCsiHandler({final:"`"},(function(t){return m.charPosAbsolute(t)})),m._parser.registerCsiHandler({final:"a"},(function(t){return m.hPositionRelative(t)})),m._parser.registerCsiHandler({final:"b"},(function(t){return m.repeatPrecedingCharacter(t)})),m._parser.registerCsiHandler({final:"c"},(function(t){return m.sendDeviceAttributesPrimary(t)})),m._parser.registerCsiHandler({prefix:">",final:"c"},(function(t){return m.sendDeviceAttributesSecondary(t)})),m._parser.registerCsiHandler({final:"d"},(function(t){return m.linePosAbsolute(t)})),m._parser.registerCsiHandler({final:"e"},(function(t){return m.vPositionRelative(t)})),m._parser.registerCsiHandler({final:"f"},(function(t){return m.hVPosition(t)})),m._parser.registerCsiHandler({final:"g"},(function(t){return m.tabClear(t)})),m._parser.registerCsiHandler({final:"h"},(function(t){return m.setMode(t)})),m._parser.registerCsiHandler({prefix:"?",final:"h"},(function(t){return m.setModePrivate(t)})),m._parser.registerCsiHandler({final:"l"},(function(t){return m.resetMode(t)})),m._parser.registerCsiHandler({prefix:"?",final:"l"},(function(t){return m.resetModePrivate(t)})),m._parser.registerCsiHandler({final:"m"},(function(t){return m.charAttributes(t)})),m._parser.registerCsiHandler({final:"n"},(function(t){return m.deviceStatus(t)})),m._parser.registerCsiHandler({prefix:"?",final:"n"},(function(t){return m.deviceStatusPrivate(t)})),m._parser.registerCsiHandler({intermediates:"!",final:"p"},(function(t){return m.softReset(t)})),m._parser.registerCsiHandler({intermediates:" ",final:"q"},(function(t){return m.setCursorStyle(t)})),m._parser.registerCsiHandler({final:"r"},(function(t){return m.setScrollRegion(t)})),m._parser.registerCsiHandler({final:"s"},(function(t){return m.saveCursor(t)})),m._parser.registerCsiHandler({final:"t"},(function(t){return m.windowOptions(t)})),m._parser.registerCsiHandler({final:"u"},(function(t){return m.restoreCursor(t)})),m._parser.registerCsiHandler({intermediates:"'",final:"}"},(function(t){return m.insertColumns(t)})),m._parser.registerCsiHandler({intermediates:"'",final:"~"},(function(t){return m.deleteColumns(t)})),m._parser.setExecuteHandler(h.C0.BEL,(function(){return m.bell()})),m._parser.setExecuteHandler(h.C0.LF,(function(){return m.lineFeed()})),m._parser.setExecuteHandler(h.C0.VT,(function(){return m.lineFeed()})),m._parser.setExecuteHandler(h.C0.FF,(function(){return m.lineFeed()})),m._parser.setExecuteHandler(h.C0.CR,(function(){return m.carriageReturn()})),m._parser.setExecuteHandler(h.C0.BS,(function(){return m.backspace()})),m._parser.setExecuteHandler(h.C0.HT,(function(){return m.tab()})),m._parser.setExecuteHandler(h.C0.SO,(function(){return m.shiftOut()})),m._parser.setExecuteHandler(h.C0.SI,(function(){return m.shiftIn()})),m._parser.setExecuteHandler(h.C1.IND,(function(){return m.index()})),m._parser.setExecuteHandler(h.C1.NEL,(function(){return m.nextLine()})),m._parser.setExecuteHandler(h.C1.HTS,(function(){return m.tabSet()})),m._parser.registerOscHandler(0,new g.OscHandler((function(t){return m.setTitle(t),m.setIconName(t),!0}))),m._parser.registerOscHandler(1,new g.OscHandler((function(t){return m.setIconName(t)}))),m._parser.registerOscHandler(2,new g.OscHandler((function(t){return m.setTitle(t)}))),m._parser.registerOscHandler(4,new g.OscHandler((function(t){return m.setAnsiColor(t)}))),m._parser.registerEscHandler({final:"7"},(function(){return m.saveCursor()})),m._parser.registerEscHandler({final:"8"},(function(){return m.restoreCursor()})),m._parser.registerEscHandler({final:"D"},(function(){return m.index()})),m._parser.registerEscHandler({final:"E"},(function(){return m.nextLine()})),m._parser.registerEscHandler({final:"H"},(function(){return m.tabSet()})),m._parser.registerEscHandler({final:"M"},(function(){return m.reverseIndex()})),m._parser.registerEscHandler({final:"="},(function(){return m.keypadApplicationMode()})),m._parser.registerEscHandler({final:">"},(function(){return m.keypadNumericMode()})),m._parser.registerEscHandler({final:"c"},(function(){return m.fullReset()})),m._parser.registerEscHandler({final:"n"},(function(){return m.setgLevel(2)})),m._parser.registerEscHandler({final:"o"},(function(){return m.setgLevel(3)})),m._parser.registerEscHandler({final:"|"},(function(){return m.setgLevel(3)})),m._parser.registerEscHandler({final:"}"},(function(){return m.setgLevel(2)})),m._parser.registerEscHandler({final:"~"},(function(){return m.setgLevel(1)})),m._parser.registerEscHandler({intermediates:"%",final:"@"},(function(){return m.selectDefaultCharset()})),m._parser.registerEscHandler({intermediates:"%",final:"G"},(function(){return m.selectDefaultCharset()}));var p=function(t){O._parser.registerEscHandler({intermediates:"(",final:t},(function(){return m.selectCharset("("+t)})),O._parser.registerEscHandler({intermediates:")",final:t},(function(){return m.selectCharset(")"+t)})),O._parser.registerEscHandler({intermediates:"*",final:t},(function(){return m.selectCharset("*"+t)})),O._parser.registerEscHandler({intermediates:"+",final:t},(function(){return m.selectCharset("+"+t)})),O._parser.registerEscHandler({intermediates:"-",final:t},(function(){return m.selectCharset("-"+t)})),O._parser.registerEscHandler({intermediates:".",final:t},(function(){return m.selectCharset("."+t)})),O._parser.registerEscHandler({intermediates:"/",final:t},(function(){return m.selectCharset("/"+t)}))},O=this;for(var j in o.CHARSETS)p(j);return m._parser.registerEscHandler({intermediates:"#",final:"8"},(function(){return m.screenAlignmentPattern()})),m._parser.setErrorHandler((function(t){return m._logService.error("Parsing error: ",t),t})),m._parser.registerDcsHandler({intermediates:"$",final:"q"},new _(m._bufferService,m._coreService,m._logService,m._optionsService)),m}return e(i,t),Object.defineProperty(i.prototype,"onRequestBell",{get:function(){return this._onRequestBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onRequestReset",{get:function(){return this._onRequestReset.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onRequestSyncScrollBar",{get:function(){return this._onRequestSyncScrollBar.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onRequestWindowsOptionsReport",{get:function(){return this._onRequestWindowsOptionsReport.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onA11yChar",{get:function(){return this._onA11yChar.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onA11yTab",{get:function(){return this._onA11yTab.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onAnsiColorChange",{get:function(){return this._onAnsiColorChange.event},enumerable:!1,configurable:!0}),i.prototype.dispose=function(){t.prototype.dispose.call(this)},i.prototype._preserveStack=function(t,i,n,s){this._parseStack.paused=!0,this._parseStack.cursorStartX=t,this._parseStack.cursorStartY=i,this._parseStack.decodedLength=n,this._parseStack.position=s},i.prototype._logSlowResolvingAsync=function(t){this._logService.logLevel<=m.LogLevelEnum.WARN&&Promise.race([t,new Promise((function(t,i){return setTimeout((function(){return i("#SLOW_TIMEOUT")}),5e3)}))]).catch((function(t){if("#SLOW_TIMEOUT"!==t)throw t;console.warn("async parser handler taking longer than 5000 ms")}))},i.prototype.parse=function(t,i){var n,s=this._bufferService.buffer,e=s.x,r=s.y,h=0,o=this._parseStack.paused;if(o){if(n=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,i))return this._logSlowResolvingAsync(n),n;e=this._parseStack.cursorStartX,r=this._parseStack.cursorStartY,this._parseStack.paused=!1,t.length>j&&(h=this._parseStack.position+j)}if(this._logService.debug("parsing data",t),this._parseBuffer.length<t.length&&this._parseBuffer.length<j&&(this._parseBuffer=new Uint32Array(Math.min(t.length,j))),o||this._dirtyRowService.clearRange(),t.length>j)for(var u=h;u<t.length;u+=j){var c=u+j<t.length?u+j:t.length,f="string"==typeof t?this._stringDecoder.decode(t.substring(u,c),this._parseBuffer):this._utf8Decoder.decode(t.subarray(u,c),this._parseBuffer);if(n=this._parser.parse(this._parseBuffer,f))return this._preserveStack(e,r,f,u),this._logSlowResolvingAsync(n),n}else if(!o&&(f="string"==typeof t?this._stringDecoder.decode(t,this._parseBuffer):this._utf8Decoder.decode(t,this._parseBuffer),n=this._parser.parse(this._parseBuffer,f)))return this._preserveStack(e,r,f,0),this._logSlowResolvingAsync(n),n;(s=this._bufferService.buffer).x===e&&s.y===r||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowService.start,this._dirtyRowService.end)},i.prototype.print=function(t,i,n){var s,e,r=this._bufferService.buffer,h=this._charsetService.charset,o=this._optionsService.options.screenReaderMode,u=this._bufferService.cols,c=this._coreService.decPrivateModes.wraparound,f=this._coreService.modes.insertMode,l=this._curAttrData,v=r.lines.get(r.ybase+r.y);this._dirtyRowService.markDirty(r.y),r.x&&n-i>0&&2===v.getWidth(r.x-1)&&v.setCellFromCodePoint(r.x-1,0,1,l.fg,l.bg,l.extended);for(var b=i;b<n;++b){if(e=this._unicodeService.wcwidth(s=t[b]),s<127&&h){var w=h[String.fromCharCode(s)];w&&(s=w.charCodeAt(0))}if(o&&this._onA11yChar.fire(a.stringFromCodePoint(s)),e||!r.x){if(r.x+e-1>=u)if(c){for(;r.x<u;)v.setCellFromCodePoint(r.x++,0,1,l.fg,l.bg,l.extended);r.x=0,r.y++,r.y===r.scrollBottom+1?(r.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(r.y>=this._bufferService.rows&&(r.y=this._bufferService.rows-1),r.lines.get(r.ybase+r.y).isWrapped=!0),v=r.lines.get(r.ybase+r.y)}else if(r.x=u-1,2===e)continue;if(f&&(v.insertCells(r.x,e,r.getNullCell(l),l),2===v.getWidth(u-1)&&v.setCellFromCodePoint(u-1,d.NULL_CELL_CODE,d.NULL_CELL_WIDTH,l.fg,l.bg,l.extended)),v.setCellFromCodePoint(r.x++,s,e,l.fg,l.bg,l.extended),e>0)for(;--e;)v.setCellFromCodePoint(r.x++,0,0,l.fg,l.bg,l.extended)}else v.getWidth(r.x-1)?v.addCodepointToCell(r.x-1,s):v.addCodepointToCell(r.x-2,s)}n-i>0&&(v.loadCell(r.x-1,this._workCell),this._parser.precedingCodepoint=2===this._workCell.getWidth()||this._workCell.getCode()>65535?0:this._workCell.isCombined()?this._workCell.getChars().charCodeAt(0):this._workCell.content),r.x<u&&n-i>0&&0===v.getWidth(r.x)&&!v.hasContent(r.x)&&v.setCellFromCodePoint(r.x,0,1,l.fg,l.bg,l.extended),this._dirtyRowService.markDirty(r.y)},i.prototype.registerCsiHandler=function(t,i){var n=this;return this._parser.registerCsiHandler(t,"t"!==t.final||t.prefix||t.intermediates?i:function(t){return!y(t.params[0],n._optionsService.options.windowOptions)||i(t)})},i.prototype.registerDcsHandler=function(t,i){return this._parser.registerDcsHandler(t,new p.DcsHandler(i))},i.prototype.registerEscHandler=function(t,i){return this._parser.registerEscHandler(t,i)},i.prototype.registerOscHandler=function(t,i){return this._parser.registerOscHandler(t,new g.OscHandler(i))},i.prototype.bell=function(){return this._onRequestBell.fire(),!0},i.prototype.lineFeed=function(){var t=this._bufferService.buffer;return this._dirtyRowService.markDirty(t.y),this._optionsService.options.convertEol&&(t.x=0),t.y++,t.y===t.scrollBottom+1?(t.y--,this._bufferService.scroll(this._eraseAttrData())):t.y>=this._bufferService.rows&&(t.y=this._bufferService.rows-1),t.x>=this._bufferService.cols&&t.x--,this._dirtyRowService.markDirty(t.y),this._onLineFeed.fire(),!0},i.prototype.carriageReturn=function(){return this._bufferService.buffer.x=0,!0},i.prototype.backspace=function(){var t,i=this._bufferService.buffer;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),i.x>0&&i.x--,!0;if(this._restrictCursor(this._bufferService.cols),i.x>0)i.x--;else if(0===i.x&&i.y>i.scrollTop&&i.y<=i.scrollBottom&&(null===(t=i.lines.get(i.ybase+i.y))||void 0===t?void 0:t.isWrapped)){i.lines.get(i.ybase+i.y).isWrapped=!1,i.y--,i.x=this._bufferService.cols-1;var n=i.lines.get(i.ybase+i.y);n.hasWidth(i.x)&&!n.hasContent(i.x)&&i.x--}return this._restrictCursor(),!0},i.prototype.tab=function(){if(this._bufferService.buffer.x>=this._bufferService.cols)return!0;var t=this._bufferService.buffer.x;return this._bufferService.buffer.x=this._bufferService.buffer.nextStop(),this._optionsService.options.screenReaderMode&&this._onA11yTab.fire(this._bufferService.buffer.x-t),!0},i.prototype.shiftOut=function(){return this._charsetService.setgLevel(1),!0},i.prototype.shiftIn=function(){return this._charsetService.setgLevel(0),!0},i.prototype._restrictCursor=function(t){void 0===t&&(t=this._bufferService.cols-1),this._bufferService.buffer.x=Math.min(t,Math.max(0,this._bufferService.buffer.x)),this._bufferService.buffer.y=this._coreService.decPrivateModes.origin?Math.min(this._bufferService.buffer.scrollBottom,Math.max(this._bufferService.buffer.scrollTop,this._bufferService.buffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._bufferService.buffer.y)),this._dirtyRowService.markDirty(this._bufferService.buffer.y)},i.prototype._setCursor=function(t,i){this._dirtyRowService.markDirty(this._bufferService.buffer.y),this._coreService.decPrivateModes.origin?(this._bufferService.buffer.x=t,this._bufferService.buffer.y=this._bufferService.buffer.scrollTop+i):(this._bufferService.buffer.x=t,this._bufferService.buffer.y=i),this._restrictCursor(),this._dirtyRowService.markDirty(this._bufferService.buffer.y)},i.prototype._moveCursor=function(t,i){this._restrictCursor(),this._setCursor(this._bufferService.buffer.x+t,this._bufferService.buffer.y+i)},i.prototype.cursorUp=function(t){var i=this._bufferService.buffer.y-this._bufferService.buffer.scrollTop;return this._moveCursor(0,i>=0?-Math.min(i,t.params[0]||1):-(t.params[0]||1)),!0},i.prototype.cursorDown=function(t){var i=this._bufferService.buffer.scrollBottom-this._bufferService.buffer.y;return this._moveCursor(0,i>=0?Math.min(i,t.params[0]||1):t.params[0]||1),!0},i.prototype.cursorForward=function(t){return this._moveCursor(t.params[0]||1,0),!0},i.prototype.cursorBackward=function(t){return this._moveCursor(-(t.params[0]||1),0),!0},i.prototype.cursorNextLine=function(t){return this.cursorDown(t),this._bufferService.buffer.x=0,!0},i.prototype.cursorPrecedingLine=function(t){return this.cursorUp(t),this._bufferService.buffer.x=0,!0},i.prototype.cursorCharAbsolute=function(t){return this._setCursor((t.params[0]||1)-1,this._bufferService.buffer.y),!0},i.prototype.cursorPosition=function(t){return this._setCursor(t.length>=2?(t.params[1]||1)-1:0,(t.params[0]||1)-1),!0},i.prototype.charPosAbsolute=function(t){return this._setCursor((t.params[0]||1)-1,this._bufferService.buffer.y),!0},i.prototype.hPositionRelative=function(t){return this._moveCursor(t.params[0]||1,0),!0},i.prototype.linePosAbsolute=function(t){return this._setCursor(this._bufferService.buffer.x,(t.params[0]||1)-1),!0},i.prototype.vPositionRelative=function(t){return this._moveCursor(0,t.params[0]||1),!0},i.prototype.hVPosition=function(t){return this.cursorPosition(t),!0},i.prototype.tabClear=function(t){var i=t.params[0];return 0===i?delete this._bufferService.buffer.tabs[this._bufferService.buffer.x]:3===i&&(this._bufferService.buffer.tabs={}),!0},i.prototype.cursorForwardTab=function(t){if(this._bufferService.buffer.x>=this._bufferService.cols)return!0;for(var i=t.params[0]||1;i--;)this._bufferService.buffer.x=this._bufferService.buffer.nextStop();return!0},i.prototype.cursorBackwardTab=function(t){if(this._bufferService.buffer.x>=this._bufferService.cols)return!0;for(var i=t.params[0]||1,n=this._bufferService.buffer;i--;)n.x=n.prevStop();return!0},i.prototype._eraseInBufferLine=function(t,i,n,s){void 0===s&&(s=!1);var e=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+t);e.replaceCells(i,n,this._bufferService.buffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),s&&(e.isWrapped=!1)},i.prototype._resetBufferLine=function(t){var i=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+t);i.fill(this._bufferService.buffer.getNullCell(this._eraseAttrData())),i.isWrapped=!1},i.prototype.eraseInDisplay=function(t){var i;switch(this._restrictCursor(this._bufferService.cols),t.params[0]){case 0:for(this._dirtyRowService.markDirty(i=this._bufferService.buffer.y),this._eraseInBufferLine(i++,this._bufferService.buffer.x,this._bufferService.cols,0===this._bufferService.buffer.x);i<this._bufferService.rows;i++)this._resetBufferLine(i);this._dirtyRowService.markDirty(i);break;case 1:for(this._dirtyRowService.markDirty(i=this._bufferService.buffer.y),this._eraseInBufferLine(i,0,this._bufferService.buffer.x+1,!0),this._bufferService.buffer.x+1>=this._bufferService.cols&&(this._bufferService.buffer.lines.get(i+1).isWrapped=!1);i--;)this._resetBufferLine(i);this._dirtyRowService.markDirty(0);break;case 2:for(this._dirtyRowService.markDirty((i=this._bufferService.rows)-1);i--;)this._resetBufferLine(i);this._dirtyRowService.markDirty(0);break;case 3:var n=this._bufferService.buffer.lines.length-this._bufferService.rows;n>0&&(this._bufferService.buffer.lines.trimStart(n),this._bufferService.buffer.ybase=Math.max(this._bufferService.buffer.ybase-n,0),this._bufferService.buffer.ydisp=Math.max(this._bufferService.buffer.ydisp-n,0),this._onScroll.fire(0))}return!0},i.prototype.eraseInLine=function(t){switch(this._restrictCursor(this._bufferService.cols),t.params[0]){case 0:this._eraseInBufferLine(this._bufferService.buffer.y,this._bufferService.buffer.x,this._bufferService.cols);break;case 1:this._eraseInBufferLine(this._bufferService.buffer.y,0,this._bufferService.buffer.x+1);break;case 2:this._eraseInBufferLine(this._bufferService.buffer.y,0,this._bufferService.cols)}return this._dirtyRowService.markDirty(this._bufferService.buffer.y),!0},i.prototype.insertLines=function(t){this._restrictCursor();var i=t.params[0]||1,n=this._bufferService.buffer;if(n.y>n.scrollBottom||n.y<n.scrollTop)return!0;for(var s=n.ybase+n.y,e=this._bufferService.rows-1+n.ybase-(this._bufferService.rows-1-n.scrollBottom)+1;i--;)n.lines.splice(e-1,1),n.lines.splice(s,0,n.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(n.y,n.scrollBottom),n.x=0,!0},i.prototype.deleteLines=function(t){this._restrictCursor();var i=t.params[0]||1,n=this._bufferService.buffer;if(n.y>n.scrollBottom||n.y<n.scrollTop)return!0;var s,e=n.ybase+n.y;for(s=this._bufferService.rows-1+n.ybase-(s=this._bufferService.rows-1-n.scrollBottom);i--;)n.lines.splice(e,1),n.lines.splice(s,0,n.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(n.y,n.scrollBottom),n.x=0,!0},i.prototype.insertChars=function(t){this._restrictCursor();var i=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+this._bufferService.buffer.y);return i&&(i.insertCells(this._bufferService.buffer.x,t.params[0]||1,this._bufferService.buffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._bufferService.buffer.y)),!0},i.prototype.deleteChars=function(t){this._restrictCursor();var i=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+this._bufferService.buffer.y);return i&&(i.deleteCells(this._bufferService.buffer.x,t.params[0]||1,this._bufferService.buffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._bufferService.buffer.y)),!0},i.prototype.scrollUp=function(t){for(var i=t.params[0]||1,n=this._bufferService.buffer;i--;)n.lines.splice(n.ybase+n.scrollTop,1),n.lines.splice(n.ybase+n.scrollBottom,0,n.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(n.scrollTop,n.scrollBottom),!0},i.prototype.scrollDown=function(t){for(var i=t.params[0]||1,n=this._bufferService.buffer;i--;)n.lines.splice(n.ybase+n.scrollBottom,1),n.lines.splice(n.ybase+n.scrollTop,0,n.getBlankLine(l.DEFAULT_ATTR_DATA));return this._dirtyRowService.markRangeDirty(n.scrollTop,n.scrollBottom),!0},i.prototype.scrollLeft=function(t){var i=this._bufferService.buffer;if(i.y>i.scrollBottom||i.y<i.scrollTop)return!0;for(var n=t.params[0]||1,s=i.scrollTop;s<=i.scrollBottom;++s){var e=i.lines.get(i.ybase+s);e.deleteCells(0,n,i.getNullCell(this._eraseAttrData()),this._eraseAttrData()),e.isWrapped=!1}return this._dirtyRowService.markRangeDirty(i.scrollTop,i.scrollBottom),!0},i.prototype.scrollRight=function(t){var i=this._bufferService.buffer;if(i.y>i.scrollBottom||i.y<i.scrollTop)return!0;for(var n=t.params[0]||1,s=i.scrollTop;s<=i.scrollBottom;++s){var e=i.lines.get(i.ybase+s);e.insertCells(0,n,i.getNullCell(this._eraseAttrData()),this._eraseAttrData()),e.isWrapped=!1}return this._dirtyRowService.markRangeDirty(i.scrollTop,i.scrollBottom),!0},i.prototype.insertColumns=function(t){var i=this._bufferService.buffer;if(i.y>i.scrollBottom||i.y<i.scrollTop)return!0;for(var n=t.params[0]||1,s=i.scrollTop;s<=i.scrollBottom;++s){var e=this._bufferService.buffer.lines.get(i.ybase+s);e.insertCells(i.x,n,i.getNullCell(this._eraseAttrData()),this._eraseAttrData()),e.isWrapped=!1}return this._dirtyRowService.markRangeDirty(i.scrollTop,i.scrollBottom),!0},i.prototype.deleteColumns=function(t){var i=this._bufferService.buffer;if(i.y>i.scrollBottom||i.y<i.scrollTop)return!0;for(var n=t.params[0]||1,s=i.scrollTop;s<=i.scrollBottom;++s){var e=i.lines.get(i.ybase+s);e.deleteCells(i.x,n,i.getNullCell(this._eraseAttrData()),this._eraseAttrData()),e.isWrapped=!1}return this._dirtyRowService.markRangeDirty(i.scrollTop,i.scrollBottom),!0},i.prototype.eraseChars=function(t){this._restrictCursor();var i=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+this._bufferService.buffer.y);return i&&(i.replaceCells(this._bufferService.buffer.x,this._bufferService.buffer.x+(t.params[0]||1),this._bufferService.buffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._bufferService.buffer.y)),!0},i.prototype.repeatPrecedingCharacter=function(t){if(!this._parser.precedingCodepoint)return!0;for(var i=t.params[0]||1,n=new Uint32Array(i),s=0;s<i;++s)n[s]=this._parser.precedingCodepoint;return this.print(n,0,n.length),!0},i.prototype.sendDeviceAttributesPrimary=function(t){return t.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(h.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(h.C0.ESC+"[?6c")),!0},i.prototype.sendDeviceAttributesSecondary=function(t){return t.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(h.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(h.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(t.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(h.C0.ESC+"[>83;40003;0c")),!0},i.prototype._is=function(t){return 0===(this._optionsService.options.termName+"").indexOf(t)},i.prototype.setMode=function(t){for(var i=0;i<t.length;i++)switch(t.params[i]){case 4:this._coreService.modes.insertMode=!0}return!0},i.prototype.setModePrivate=function(t){for(var i=0;i<t.length;i++)switch(t.params[i]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,o.DEFAULT_CHARSET),this._charsetService.setgCharset(1,o.DEFAULT_CHARSET),this._charsetService.setgCharset(2,o.DEFAULT_CHARSET),this._charsetService.setgCharset(3,o.DEFAULT_CHARSET);break;case 3:this._optionsService.options.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0;break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0},i.prototype.resetMode=function(t){for(var i=0;i<t.length;i++)switch(t.params[i]){case 4:this._coreService.modes.insertMode=!1}return!0},i.prototype.resetModePrivate=function(t){for(var i=0;i<t.length;i++)switch(t.params[i]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.options.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),1049===t.params[i]&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0},i.prototype._updateAttrColor=function(t,i,n,s,e){return 2===i?(t|=50331648,t&=-16777216,t|=w.AttributeData.fromColorRGB([n,s,e])):5===i&&(t&=-50331904,t|=33554432|255&n),t},i.prototype._extractColor=function(t,i,n){var s=[0,0,-1,0,0,0],e=0,r=0;do{if(s[r+e]=t.params[i+r],t.hasSubParams(i+r)){var h=t.getSubParams(i+r),o=0;do{5===s[1]&&(e=1),s[r+o+1+e]=h[o]}while(++o<h.length&&o+r+1+e<s.length);break}if(5===s[1]&&r+e>=2||2===s[1]&&r+e>=5)break;s[1]&&(e=1)}while(++r+i<t.length&&r+e<s.length);for(o=2;o<s.length;++o)-1===s[o]&&(s[o]=0);switch(s[0]){case 38:n.fg=this._updateAttrColor(n.fg,s[1],s[3],s[4],s[5]);break;case 48:n.bg=this._updateAttrColor(n.bg,s[1],s[3],s[4],s[5]);break;case 58:n.extended=n.extended.clone(),n.extended.underlineColor=this._updateAttrColor(n.extended.underlineColor,s[1],s[3],s[4],s[5])}return r},i.prototype._processUnderline=function(t,i){i.extended=i.extended.clone(),(!~t||t>5)&&(t=1),i.extended.underlineStyle=t,i.fg|=268435456,0===t&&(i.fg&=-268435457),i.updateExtended()},i.prototype.charAttributes=function(t){if(1===t.length&&0===t.params[0])return this._curAttrData.fg=l.DEFAULT_ATTR_DATA.fg,this._curAttrData.bg=l.DEFAULT_ATTR_DATA.bg,!0;for(var i,n=t.length,s=this._curAttrData,e=0;e<n;e++)(i=t.params[e])>=30&&i<=37?(s.fg&=-50331904,s.fg|=16777216|i-30):i>=40&&i<=47?(s.bg&=-50331904,s.bg|=16777216|i-40):i>=90&&i<=97?(s.fg&=-50331904,s.fg|=16777224|i-90):i>=100&&i<=107?(s.bg&=-50331904,s.bg|=16777224|i-100):0===i?(s.fg=l.DEFAULT_ATTR_DATA.fg,s.bg=l.DEFAULT_ATTR_DATA.bg):1===i?s.fg|=134217728:3===i?s.bg|=67108864:4===i?(s.fg|=268435456,this._processUnderline(t.hasSubParams(e)?t.getSubParams(e)[0]:1,s)):5===i?s.fg|=536870912:7===i?s.fg|=67108864:8===i?s.fg|=1073741824:2===i?s.bg|=134217728:21===i?this._processUnderline(2,s):22===i?(s.fg&=-134217729,s.bg&=-134217729):23===i?s.bg&=-67108865:24===i?s.fg&=-268435457:25===i?s.fg&=-536870913:27===i?s.fg&=-67108865:28===i?s.fg&=-1073741825:39===i?(s.fg&=-67108864,s.fg|=16777215&l.DEFAULT_ATTR_DATA.fg):49===i?(s.bg&=-67108864,s.bg|=16777215&l.DEFAULT_ATTR_DATA.bg):38===i||48===i||58===i?e+=this._extractColor(t,e,s):59===i?(s.extended=s.extended.clone(),s.extended.underlineColor=-1,s.updateExtended()):100===i?(s.fg&=-67108864,s.fg|=16777215&l.DEFAULT_ATTR_DATA.fg,s.bg&=-67108864,s.bg|=16777215&l.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",i);return!0},i.prototype.deviceStatus=function(t){switch(t.params[0]){case 5:this._coreService.triggerDataEvent(h.C0.ESC+"[0n");break;case 6:this._coreService.triggerDataEvent(h.C0.ESC+"["+(this._bufferService.buffer.y+1)+";"+(this._bufferService.buffer.x+1)+"R")}return!0},i.prototype.deviceStatusPrivate=function(t){switch(t.params[0]){case 6:this._coreService.triggerDataEvent(h.C0.ESC+"[?"+(this._bufferService.buffer.y+1)+";"+(this._bufferService.buffer.x+1)+"R")}return!0},i.prototype.softReset=function(){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._bufferService.buffer.scrollTop=0,this._bufferService.buffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._bufferService.buffer.savedX=0,this._bufferService.buffer.savedY=this._bufferService.buffer.ybase,this._bufferService.buffer.savedCurAttrData.fg=this._curAttrData.fg,this._bufferService.buffer.savedCurAttrData.bg=this._curAttrData.bg,this._bufferService.buffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0},i.prototype.setCursorStyle=function(t){var i=t.params[0]||1;switch(i){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}return this._optionsService.options.cursorBlink=i%2==1,!0},i.prototype.setScrollRegion=function(t){var i,n=t.params[0]||1;return(t.length<2||(i=t.params[1])>this._bufferService.rows||0===i)&&(i=this._bufferService.rows),i>n&&(this._bufferService.buffer.scrollTop=n-1,this._bufferService.buffer.scrollBottom=i-1,this._setCursor(0,0)),!0},i.prototype.windowOptions=function(t){if(!y(t.params[0],this._optionsService.options.windowOptions))return!0;var i=t.length>1?t.params[1]:0;switch(t.params[0]){case 14:2!==i&&this._onRequestWindowsOptionsReport.fire(r.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(r.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(h.C0.ESC+"[8;"+this._bufferService.rows+";"+this._bufferService.cols+"t");break;case 22:0!==i&&2!==i||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),0!==i&&1!==i||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:0!==i&&2!==i||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),0!==i&&1!==i||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0},i.prototype.saveCursor=function(){return this._bufferService.buffer.savedX=this._bufferService.buffer.x,this._bufferService.buffer.savedY=this._bufferService.buffer.ybase+this._bufferService.buffer.y,this._bufferService.buffer.savedCurAttrData.fg=this._curAttrData.fg,this._bufferService.buffer.savedCurAttrData.bg=this._curAttrData.bg,this._bufferService.buffer.savedCharset=this._charsetService.charset,!0},i.prototype.restoreCursor=function(){return this._bufferService.buffer.x=this._bufferService.buffer.savedX||0,this._bufferService.buffer.y=Math.max(this._bufferService.buffer.savedY-this._bufferService.buffer.ybase,0),this._curAttrData.fg=this._bufferService.buffer.savedCurAttrData.fg,this._curAttrData.bg=this._bufferService.buffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._bufferService.buffer.savedCharset&&(this._charsetService.charset=this._bufferService.buffer.savedCharset),this._restrictCursor(),!0},i.prototype.setTitle=function(t){return this._windowTitle=t,this._onTitleChange.fire(t),!0},i.prototype.setIconName=function(t){return this._iconName=t,!0},i.prototype._parseAnsiColorChange=function(t){for(var i,n={colors:[]},s=/(\d+);rgb:([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})/gi;null!==(i=s.exec(t));)n.colors.push({colorIndex:parseInt(i[1]),red:parseInt(i[2],16),green:parseInt(i[3],16),blue:parseInt(i[4],16)});return 0===n.colors.length?null:n},i.prototype.setAnsiColor=function(t){var i=this._parseAnsiColorChange(t);return i?this._onAnsiColorChange.fire(i):this._logService.warn("Expected format <num>;rgb:<rr>/<gg>/<bb> but got data: "+t),!0},i.prototype.nextLine=function(){return this._bufferService.buffer.x=0,this.index(),!0},i.prototype.keypadApplicationMode=function(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0},i.prototype.keypadNumericMode=function(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0},i.prototype.selectDefaultCharset=function(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,o.DEFAULT_CHARSET),!0},i.prototype.selectCharset=function(t){return 2!==t.length?(this.selectDefaultCharset(),!0):("/"===t[0]||this._charsetService.setgCharset(O[t[0]],o.CHARSETS[t[1]]||o.DEFAULT_CHARSET),!0)},i.prototype.index=function(){this._restrictCursor();var t=this._bufferService.buffer;return this._bufferService.buffer.y++,t.y===t.scrollBottom+1?(t.y--,this._bufferService.scroll(this._eraseAttrData())):t.y>=this._bufferService.rows&&(t.y=this._bufferService.rows-1),this._restrictCursor(),!0},i.prototype.tabSet=function(){return this._bufferService.buffer.tabs[this._bufferService.buffer.x]=!0,!0},i.prototype.reverseIndex=function(){this._restrictCursor();var t=this._bufferService.buffer;return t.y===t.scrollTop?(t.lines.shiftElements(t.ybase+t.y,t.scrollBottom-t.scrollTop,1),t.lines.set(t.ybase+t.y,t.getBlankLine(this._eraseAttrData())),this._dirtyRowService.markRangeDirty(t.scrollTop,t.scrollBottom)):(t.y--,this._restrictCursor()),!0},i.prototype.fullReset=function(){return this._parser.reset(),this._onRequestReset.fire(),!0},i.prototype.reset=function(){this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=l.DEFAULT_ATTR_DATA.clone()},i.prototype._eraseAttrData=function(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal},i.prototype.setgLevel=function(t){return this._charsetService.setgLevel(t),!0},i.prototype.screenAlignmentPattern=function(){var t=new b.CellData;t.content=1<<22|"E".charCodeAt(0),t.fg=this._curAttrData.fg,t.bg=this._curAttrData.bg;var i=this._bufferService.buffer;this._setCursor(0,0);for(var n=0;n<this._bufferService.rows;++n){var s=i.lines.get(i.ybase+i.y+n);s&&(s.fill(t),s.isWrapped=!1)}return this._dirtyRowService.markAllDirty(),this._setCursor(0,0),!0},i}(c.Disposable);i.InputHandler=k},844:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.Disposable=void 0;var n=function(){function t(){this._disposables=[],this._isDisposed=!1}return t.prototype.dispose=function(){this._isDisposed=!0;for(var t=0,i=this._disposables;t<i.length;t++)i[t].dispose();this._disposables.length=0},t.prototype.register=function(t){return this._disposables.push(t),t},t.prototype.unregister=function(t){var i=this._disposables.indexOf(t);-1!==i&&this._disposables.splice(i,1)},t}();function s(t){for(var i=0,n=t;i<n.length;i++)n[i].dispose();t.length=0}i.Disposable=n,i.disposeArray=s,i.getDisposeArrayDisposable=function(t){return{dispose:function(){return s(t)}}}},6114:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.isSafari=i.isFirefox=void 0;var n="undefined"==typeof navigator,s=n?"node":navigator.userAgent,e=n?"node":navigator.platform;i.isFirefox=s.includes("Firefox"),i.isSafari=/^((?!chrome|android).)*safari/i.test(s),i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(e),i.isIpad="iPad"===e,i.isIphone="iPhone"===e,i.isWindows=["Windows","Win16","Win32","WinCE"].includes(e),i.isLinux=e.indexOf("Linux")>=0},8273:(t,i)=>{function n(t,i,n,s){if(void 0===n&&(n=0),void 0===s&&(s=t.length),n>=t.length)return t;s=s>=t.length?t.length:(t.length+s)%t.length;for(var e=n=(t.length+n)%t.length;e<s;++e)t[e]=i;return t}Object.defineProperty(i,"__esModule",{value:!0}),i.concat=i.fillFallback=i.fill=void 0,i.fill=function(t,i,s,e){return t.fill?t.fill(i,s,e):n(t,i,s,e)},i.fillFallback=n,i.concat=function(t,i){var n=new t.constructor(t.length+i.length);return n.set(t),n.set(i,t.length),n}},9282:(t,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.updateWindowsModeWrappedState=void 0;var s=n(643);i.updateWindowsModeWrappedState=function(t){var i=t.buffer.lines.get(t.buffer.ybase+t.buffer.y-1),n=null==i?void 0:i.get(t.cols-1),e=t.buffer.lines.get(t.buffer.ybase+t.buffer.y);e&&n&&(e.isWrapped=n[s.CHAR_DATA_CODE_INDEX]!==s.NULL_CELL_CODE&&n[s.CHAR_DATA_CODE_INDEX]!==s.WHITESPACE_CELL_CODE)}},3734:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;var n=function(){function t(){this.fg=0,this.bg=0,this.extended=new s}return t.toColorRGB=function(t){return[t>>>16&255,t>>>8&255,255&t]},t.fromColorRGB=function(t){return(255&t[0])<<16|(255&t[1])<<8|255&t[2]},t.prototype.clone=function(){var i=new t;return i.fg=this.fg,i.bg=this.bg,i.extended=this.extended.clone(),i},t.prototype.isInverse=function(){return 67108864&this.fg},t.prototype.isBold=function(){return 134217728&this.fg},t.prototype.isUnderline=function(){return 268435456&this.fg},t.prototype.isBlink=function(){return 536870912&this.fg},t.prototype.isInvisible=function(){return 1073741824&this.fg},t.prototype.isItalic=function(){return 67108864&this.bg},t.prototype.isDim=function(){return 134217728&this.bg},t.prototype.getFgColorMode=function(){return 50331648&this.fg},t.prototype.getBgColorMode=function(){return 50331648&this.bg},t.prototype.isFgRGB=function(){return 50331648==(50331648&this.fg)},t.prototype.isBgRGB=function(){return 50331648==(50331648&this.bg)},t.prototype.isFgPalette=function(){return 16777216==(50331648&this.fg)||33554432==(50331648&this.fg)},t.prototype.isBgPalette=function(){return 16777216==(50331648&this.bg)||33554432==(50331648&this.bg)},t.prototype.isFgDefault=function(){return 0==(50331648&this.fg)},t.prototype.isBgDefault=function(){return 0==(50331648&this.bg)},t.prototype.isAttributeDefault=function(){return 0===this.fg&&0===this.bg},t.prototype.getFgColor=function(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}},t.prototype.getBgColor=function(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}},t.prototype.hasExtendedAttrs=function(){return 268435456&this.bg},t.prototype.updateExtended=function(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456},t.prototype.getUnderlineColor=function(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()},t.prototype.getUnderlineColorMode=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()},t.prototype.isUnderlineColorRGB=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648==(50331648&this.extended.underlineColor):this.isFgRGB()},t.prototype.isUnderlineColorPalette=function(){return 268435456&this.bg&&~this.extended.underlineColor?16777216==(50331648&this.extended.underlineColor)||33554432==(50331648&this.extended.underlineColor):this.isFgPalette()},t.prototype.isUnderlineColorDefault=function(){return 268435456&this.bg&&~this.extended.underlineColor?0==(50331648&this.extended.underlineColor):this.isFgDefault()},t.prototype.getUnderlineStyle=function(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0},t}();i.AttributeData=n;var s=function(){function t(t,i){void 0===t&&(t=0),void 0===i&&(i=-1),this.underlineStyle=t,this.underlineColor=i}return t.prototype.clone=function(){return new t(this.underlineStyle,this.underlineColor)},t.prototype.isEmpty=function(){return 0===this.underlineStyle},t}();i.ExtendedAttrs=s},9092:(t,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferStringIterator=i.Buffer=i.MAX_BUFFER_SIZE=void 0;var s=n(6349),e=n(8437),r=n(511),h=n(643),o=n(4634),u=n(4863),c=n(7116),f=n(3734);i.MAX_BUFFER_SIZE=4294967295;var a=function(){function t(t,i,n){this._hasScrollback=t,this._optionsService=i,this._bufferService=n,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.savedY=0,this.savedX=0,this.savedCurAttrData=e.DEFAULT_ATTR_DATA.clone(),this.savedCharset=c.DEFAULT_CHARSET,this.markers=[],this._nullCell=r.CellData.fromCharData([0,h.NULL_CELL_CHAR,h.NULL_CELL_WIDTH,h.NULL_CELL_CODE]),this._whitespaceCell=r.CellData.fromCharData([0,h.WHITESPACE_CELL_CHAR,h.WHITESPACE_CELL_WIDTH,h.WHITESPACE_CELL_CODE]),this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new s.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}return t.prototype.getNullCell=function(t){return t?(this._nullCell.fg=t.fg,this._nullCell.bg=t.bg,this._nullCell.extended=t.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new f.ExtendedAttrs),this._nullCell},t.prototype.getWhitespaceCell=function(t){return t?(this._whitespaceCell.fg=t.fg,this._whitespaceCell.bg=t.bg,this._whitespaceCell.extended=t.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new f.ExtendedAttrs),this._whitespaceCell},t.prototype.getBlankLine=function(t,i){return new e.BufferLine(this._bufferService.cols,this.getNullCell(t),i)},Object.defineProperty(t.prototype,"hasScrollback",{get:function(){return this._hasScrollback&&this.lines.maxLength>this._rows},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCursorInViewport",{get:function(){var t=this.ybase+this.y-this.ydisp;return t>=0&&t<this._rows},enumerable:!1,configurable:!0}),t.prototype._getCorrectBufferLength=function(t){if(!this._hasScrollback)return t;var n=t+this._optionsService.options.scrollback;return n>i.MAX_BUFFER_SIZE?i.MAX_BUFFER_SIZE:n},t.prototype.fillViewportRows=function(t){if(0===this.lines.length){void 0===t&&(t=e.DEFAULT_ATTR_DATA);for(var i=this._rows;i--;)this.lines.push(this.getBlankLine(t))}},t.prototype.clear=function(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new s.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()},t.prototype.resize=function(t,i){var n=this.getNullCell(e.DEFAULT_ATTR_DATA),s=this._getCorrectBufferLength(i);if(s>this.lines.maxLength&&(this.lines.maxLength=s),this.lines.length>0){if(this._cols<t)for(var r=0;r<this.lines.length;r++)this.lines.get(r).resize(t,n);var h=0;if(this._rows<i)for(var o=this._rows;o<i;o++)this.lines.length<i+this.ybase&&(this._optionsService.options.windowsMode?this.lines.push(new e.BufferLine(t,n)):this.ybase>0&&this.lines.length<=this.ybase+this.y+h+1?(this.ybase--,h++,this.ydisp>0&&this.ydisp--):this.lines.push(new e.BufferLine(t,n)));else for(o=this._rows;o>i;o--)this.lines.length>i+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(s<this.lines.maxLength){var u=this.lines.length-s;u>0&&(this.lines.trimStart(u),this.ybase=Math.max(this.ybase-u,0),this.ydisp=Math.max(this.ydisp-u,0),this.savedY=Math.max(this.savedY-u,0)),this.lines.maxLength=s}this.x=Math.min(this.x,t-1),this.y=Math.min(this.y,i-1),h&&(this.y+=h),this.savedX=Math.min(this.savedX,t-1),this.scrollTop=0}if(this.scrollBottom=i-1,this._isReflowEnabled&&(this._reflow(t,i),this._cols>t))for(r=0;r<this.lines.length;r++)this.lines.get(r).resize(t,n);this._cols=t,this._rows=i},Object.defineProperty(t.prototype,"_isReflowEnabled",{get:function(){return this._hasScrollback&&!this._optionsService.options.windowsMode},enumerable:!1,configurable:!0}),t.prototype._reflow=function(t,i){this._cols!==t&&(t>this._cols?this._reflowLarger(t,i):this._reflowSmaller(t,i))},t.prototype._reflowLarger=function(t,i){var n=o.reflowLargerGetLinesToRemove(this.lines,this._cols,t,this.ybase+this.y,this.getNullCell(e.DEFAULT_ATTR_DATA));if(n.length>0){var s=o.reflowLargerCreateNewLayout(this.lines,n);o.reflowLargerApplyNewLayout(this.lines,s.layout),this._reflowLargerAdjustViewport(t,i,s.countRemoved)}},t.prototype._reflowLargerAdjustViewport=function(t,i,n){for(var s=this.getNullCell(e.DEFAULT_ATTR_DATA),r=n;r-- >0;)0===this.ybase?(this.y>0&&this.y--,this.lines.length<i&&this.lines.push(new e.BufferLine(t,s))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-n,0)},t.prototype._reflowSmaller=function(t,i){for(var n=this.getNullCell(e.DEFAULT_ATTR_DATA),s=[],r=0,h=this.lines.length-1;h>=0;h--){var u=this.lines.get(h);if(!(!u||!u.isWrapped&&u.getTrimmedLength()<=t)){for(var c=[u];u.isWrapped&&h>0;)u=this.lines.get(--h),c.unshift(u);var f=this.ybase+this.y;if(!(f>=h&&f<h+c.length)){var a,l=c[c.length-1].getTrimmedLength(),v=o.reflowSmallerGetNewLineLengths(c,this._cols,t),d=v.length-c.length;a=0===this.ybase&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+d):Math.max(0,this.lines.length-this.lines.maxLength+d);for(var b=[],w=0;w<d;w++){var m=this.getBlankLine(e.DEFAULT_ATTR_DATA,!0);b.push(m)}b.length>0&&(s.push({start:h+c.length+r,newLines:b}),r+=b.length),c.push.apply(c,b);var g=v.length-1,p=v[g];0===p&&(p=v[--g]);for(var O=c.length-d-1,j=l;O>=0;){var y=Math.min(j,p);if(c[g].copyCellsFrom(c[O],j-y,p-y,y,!0),0==(p-=y)&&(p=v[--g]),0==(j-=y)){O--;var _=Math.max(O,0);j=o.getWrappedLineTrimmedLength(c,_,this._cols)}}for(w=0;w<c.length;w++)v[w]<t&&c[w].setCell(v[w],n);for(var k=d-a;k-- >0;)0===this.ybase?this.y<i-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+r)-i&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+d,this.ybase+i-1)}}}if(s.length>0){var M=[],x=[];for(w=0;w<this.lines.length;w++)x.push(this.lines.get(w));var q=this.lines.length,S=q-1,A=0,C=s[A];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+r);var R=0;for(w=Math.min(this.lines.maxLength-1,q+r-1);w>=0;w--)if(C&&C.start>S+R){for(var E=C.newLines.length-1;E>=0;E--)this.lines.set(w--,C.newLines[E]);w++,M.push({index:S+1,amount:C.newLines.length}),R+=C.newLines.length,C=s[++A]}else this.lines.set(w,x[S--]);var T=0;for(w=M.length-1;w>=0;w--)M[w].index+=T,this.lines.onInsertEmitter.fire(M[w]),T+=M[w].amount;var U=Math.max(0,q+r-this.lines.maxLength);U>0&&this.lines.onTrimEmitter.fire(U)}},t.prototype.stringIndexToBufferIndex=function(t,i,n){for(void 0===n&&(n=!1);i;){var s=this.lines.get(t);if(!s)return[-1,-1];for(var e=n?s.getTrimmedLength():s.length,r=0;r<e;++r)if(s.get(r)[h.CHAR_DATA_WIDTH_INDEX]&&(i-=s.get(r)[h.CHAR_DATA_CHAR_INDEX].length||1),i<0)return[t,r];t++}return[t,0]},t.prototype.translateBufferLineToString=function(t,i,n,s){void 0===n&&(n=0);var e=this.lines.get(t);return e?e.translateToString(i,n,s):""},t.prototype.getWrappedRangeForLine=function(t){for(var i=t,n=t;i>0&&this.lines.get(i).isWrapped;)i--;for(;n+1<this.lines.length&&this.lines.get(n+1).isWrapped;)n++;return{first:i,last:n}},t.prototype.setupTabStops=function(t){for(null!=t?this.tabs[t]||(t=this.prevStop(t)):(this.tabs={},t=0);t<this._cols;t+=this._optionsService.options.tabStopWidth)this.tabs[t]=!0},t.prototype.prevStop=function(t){for(null==t&&(t=this.x);!this.tabs[--t]&&t>0;);return t>=this._cols?this._cols-1:t<0?0:t},t.prototype.nextStop=function(t){for(null==t&&(t=this.x);!this.tabs[++t]&&t<this._cols;);return t>=this._cols?this._cols-1:t<0?0:t},t.prototype.addMarker=function(t){var i=this,n=new u.Marker(t);return this.markers.push(n),n.register(this.lines.onTrim((function(t){n.line-=t,n.line<0&&n.dispose()}))),n.register(this.lines.onInsert((function(t){n.line>=t.index&&(n.line+=t.amount)}))),n.register(this.lines.onDelete((function(t){n.line>=t.index&&n.line<t.index+t.amount&&n.dispose(),n.line>t.index&&(n.line-=t.amount)}))),n.register(n.onDispose((function(){return i._removeMarker(n)}))),n},t.prototype._removeMarker=function(t){this.markers.splice(this.markers.indexOf(t),1)},t.prototype.iterator=function(t,i,n,s,e){return new l(this,t,i,n,s,e)},t}();i.Buffer=a;var l=function(){function t(t,i,n,s,e,r){void 0===n&&(n=0),void 0===s&&(s=t.lines.length),void 0===e&&(e=0),void 0===r&&(r=0),this._buffer=t,this._trimRight=i,this._startIndex=n,this._endIndex=s,this._startOverscan=e,this._endOverscan=r,this._startIndex<0&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}return t.prototype.hasNext=function(){return this._current<this._endIndex},t.prototype.next=function(){var t=this._buffer.getWrappedRangeForLine(this._current);t.first<this._startIndex-this._startOverscan&&(t.first=this._startIndex-this._startOverscan),t.last>this._endIndex+this._endOverscan&&(t.last=this._endIndex+this._endOverscan),t.first=Math.max(t.first,0),t.last=Math.min(t.last,this._buffer.lines.length);for(var i="",n=t.first;n<=t.last;++n)i+=this._buffer.translateBufferLineToString(n,this._trimRight);return this._current=t.last+1,{range:t,content:i}},t}();i.BufferStringIterator=l},8437:(t,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLine=i.DEFAULT_ATTR_DATA=void 0;var s=n(482),e=n(643),r=n(511),h=n(3734);i.DEFAULT_ATTR_DATA=Object.freeze(new h.AttributeData);var o=function(){function t(t,i,n){void 0===n&&(n=!1),this.isWrapped=n,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*t);for(var s=i||r.CellData.fromCharData([0,e.NULL_CELL_CHAR,e.NULL_CELL_WIDTH,e.NULL_CELL_CODE]),h=0;h<t;++h)this.setCell(h,s);this.length=t}return t.prototype.get=function(t){var i=this._data[3*t+0],n=2097151&i;return[this._data[3*t+1],2097152&i?this._combined[t]:n?s.stringFromCodePoint(n):"",i>>22,2097152&i?this._combined[t].charCodeAt(this._combined[t].length-1):n]},t.prototype.set=function(t,i){this._data[3*t+1]=i[e.CHAR_DATA_ATTR_INDEX],i[e.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[t]=i[1],this._data[3*t+0]=2097152|t|i[e.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*t+0]=i[e.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|i[e.CHAR_DATA_WIDTH_INDEX]<<22},t.prototype.getWidth=function(t){return this._data[3*t+0]>>22},t.prototype.hasWidth=function(t){return 12582912&this._data[3*t+0]},t.prototype.getFg=function(t){return this._data[3*t+1]},t.prototype.getBg=function(t){return this._data[3*t+2]},t.prototype.hasContent=function(t){return 4194303&this._data[3*t+0]},t.prototype.getCodePoint=function(t){var i=this._data[3*t+0];return 2097152&i?this._combined[t].charCodeAt(this._combined[t].length-1):2097151&i},t.prototype.isCombined=function(t){return 2097152&this._data[3*t+0]},t.prototype.getString=function(t){var i=this._data[3*t+0];return 2097152&i?this._combined[t]:2097151&i?s.stringFromCodePoint(2097151&i):""},t.prototype.loadCell=function(t,i){var n=3*t;return i.content=this._data[n+0],i.fg=this._data[n+1],i.bg=this._data[n+2],2097152&i.content&&(i.combinedData=this._combined[t]),268435456&i.bg&&(i.extended=this._extendedAttrs[t]),i},t.prototype.setCell=function(t,i){2097152&i.content&&(this._combined[t]=i.combinedData),268435456&i.bg&&(this._extendedAttrs[t]=i.extended),this._data[3*t+0]=i.content,this._data[3*t+1]=i.fg,this._data[3*t+2]=i.bg},t.prototype.setCellFromCodePoint=function(t,i,n,s,e,r){268435456&e&&(this._extendedAttrs[t]=r),this._data[3*t+0]=i|n<<22,this._data[3*t+1]=s,this._data[3*t+2]=e},t.prototype.addCodepointToCell=function(t,i){var n=this._data[3*t+0];2097152&n?this._combined[t]+=s.stringFromCodePoint(i):(2097151&n?(this._combined[t]=s.stringFromCodePoint(2097151&n)+s.stringFromCodePoint(i),n&=-2097152,n|=2097152):n=i|1<<22,this._data[3*t+0]=n)},t.prototype.insertCells=function(t,i,n,s){if((t%=this.length)&&2===this.getWidth(t-1)&&this.setCellFromCodePoint(t-1,0,1,(null==s?void 0:s.fg)||0,(null==s?void 0:s.bg)||0,(null==s?void 0:s.extended)||new h.ExtendedAttrs),i<this.length-t){for(var e=new r.CellData,o=this.length-t-i-1;o>=0;--o)this.setCell(t+i+o,this.loadCell(t+o,e));for(o=0;o<i;++o)this.setCell(t+o,n)}else for(o=t;o<this.length;++o)this.setCell(o,n);2===this.getWidth(this.length-1)&&this.setCellFromCodePoint(this.length-1,0,1,(null==s?void 0:s.fg)||0,(null==s?void 0:s.bg)||0,(null==s?void 0:s.extended)||new h.ExtendedAttrs)},t.prototype.deleteCells=function(t,i,n,s){if(i<this.length-(t%=this.length)){for(var e=new r.CellData,o=0;o<this.length-t-i;++o)this.setCell(t+o,this.loadCell(t+i+o,e));for(o=this.length-i;o<this.length;++o)this.setCell(o,n)}else for(o=t;o<this.length;++o)this.setCell(o,n);t&&2===this.getWidth(t-1)&&this.setCellFromCodePoint(t-1,0,1,(null==s?void 0:s.fg)||0,(null==s?void 0:s.bg)||0,(null==s?void 0:s.extended)||new h.ExtendedAttrs),0!==this.getWidth(t)||this.hasContent(t)||this.setCellFromCodePoint(t,0,1,(null==s?void 0:s.fg)||0,(null==s?void 0:s.bg)||0,(null==s?void 0:s.extended)||new h.ExtendedAttrs)},t.prototype.replaceCells=function(t,i,n,s){for(t&&2===this.getWidth(t-1)&&this.setCellFromCodePoint(t-1,0,1,(null==s?void 0:s.fg)||0,(null==s?void 0:s.bg)||0,(null==s?void 0:s.extended)||new h.ExtendedAttrs),i<this.length&&2===this.getWidth(i-1)&&this.setCellFromCodePoint(i,0,1,(null==s?void 0:s.fg)||0,(null==s?void 0:s.bg)||0,(null==s?void 0:s.extended)||new h.ExtendedAttrs);t<i&&t<this.length;)this.setCell(t++,n)},t.prototype.resize=function(t,i){if(t!==this.length){if(t>this.length){var n=new Uint32Array(3*t);this.length&&n.set(3*t<this._data.length?this._data.subarray(0,3*t):this._data),this._data=n;for(var s=this.length;s<t;++s)this.setCell(s,i)}else if(t){(n=new Uint32Array(3*t)).set(this._data.subarray(0,3*t)),this._data=n;var e=Object.keys(this._combined);for(s=0;s<e.length;s++){var r=parseInt(e[s],10);r>=t&&delete this._combined[r]}}else this._data=new Uint32Array(0),this._combined={};this.length=t}},t.prototype.fill=function(t){this._combined={},this._extendedAttrs={};for(var i=0;i<this.length;++i)this.setCell(i,t)},t.prototype.copyFrom=function(t){for(var i in this.length!==t.length?this._data=new Uint32Array(t._data):this._data.set(t._data),this.length=t.length,this._combined={},t._combined)this._combined[i]=t._combined[i];for(var i in this._extendedAttrs={},t._extendedAttrs)this._extendedAttrs[i]=t._extendedAttrs[i];this.isWrapped=t.isWrapped},t.prototype.clone=function(){var i=new t(0);for(var n in i._data=new Uint32Array(this._data),i.length=this.length,this._combined)i._combined[n]=this._combined[n];for(var n in this._extendedAttrs)i._extendedAttrs[n]=this._extendedAttrs[n];return i.isWrapped=this.isWrapped,i},t.prototype.getTrimmedLength=function(){for(var t=this.length-1;t>=0;--t)if(4194303&this._data[3*t+0])return t+(this._data[3*t+0]>>22);return 0},t.prototype.copyCellsFrom=function(t,i,n,s,e){var r=t._data;if(e)for(var h=s-1;h>=0;h--)for(var o=0;o<3;o++)this._data[3*(n+h)+o]=r[3*(i+h)+o];else for(h=0;h<s;h++)for(o=0;o<3;o++)this._data[3*(n+h)+o]=r[3*(i+h)+o];var u=Object.keys(t._combined);for(o=0;o<u.length;o++){var c=parseInt(u[o],10);c>=i&&(this._combined[c-i+n]=t._combined[c])}},t.prototype.translateToString=function(t,i,n){void 0===t&&(t=!1),void 0===i&&(i=0),void 0===n&&(n=this.length),t&&(n=Math.min(n,this.getTrimmedLength()));for(var r="";i<n;){var h=this._data[3*i+0],o=2097151&h;r+=2097152&h?this._combined[i]:o?s.stringFromCodePoint(o):e.WHITESPACE_CELL_CHAR,i+=h>>22||1}return r},t}();i.BufferLine=o},4841:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getRangeLength=void 0,i.getRangeLength=function(t,i){if(t.start.y>t.end.y)throw new Error("Buffer range end ("+t.end.x+", "+t.end.y+") cannot be before start ("+t.start.x+", "+t.start.y+")");return i*(t.end.y-t.start.y)+(t.end.x-t.start.x+1)}},4634:(t,i)=>{function n(t,i,n){if(i===t.length-1)return t[i].getTrimmedLength();var s=!t[i].hasContent(n-1)&&1===t[i].getWidth(n-1),e=2===t[i+1].getWidth(0);return s&&e?n-1:n}Object.defineProperty(i,"__esModule",{value:!0}),i.getWrappedLineTrimmedLength=i.reflowSmallerGetNewLineLengths=i.reflowLargerApplyNewLayout=i.reflowLargerCreateNewLayout=i.reflowLargerGetLinesToRemove=void 0,i.reflowLargerGetLinesToRemove=function(t,i,s,e,r){for(var h=[],o=0;o<t.length-1;o++){var u=o,c=t.get(++u);if(c.isWrapped){for(var f=[t.get(o)];u<t.length&&c.isWrapped;)f.push(c),c=t.get(++u);if(e>=o&&e<u)o+=f.length-1;else{for(var a=0,l=n(f,a,i),v=1,d=0;v<f.length;){var b=n(f,v,i),w=Math.min(b-d,s-l);f[a].copyCellsFrom(f[v],d,l,w,!1),(l+=w)===s&&(a++,l=0),(d+=w)===b&&(v++,d=0),0===l&&0!==a&&2===f[a-1].getWidth(s-1)&&(f[a].copyCellsFrom(f[a-1],s-1,l++,1,!1),f[a-1].setCell(s-1,r))}f[a].replaceCells(l,s,r);for(var m=0,g=f.length-1;g>0&&(g>a||0===f[g].getTrimmedLength());g--)m++;m>0&&(h.push(o+f.length-m),h.push(m)),o+=f.length-1}}}return h},i.reflowLargerCreateNewLayout=function(t,i){for(var n=[],s=0,e=i[s],r=0,h=0;h<t.length;h++)if(e===h){var o=i[++s];t.onDeleteEmitter.fire({index:h-r,amount:o}),h+=o-1,r+=o,e=i[++s]}else n.push(h);return{layout:n,countRemoved:r}},i.reflowLargerApplyNewLayout=function(t,i){for(var n=[],s=0;s<i.length;s++)n.push(t.get(i[s]));for(s=0;s<n.length;s++)t.set(s,n[s]);t.length=i.length},i.reflowSmallerGetNewLineLengths=function(t,i,s){for(var e=[],r=t.map((function(s,e){return n(t,e,i)})).reduce((function(t,i){return t+i})),h=0,o=0,u=0;u<r;){if(r-u<s){e.push(r-u);break}h+=s;var c=n(t,o,i);h>c&&(h-=c,o++);var f=2===t[o].getWidth(h-1);f&&h--;var a=f?s-1:s;e.push(a),u+=a}return e},i.getWrappedLineTrimmedLength=n},5295:function(t,i,n){var s,e=this&&this.__extends||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"__esModule",{value:!0}),i.BufferSet=void 0;var r=n(9092),h=n(8460),o=function(t){function i(i,n){var s=t.call(this)||this;return s._optionsService=i,s._bufferService=n,s._onBufferActivate=s.register(new h.EventEmitter),s.reset(),s}return e(i,t),Object.defineProperty(i.prototype,"onBufferActivate",{get:function(){return this._onBufferActivate.event},enumerable:!1,configurable:!0}),i.prototype.reset=function(){this._normal=new r.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new r.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this.setupTabStops()},Object.defineProperty(i.prototype,"alt",{get:function(){return this._alt},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"active",{get:function(){return this._activeBuffer},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"normal",{get:function(){return this._normal},enumerable:!1,configurable:!0}),i.prototype.activateNormalBuffer=function(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))},i.prototype.activateAltBuffer=function(t){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(t),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))},i.prototype.resize=function(t,i){this._normal.resize(t,i),this._alt.resize(t,i)},i.prototype.setupTabStops=function(t){this._normal.setupTabStops(t),this._alt.setupTabStops(t)},i}(n(844).Disposable);i.BufferSet=o},511:function(t,i,n){var s,e=this&&this.__extends||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;var r=n(482),h=n(643),o=n(3734),u=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.content=0,i.fg=0,i.bg=0,i.extended=new o.ExtendedAttrs,i.combinedData="",i}return e(i,t),i.fromCharData=function(t){var n=new i;return n.setFromCharData(t),n},i.prototype.isCombined=function(){return 2097152&this.content},i.prototype.getWidth=function(){return this.content>>22},i.prototype.getChars=function(){return 2097152&this.content?this.combinedData:2097151&this.content?r.stringFromCodePoint(2097151&this.content):""},i.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content},i.prototype.setFromCharData=function(t){this.fg=t[h.CHAR_DATA_ATTR_INDEX],this.bg=0;var i=!1;if(t[h.CHAR_DATA_CHAR_INDEX].length>2)i=!0;else if(2===t[h.CHAR_DATA_CHAR_INDEX].length){var n=t[h.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=n&&n<=56319){var s=t[h.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=s&&s<=57343?this.content=1024*(n-55296)+s-56320+65536|t[h.CHAR_DATA_WIDTH_INDEX]<<22:i=!0}else i=!0}else this.content=t[h.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|t[h.CHAR_DATA_WIDTH_INDEX]<<22;i&&(this.combinedData=t[h.CHAR_DATA_CHAR_INDEX],this.content=2097152|t[h.CHAR_DATA_WIDTH_INDEX]<<22)},i.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},i}(o.AttributeData);i.CellData=u},643:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=256,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},4863:function(t,i,n){var s,e=this&&this.__extends||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"__esModule",{value:!0}),i.Marker=void 0;var r=n(8460),h=function(t){function i(n){var s=t.call(this)||this;return s.line=n,s._id=i._nextId++,s.isDisposed=!1,s._onDispose=new r.EventEmitter,s}return e(i,t),Object.defineProperty(i.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!1,configurable:!0}),i.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),t.prototype.dispose.call(this))},i._nextId=1,i}(n(844).Disposable);i.Marker=h},7116:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DEFAULT_CHARSET=i.CHARSETS=void 0,i.CHARSETS={},i.DEFAULT_CHARSET=i.CHARSETS.B,i.CHARSETS[0]={"`":"â",a:"â",b:"â",c:"â",d:"â",e:"â",f:"Â°",g:"Â±",h:"â¤",i:"â",j:"â",k:"â",l:"â",m:"â",n:"â¼",o:"âº",p:"â»",q:"â",r:"â¼",s:"â½",t:"â",u:"â¤",v:"â´",w:"â¬",x:"â",y:"â¤",z:"â¥","{":"Ï","|":"â ","}":"Â£","~":"Â·"},i.CHARSETS.A={"#":"Â£"},i.CHARSETS.B=void 0,i.CHARSETS[4]={"#":"Â£","@":"Â¾","[":"ij","\\":"Â½","]":"|","{":"Â¨","|":"f","}":"Â¼","~":"Â´"},i.CHARSETS.C=i.CHARSETS[5]={"[":"Ã","\\":"Ã","]":"Ã","^":"Ã","`":"Ã©","{":"Ã¤","|":"Ã¶","}":"Ã¥","~":"Ã¼"},i.CHARSETS.R={"#":"Â£","@":"Ã ","[":"Â°","\\":"Ã§","]":"Â§","{":"Ã©","|":"Ã¹","}":"Ã¨","~":"Â¨"},i.CHARSETS.Q={"@":"Ã ","[":"Ã¢","\\":"Ã§","]":"Ãª","^":"Ã®","`":"Ã´","{":"Ã©","|":"Ã¹","}":"Ã¨","~":"Ã»"},i.CHARSETS.K={"@":"Â§","[":"Ã","\\":"Ã","]":"Ã","{":"Ã¤","|":"Ã¶","}":"Ã¼","~":"Ã"},i.CHARSETS.Y={"#":"Â£","@":"Â§","[":"Â°","\\":"Ã§","]":"Ã©","`":"Ã¹","{":"Ã ","|":"Ã²","}":"Ã¨","~":"Ã¬"},i.CHARSETS.E=i.CHARSETS[6]={"@":"Ã","[":"Ã","\\":"Ã","]":"Ã","^":"Ã","`":"Ã¤","{":"Ã¦","|":"Ã¸","}":"Ã¥","~":"Ã¼"},i.CHARSETS.Z={"#":"Â£","@":"Â§","[":"Â¡","\\":"Ã","]":"Â¿","{":"Â°","|":"Ã±","}":"Ã§"},i.CHARSETS.H=i.CHARSETS[7]={"@":"Ã","[":"Ã","\\":"Ã","]":"Ã","^":"Ã","`":"Ã©","{":"Ã¤","|":"Ã¶","}":"Ã¥","~":"Ã¼"},i.CHARSETS["="]={"#":"Ã¹","@":"Ã ","[":"Ã©","\\":"Ã§","]":"Ãª","^":"Ã®",_:"Ã¨","`":"Ã´","{":"Ã¤","|":"Ã¶","}":"Ã¼","~":"Ã»"}},2584:(t,i)=>{var n,s;Object.defineProperty(i,"__esModule",{value:!0}),i.C1=i.C0=void 0,(s=i.C0||(i.C0={})).NUL="\0",s.SOH="",s.STX="",s.ETX="",s.EOT="",s.ENQ="",s.ACK="",s.BEL="",s.BS="\b",s.HT="\t",s.LF="\n",s.VT="\v",s.FF="\f",s.CR="\r",s.SO="",s.SI="",s.DLE="",s.DC1="",s.DC2="",s.DC3="",s.DC4="",s.NAK="",s.SYN="",s.ETB="",s.CAN="",s.EM="",s.SUB="",s.ESC="",s.FS="",s.GS="",s.RS="",s.US="",s.SP=" ",s.DEL="",(n=i.C1||(i.C1={})).PAD="Â",n.HOP="Â",n.BPH="Â",n.NBH="Â",n.IND="Â",n.NEL="Â",n.SSA="Â",n.ESA="Â",n.HTS="Â",n.HTJ="Â",n.VTS="Â",n.PLD="Â",n.PLU="Â",n.RI="Â",n.SS2="Â",n.SS3="Â",n.DCS="Â",n.PU1="Â",n.PU2="Â",n.STS="Â",n.CCH="Â",n.MW="Â",n.SPA="Â",n.EPA="Â",n.SOS="Â",n.SGCI="Â",n.SCI="Â",n.CSI="Â",n.ST="Â",n.OSC="Â",n.PM="Â",n.APC="Â"},7399:(t,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.evaluateKeyboardEvent=void 0;var s=n(2584),e={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};i.evaluateKeyboardEvent=function(t,i,n,r){var h={type:0,cancel:!1,key:void 0},o=(t.shiftKey?1:0)|(t.altKey?2:0)|(t.ctrlKey?4:0)|(t.metaKey?8:0);switch(t.keyCode){case 0:"UIKeyInputUpArrow"===t.key?h.key=i?s.C0.ESC+"OA":s.C0.ESC+"[A":"UIKeyInputLeftArrow"===t.key?h.key=i?s.C0.ESC+"OD":s.C0.ESC+"[D":"UIKeyInputRightArrow"===t.key?h.key=i?s.C0.ESC+"OC":s.C0.ESC+"[C":"UIKeyInputDownArrow"===t.key&&(h.key=i?s.C0.ESC+"OB":s.C0.ESC+"[B");break;case 8:if(t.shiftKey){h.key=s.C0.BS;break}if(t.altKey){h.key=s.C0.ESC+s.C0.DEL;break}h.key=s.C0.DEL;break;case 9:if(t.shiftKey){h.key=s.C0.ESC+"[Z";break}h.key=s.C0.HT,h.cancel=!0;break;case 13:h.key=t.altKey?s.C0.ESC+s.C0.CR:s.C0.CR,h.cancel=!0;break;case 27:h.key=s.C0.ESC,t.altKey&&(h.key=s.C0.ESC+s.C0.ESC),h.cancel=!0;break;case 37:if(t.metaKey)break;o?(h.key=s.C0.ESC+"[1;"+(o+1)+"D",h.key===s.C0.ESC+"[1;3D"&&(h.key=s.C0.ESC+(n?"b":"[1;5D"))):h.key=i?s.C0.ESC+"OD":s.C0.ESC+"[D";break;case 39:if(t.metaKey)break;o?(h.key=s.C0.ESC+"[1;"+(o+1)+"C",h.key===s.C0.ESC+"[1;3C"&&(h.key=s.C0.ESC+(n?"f":"[1;5C"))):h.key=i?s.C0.ESC+"OC":s.C0.ESC+"[C";break;case 38:if(t.metaKey)break;o?(h.key=s.C0.ESC+"[1;"+(o+1)+"A",n||h.key!==s.C0.ESC+"[1;3A"||(h.key=s.C0.ESC+"[1;5A")):h.key=i?s.C0.ESC+"OA":s.C0.ESC+"[A";break;case 40:if(t.metaKey)break;o?(h.key=s.C0.ESC+"[1;"+(o+1)+"B",n||h.key!==s.C0.ESC+"[1;3B"||(h.key=s.C0.ESC+"[1;5B")):h.key=i?s.C0.ESC+"OB":s.C0.ESC+"[B";break;case 45:t.shiftKey||t.ctrlKey||(h.key=s.C0.ESC+"[2~");break;case 46:h.key=o?s.C0.ESC+"[3;"+(o+1)+"~":s.C0.ESC+"[3~";break;case 36:h.key=o?s.C0.ESC+"[1;"+(o+1)+"H":i?s.C0.ESC+"OH":s.C0.ESC+"[H";break;case 35:h.key=o?s.C0.ESC+"[1;"+(o+1)+"F":i?s.C0.ESC+"OF":s.C0.ESC+"[F";break;case 33:t.shiftKey?h.type=2:h.key=s.C0.ESC+"[5~";break;case 34:t.shiftKey?h.type=3:h.key=s.C0.ESC+"[6~";break;case 112:h.key=o?s.C0.ESC+"[1;"+(o+1)+"P":s.C0.ESC+"OP";break;case 113:h.key=o?s.C0.ESC+"[1;"+(o+1)+"Q":s.C0.ESC+"OQ";break;case 114:h.key=o?s.C0.ESC+"[1;"+(o+1)+"R":s.C0.ESC+"OR";break;case 115:h.key=o?s.C0.ESC+"[1;"+(o+1)+"S":s.C0.ESC+"OS";break;case 116:h.key=o?s.C0.ESC+"[15;"+(o+1)+"~":s.C0.ESC+"[15~";break;case 117:h.key=o?s.C0.ESC+"[17;"+(o+1)+"~":s.C0.ESC+"[17~";break;case 118:h.key=o?s.C0.ESC+"[18;"+(o+1)+"~":s.C0.ESC+"[18~";break;case 119:h.key=o?s.C0.ESC+"[19;"+(o+1)+"~":s.C0.ESC+"[19~";break;case 120:h.key=o?s.C0.ESC+"[20;"+(o+1)+"~":s.C0.ESC+"[20~";break;case 121:h.key=o?s.C0.ESC+"[21;"+(o+1)+"~":s.C0.ESC+"[21~";break;case 122:h.key=o?s.C0.ESC+"[23;"+(o+1)+"~":s.C0.ESC+"[23~";break;case 123:h.key=o?s.C0.ESC+"[24;"+(o+1)+"~":s.C0.ESC+"[24~";break;default:if(!t.ctrlKey||t.shiftKey||t.altKey||t.metaKey)if(n&&!r||!t.altKey||t.metaKey)!n||t.altKey||t.ctrlKey||t.shiftKey||!t.metaKey?t.key&&!t.ctrlKey&&!t.altKey&&!t.metaKey&&t.keyCode>=48&&1===t.key.length?h.key=t.key:t.key&&t.ctrlKey&&"_"===t.key&&(h.key=s.C0.US):65===t.keyCode&&(h.type=1);else{var u=e[t.keyCode],c=u&&u[t.shiftKey?1:0];c?h.key=s.C0.ESC+c:t.keyCode>=65&&t.keyCode<=90&&(h.key=s.C0.ESC+String.fromCharCode(t.ctrlKey?t.keyCode-64:t.keyCode+32))}else t.keyCode>=65&&t.keyCode<=90?h.key=String.fromCharCode(t.keyCode-64):32===t.keyCode?h.key=s.C0.NUL:t.keyCode>=51&&t.keyCode<=55?h.key=String.fromCharCode(t.keyCode-51+27):56===t.keyCode?h.key=s.C0.DEL:219===t.keyCode?h.key=s.C0.ESC:220===t.keyCode?h.key=s.C0.FS:221===t.keyCode&&(h.key=s.C0.GS)}return h}},482:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(t){return t>65535?(t-=65536,String.fromCharCode(55296+(t>>10))+String.fromCharCode(t%1024+56320)):String.fromCharCode(t)},i.utf32ToString=function(t,i,n){void 0===i&&(i=0),void 0===n&&(n=t.length);for(var s="",e=i;e<n;++e){var r=t[e];r>65535?(r-=65536,s+=String.fromCharCode(55296+(r>>10))+String.fromCharCode(r%1024+56320)):s+=String.fromCharCode(r)}return s};var n=function(){function t(){this._interim=0}return t.prototype.clear=function(){this._interim=0},t.prototype.decode=function(t,i){var n=t.length;if(!n)return 0;var s=0,e=0;this._interim&&(56320<=(o=t.charCodeAt(e++))&&o<=57343?i[s++]=1024*(this._interim-55296)+o-56320+65536:(i[s++]=this._interim,i[s++]=o),this._interim=0);for(var r=e;r<n;++r){var h=t.charCodeAt(r);if(55296<=h&&h<=56319){if(++r>=n)return this._interim=h,s;var o;56320<=(o=t.charCodeAt(r))&&o<=57343?i[s++]=1024*(h-55296)+o-56320+65536:(i[s++]=h,i[s++]=o)}else 65279!==h&&(i[s++]=h)}return s},t}();i.StringToUtf32=n;var s=function(){function t(){this.interim=new Uint8Array(3)}return t.prototype.clear=function(){this.interim.fill(0)},t.prototype.decode=function(t,i){var n=t.length;if(!n)return 0;var s,e,r,h,o=0,u=0,c=0;if(this.interim[0]){var f=!1,a=this.interim[0];a&=192==(224&a)?31:224==(240&a)?15:7;for(var l=0,v=void 0;(v=63&this.interim[++l])&&l<4;)a<<=6,a|=v;for(var d=192==(224&this.interim[0])?2:224==(240&this.interim[0])?3:4,b=d-l;c<b;){if(c>=n)return 0;if(128!=(192&(v=t[c++]))){c--,f=!0;break}this.interim[l++]=v,a<<=6,a|=63&v}f||(2===d?a<128?c--:i[o++]=a:3===d?a<2048||a>=55296&&a<=57343||65279===a||(i[o++]=a):a<65536||a>1114111||(i[o++]=a)),this.interim.fill(0)}for(var w=n-4,m=c;m<n;){for(;!(!(m<w)||128&(s=t[m])||128&(e=t[m+1])||128&(r=t[m+2])||128&(h=t[m+3]));)i[o++]=s,i[o++]=e,i[o++]=r,i[o++]=h,m+=4;if((s=t[m++])<128)i[o++]=s;else if(192==(224&s)){if(m>=n)return this.interim[0]=s,o;if(128!=(192&(e=t[m++]))){m--;continue}if((u=(31&s)<<6|63&e)<128){m--;continue}i[o++]=u}else if(224==(240&s)){if(m>=n)return this.interim[0]=s,o;if(128!=(192&(e=t[m++]))){m--;continue}if(m>=n)return this.interim[0]=s,this.interim[1]=e,o;if(128!=(192&(r=t[m++]))){m--;continue}if((u=(15&s)<<12|(63&e)<<6|63&r)<2048||u>=55296&&u<=57343||65279===u)continue;i[o++]=u}else if(240==(248&s)){if(m>=n)return this.interim[0]=s,o;if(128!=(192&(e=t[m++]))){m--;continue}if(m>=n)return this.interim[0]=s,this.interim[1]=e,o;if(128!=(192&(r=t[m++]))){m--;continue}if(m>=n)return this.interim[0]=s,this.interim[1]=e,this.interim[2]=r,o;if(128!=(192&(h=t[m++]))){m--;continue}if((u=(7&s)<<18|(63&e)<<12|(63&r)<<6|63&h)<65536||u>1114111)continue;i[o++]=u}}return o},t}();i.Utf8ToUtf32=s},225:(t,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeV6=void 0;var s,e=n(8273),r=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],h=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],o=function(){function t(){if(this.version="6",!s){s=new Uint8Array(65536),e.fill(s,1),s[0]=0,e.fill(s,0,1,32),e.fill(s,0,127,160),e.fill(s,2,4352,4448),s[9001]=2,s[9002]=2,e.fill(s,2,11904,42192),s[12351]=1,e.fill(s,2,44032,55204),e.fill(s,2,63744,64256),e.fill(s,2,65040,65050),e.fill(s,2,65072,65136),e.fill(s,2,65280,65377),e.fill(s,2,65504,65511);for(var t=0;t<r.length;++t)e.fill(s,0,r[t][0],r[t][1]+1)}}return t.prototype.wcwidth=function(t){return t<32?0:t<127?1:t<65536?s[t]:function(t,i){var n,s=0,e=i.length-1;if(t<i[0][0]||t>i[e][1])return!1;for(;e>=s;)if(t>i[n=s+e>>1][1])s=n+1;else{if(!(t<i[n][0]))return!0;e=n-1}return!1}(t,h)?0:t>=131072&&t<=196605||t>=196608&&t<=262141?2:1},t}();i.UnicodeV6=o},5981:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WriteBuffer=void 0;var n="undefined"==typeof queueMicrotask?function(t){Promise.resolve().then(t)}:queueMicrotask,s=function(){function t(t){this._action=t,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0}return t.prototype.writeSync=function(t,i){if(void 0!==i&&this._syncCalls>i)this._syncCalls=0;else if(this._pendingData+=t.length,this._writeBuffer.push(t),this._callbacks.push(void 0),this._syncCalls++,!this._isSyncWriting){var n;for(this._isSyncWriting=!0;n=this._writeBuffer.shift();){this._action(n);var s=this._callbacks.shift();s&&s()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}},t.prototype.write=function(t,i){var n=this;if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");this._writeBuffer.length||(this._bufferOffset=0,setTimeout((function(){return n._innerWrite()}))),this._pendingData+=t.length,this._writeBuffer.push(t),this._callbacks.push(i)},t.prototype._innerWrite=function(t,i){var s=this;void 0===t&&(t=0),void 0===i&&(i=!0);for(var e=t||Date.now();this._writeBuffer.length>this._bufferOffset;){var r=this._writeBuffer[this._bufferOffset],h=this._action(r,i);if(h)return void h.catch((function(t){return n((function(){throw t})),Promise.resolve(!1)})).then((function(t){return Date.now()-e>=12?setTimeout((function(){return s._innerWrite(0,t)})):s._innerWrite(e,t)}));var o=this._callbacks[this._bufferOffset];if(o&&o(),this._bufferOffset++,this._pendingData-=r.length,Date.now()-e>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout((function(){return s._innerWrite()}))):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0)},t}();i.WriteBuffer=s},5770:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PAYLOAD_LIMIT=void 0,i.PAYLOAD_LIMIT=1e7},6351:(t,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DcsHandler=i.DcsParser=void 0;var s=n(482),e=n(8742),r=n(5770),h=[],o=function(){function t(){this._handlers=Object.create(null),this._active=h,this._ident=0,this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return t.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=h},t.prototype.registerHandler=function(t,i){void 0===this._handlers[t]&&(this._handlers[t]=[]);var n=this._handlers[t];return n.push(i),{dispose:function(){var t=n.indexOf(i);-1!==t&&n.splice(t,1)}}},t.prototype.clearHandler=function(t){this._handlers[t]&&delete this._handlers[t]},t.prototype.setHandlerFallback=function(t){this._handlerFb=t},t.prototype.reset=function(){if(this._active.length)for(var t=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;t>=0;--t)this._active[t].unhook(!1);this._stack.paused=!1,this._active=h,this._ident=0},t.prototype.hook=function(t,i){if(this.reset(),this._ident=t,this._active=this._handlers[t]||h,this._active.length)for(var n=this._active.length-1;n>=0;n--)this._active[n].hook(i);else this._handlerFb(this._ident,"HOOK",i)},t.prototype.put=function(t,i,n){if(this._active.length)for(var e=this._active.length-1;e>=0;e--)this._active[e].put(t,i,n);else this._handlerFb(this._ident,"PUT",s.utf32ToString(t,i,n))},t.prototype.unhook=function(t,i){if(void 0===i&&(i=!0),this._active.length){var n=!1,s=this._active.length-1,e=!1;if(this._stack.paused&&(s=this._stack.loopPosition-1,n=i,e=this._stack.fallThrough,this._stack.paused=!1),!e&&!1===n){for(;s>=0&&!0!==(n=this._active[s].unhook(t));s--)if(n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!1,n;s--}for(;s>=0;s--)if((n=this._active[s].unhook(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!0,n}else this._handlerFb(this._ident,"UNHOOK",t);this._active=h,this._ident=0},t}();i.DcsParser=o;var u=new e.Params;u.addParam(0);var c=function(){function t(t){this._handler=t,this._data="",this._params=u,this._hitLimit=!1}return t.prototype.hook=function(t){this._params=t.length>1||t.params[0]?t.clone():u,this._data="",this._hitLimit=!1},t.prototype.put=function(t,i,n){this._hitLimit||(this._data+=s.utf32ToString(t,i,n),this._data.length>r.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},t.prototype.unhook=function(t){var i=this,n=!1;if(this._hitLimit)n=!1;else if(t&&(n=this._handler(this._data,this._params))instanceof Promise)return n.then((function(t){return i._params=u,i._data="",i._hitLimit=!1,t}));return this._params=u,this._data="",this._hitLimit=!1,n},t}();i.DcsHandler=c},2015:function(t,i,n){var s,e=this&&this.__extends||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"__esModule",{value:!0}),i.EscapeSequenceParser=i.VT500_TRANSITION_TABLE=i.TransitionTable=void 0;var r=n(844),h=n(8273),o=n(8742),u=n(6242),c=n(6351),f=function(){function t(t){this.table=new Uint8Array(t)}return t.prototype.setDefault=function(t,i){h.fill(this.table,t<<4|i)},t.prototype.add=function(t,i,n,s){this.table[i<<8|t]=n<<4|s},t.prototype.addMany=function(t,i,n,s){for(var e=0;e<t.length;e++)this.table[i<<8|t[e]]=n<<4|s},t}();i.TransitionTable=f;var a=160;i.VT500_TRANSITION_TABLE=function(){var t=new f(4095),i=Array.apply(null,Array(256)).map((function(t,i){return i})),n=function(t,n){return i.slice(t,n)},s=n(32,127),e=n(0,24);e.push(25),e.push.apply(e,n(28,32));var r,h=n(0,14);for(r in t.setDefault(1,0),t.addMany(s,0,2,0),h)t.addMany([24,26,153,154],r,3,0),t.addMany(n(128,144),r,3,0),t.addMany(n(144,152),r,3,0),t.add(156,r,0,0),t.add(27,r,11,1),t.add(157,r,4,8),t.addMany([152,158,159],r,0,7),t.add(155,r,11,3),t.add(144,r,11,9);return t.addMany(e,0,3,0),t.addMany(e,1,3,1),t.add(127,1,0,1),t.addMany(e,8,0,8),t.addMany(e,3,3,3),t.add(127,3,0,3),t.addMany(e,4,3,4),t.add(127,4,0,4),t.addMany(e,6,3,6),t.addMany(e,5,3,5),t.add(127,5,0,5),t.addMany(e,2,3,2),t.add(127,2,0,2),t.add(93,1,4,8),t.addMany(s,8,5,8),t.add(127,8,5,8),t.addMany([156,27,24,26,7],8,6,0),t.addMany(n(28,32),8,0,8),t.addMany([88,94,95],1,0,7),t.addMany(s,7,0,7),t.addMany(e,7,0,7),t.add(156,7,0,0),t.add(127,7,0,7),t.add(91,1,11,3),t.addMany(n(64,127),3,7,0),t.addMany(n(48,60),3,8,4),t.addMany([60,61,62,63],3,9,4),t.addMany(n(48,60),4,8,4),t.addMany(n(64,127),4,7,0),t.addMany([60,61,62,63],4,0,6),t.addMany(n(32,64),6,0,6),t.add(127,6,0,6),t.addMany(n(64,127),6,0,0),t.addMany(n(32,48),3,9,5),t.addMany(n(32,48),5,9,5),t.addMany(n(48,64),5,0,6),t.addMany(n(64,127),5,7,0),t.addMany(n(32,48),4,9,5),t.addMany(n(32,48),1,9,2),t.addMany(n(32,48),2,9,2),t.addMany(n(48,127),2,10,0),t.addMany(n(48,80),1,10,0),t.addMany(n(81,88),1,10,0),t.addMany([89,90,92],1,10,0),t.addMany(n(96,127),1,10,0),t.add(80,1,11,9),t.addMany(e,9,0,9),t.add(127,9,0,9),t.addMany(n(28,32),9,0,9),t.addMany(n(32,48),9,9,12),t.addMany(n(48,60),9,8,10),t.addMany([60,61,62,63],9,9,10),t.addMany(e,11,0,11),t.addMany(n(32,128),11,0,11),t.addMany(n(28,32),11,0,11),t.addMany(e,10,0,10),t.add(127,10,0,10),t.addMany(n(28,32),10,0,10),t.addMany(n(48,60),10,8,10),t.addMany([60,61,62,63],10,0,11),t.addMany(n(32,48),10,9,12),t.addMany(e,12,0,12),t.add(127,12,0,12),t.addMany(n(28,32),12,0,12),t.addMany(n(32,48),12,9,12),t.addMany(n(48,64),12,0,11),t.addMany(n(64,127),12,12,13),t.addMany(n(64,127),10,12,13),t.addMany(n(64,127),9,12,13),t.addMany(e,13,13,13),t.addMany(s,13,13,13),t.add(127,13,0,13),t.addMany([27,156,24,26],13,14,0),t.add(a,0,2,0),t.add(a,8,5,8),t.add(a,6,0,6),t.add(a,11,0,11),t.add(a,13,13,13),t}();var l=function(t){function n(n){void 0===n&&(n=i.VT500_TRANSITION_TABLE);var s=t.call(this)||this;return s._transitions=n,s._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},s.initialState=0,s.currentState=s.initialState,s._params=new o.Params,s._params.addParam(0),s._collect=0,s.precedingCodepoint=0,s._printHandlerFb=function(){},s._executeHandlerFb=function(){},s._csiHandlerFb=function(){},s._escHandlerFb=function(){},s._errorHandlerFb=function(t){return t},s._printHandler=s._printHandlerFb,s._executeHandlers=Object.create(null),s._csiHandlers=Object.create(null),s._escHandlers=Object.create(null),s._oscParser=new u.OscParser,s._dcsParser=new c.DcsParser,s._errorHandler=s._errorHandlerFb,s.registerEscHandler({final:"\\"},(function(){return!0})),s}return e(n,t),n.prototype._identifier=function(t,i){void 0===i&&(i=[64,126]);var n=0;if(t.prefix){if(t.prefix.length>1)throw new Error("only one byte as prefix supported");if((n=t.prefix.charCodeAt(0))&&60>n||n>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(t.intermediates){if(t.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(var s=0;s<t.intermediates.length;++s){var e=t.intermediates.charCodeAt(s);if(32>e||e>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");n<<=8,n|=e}}if(1!==t.final.length)throw new Error("final must be a single byte");var r=t.final.charCodeAt(0);if(i[0]>r||r>i[1])throw new Error("final must be in range "+i[0]+" .. "+i[1]);return(n<<=8)|r},n.prototype.identToString=function(t){for(var i=[];t;)i.push(String.fromCharCode(255&t)),t>>=8;return i.reverse().join("")},n.prototype.dispose=function(){this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null),this._oscParser.dispose(),this._dcsParser.dispose()},n.prototype.setPrintHandler=function(t){this._printHandler=t},n.prototype.clearPrintHandler=function(){this._printHandler=this._printHandlerFb},n.prototype.registerEscHandler=function(t,i){var n=this._identifier(t,[48,126]);void 0===this._escHandlers[n]&&(this._escHandlers[n]=[]);var s=this._escHandlers[n];return s.push(i),{dispose:function(){var t=s.indexOf(i);-1!==t&&s.splice(t,1)}}},n.prototype.clearEscHandler=function(t){this._escHandlers[this._identifier(t,[48,126])]&&delete this._escHandlers[this._identifier(t,[48,126])]},n.prototype.setEscHandlerFallback=function(t){this._escHandlerFb=t},n.prototype.setExecuteHandler=function(t,i){this._executeHandlers[t.charCodeAt(0)]=i},n.prototype.clearExecuteHandler=function(t){this._executeHandlers[t.charCodeAt(0)]&&delete this._executeHandlers[t.charCodeAt(0)]},n.prototype.setExecuteHandlerFallback=function(t){this._executeHandlerFb=t},n.prototype.registerCsiHandler=function(t,i){var n=this._identifier(t);void 0===this._csiHandlers[n]&&(this._csiHandlers[n]=[]);var s=this._csiHandlers[n];return s.push(i),{dispose:function(){var t=s.indexOf(i);-1!==t&&s.splice(t,1)}}},n.prototype.clearCsiHandler=function(t){this._csiHandlers[this._identifier(t)]&&delete this._csiHandlers[this._identifier(t)]},n.prototype.setCsiHandlerFallback=function(t){this._csiHandlerFb=t},n.prototype.registerDcsHandler=function(t,i){return this._dcsParser.registerHandler(this._identifier(t),i)},n.prototype.clearDcsHandler=function(t){this._dcsParser.clearHandler(this._identifier(t))},n.prototype.setDcsHandlerFallback=function(t){this._dcsParser.setHandlerFallback(t)},n.prototype.registerOscHandler=function(t,i){return this._oscParser.registerHandler(t,i)},n.prototype.clearOscHandler=function(t){this._oscParser.clearHandler(t)},n.prototype.setOscHandlerFallback=function(t){this._oscParser.setHandlerFallback(t)},n.prototype.setErrorHandler=function(t){this._errorHandler=t},n.prototype.clearErrorHandler=function(){this._errorHandler=this._errorHandlerFb},n.prototype.reset=function(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,0!==this._parseStack.state&&(this._parseStack.state=2,this._parseStack.handlers=[])},n.prototype._preserveStack=function(t,i,n,s,e){this._parseStack.state=t,this._parseStack.handlers=i,this._parseStack.handlerPos=n,this._parseStack.transition=s,this._parseStack.chunkPos=e},n.prototype.parse=function(t,i,n){var s,e=0,r=0,h=0;if(this._parseStack.state)if(2===this._parseStack.state)this._parseStack.state=0,h=this._parseStack.chunkPos+1;else{if(void 0===n||1===this._parseStack.state)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");var o=this._parseStack.handlers,u=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(!1===n&&u>-1)for(;u>=0&&!0!==(s=o[u](this._params));u--)if(s instanceof Promise)return this._parseStack.handlerPos=u,s;this._parseStack.handlers=[];break;case 4:if(!1===n&&u>-1)for(;u>=0&&!0!==(s=o[u]());u--)if(s instanceof Promise)return this._parseStack.handlerPos=u,s;this._parseStack.handlers=[];break;case 6:if(s=this._dcsParser.unhook(24!==(e=t[this._parseStack.chunkPos])&&26!==e,n))return s;27===e&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(s=this._oscParser.end(24!==(e=t[this._parseStack.chunkPos])&&26!==e,n))return s;27===e&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,h=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(var c=h;c<i;++c){switch((r=this._transitions.table[this.currentState<<8|((e=t[c])<160?e:a)])>>4){case 2:for(var f=c+1;;++f){if(f>=i||(e=t[f])<32||e>126&&e<a){this._printHandler(t,c,f),c=f-1;break}if(++f>=i||(e=t[f])<32||e>126&&e<a){this._printHandler(t,c,f),c=f-1;break}if(++f>=i||(e=t[f])<32||e>126&&e<a){this._printHandler(t,c,f),c=f-1;break}if(++f>=i||(e=t[f])<32||e>126&&e<a){this._printHandler(t,c,f),c=f-1;break}}break;case 3:this._executeHandlers[e]?this._executeHandlers[e]():this._executeHandlerFb(e),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:c,code:e,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:for(var l=(o=this._csiHandlers[this._collect<<8|e])?o.length-1:-1;l>=0&&!0!==(s=o[l](this._params));l--)if(s instanceof Promise)return this._preserveStack(3,o,l,r,c),s;l<0&&this._csiHandlerFb(this._collect<<8|e,this._params),this.precedingCodepoint=0;break;case 8:do{switch(e){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(e-48)}}while(++c<i&&(e=t[c])>47&&e<60);c--;break;case 9:this._collect<<=8,this._collect|=e;break;case 10:for(var v=this._escHandlers[this._collect<<8|e],d=v?v.length-1:-1;d>=0&&!0!==(s=v[d]());d--)if(s instanceof Promise)return this._preserveStack(4,v,d,r,c),s;d<0&&this._escHandlerFb(this._collect<<8|e),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|e,this._params);break;case 13:for(var b=c+1;;++b)if(b>=i||24===(e=t[b])||26===e||27===e||e>127&&e<a){this._dcsParser.put(t,c,b),c=b-1;break}break;case 14:if(s=this._dcsParser.unhook(24!==e&&26!==e))return this._preserveStack(6,[],0,r,c),s;27===e&&(r|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(var w=c+1;;w++)if(w>=i||(e=t[w])<32||e>127&&e<a){this._oscParser.put(t,c,w),c=w-1;break}break;case 6:if(s=this._oscParser.end(24!==e&&26!==e))return this._preserveStack(5,[],0,r,c),s;27===e&&(r|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&r}},n}(r.Disposable);i.EscapeSequenceParser=l},6242:(t,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OscHandler=i.OscParser=void 0;var s=n(5770),e=n(482),r=[],h=function(){function t(){this._state=0,this._active=r,this._id=-1,this._handlers=Object.create(null),this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return t.prototype.registerHandler=function(t,i){void 0===this._handlers[t]&&(this._handlers[t]=[]);var n=this._handlers[t];return n.push(i),{dispose:function(){var t=n.indexOf(i);-1!==t&&n.splice(t,1)}}},t.prototype.clearHandler=function(t){this._handlers[t]&&delete this._handlers[t]},t.prototype.setHandlerFallback=function(t){this._handlerFb=t},t.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=r},t.prototype.reset=function(){if(2===this._state)for(var t=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;t>=0;--t)this._active[t].end(!1);this._stack.paused=!1,this._active=r,this._id=-1,this._state=0},t.prototype._start=function(){if(this._active=this._handlers[this._id]||r,this._active.length)for(var t=this._active.length-1;t>=0;t--)this._active[t].start();else this._handlerFb(this._id,"START")},t.prototype._put=function(t,i,n){if(this._active.length)for(var s=this._active.length-1;s>=0;s--)this._active[s].put(t,i,n);else this._handlerFb(this._id,"PUT",e.utf32ToString(t,i,n))},t.prototype.start=function(){this.reset(),this._state=1},t.prototype.put=function(t,i,n){if(3!==this._state){if(1===this._state)for(;i<n;){var s=t[i++];if(59===s){this._state=2,this._start();break}if(s<48||57<s)return void(this._state=3);-1===this._id&&(this._id=0),this._id=10*this._id+s-48}2===this._state&&n-i>0&&this._put(t,i,n)}},t.prototype.end=function(t,i){if(void 0===i&&(i=!0),0!==this._state){if(3!==this._state)if(1===this._state&&this._start(),this._active.length){var n=!1,s=this._active.length-1,e=!1;if(this._stack.paused&&(s=this._stack.loopPosition-1,n=i,e=this._stack.fallThrough,this._stack.paused=!1),!e&&!1===n){for(;s>=0&&!0!==(n=this._active[s].end(t));s--)if(n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!1,n;s--}for(;s>=0;s--)if((n=this._active[s].end(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!0,n}else this._handlerFb(this._id,"END",t);this._active=r,this._id=-1,this._state=0}},t}();i.OscParser=h;var o=function(){function t(t){this._handler=t,this._data="",this._hitLimit=!1}return t.prototype.start=function(){this._data="",this._hitLimit=!1},t.prototype.put=function(t,i,n){this._hitLimit||(this._data+=e.utf32ToString(t,i,n),this._data.length>s.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},t.prototype.end=function(t){var i=this,n=!1;if(this._hitLimit)n=!1;else if(t&&(n=this._handler(this._data))instanceof Promise)return n.then((function(t){return i._data="",i._hitLimit=!1,t}));return this._data="",this._hitLimit=!1,n},t}();i.OscHandler=o},8742:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Params=void 0;var n=2147483647,s=function(){function t(t,i){if(void 0===t&&(t=32),void 0===i&&(i=32),this.maxLength=t,this.maxSubParamsLength=i,i>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(t),this.length=0,this._subParams=new Int32Array(i),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(t),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}return t.fromArray=function(i){var n=new t;if(!i.length)return n;for(var s=i[0]instanceof Array?1:0;s<i.length;++s){var e=i[s];if(e instanceof Array)for(var r=0;r<e.length;++r)n.addSubParam(e[r]);else n.addParam(e)}return n},t.prototype.clone=function(){var i=new t(this.maxLength,this.maxSubParamsLength);return i.params.set(this.params),i.length=this.length,i._subParams.set(this._subParams),i._subParamsLength=this._subParamsLength,i._subParamsIdx.set(this._subParamsIdx),i._rejectDigits=this._rejectDigits,i._rejectSubDigits=this._rejectSubDigits,i._digitIsSub=this._digitIsSub,i},t.prototype.toArray=function(){for(var t=[],i=0;i<this.length;++i){t.push(this.params[i]);var n=this._subParamsIdx[i]>>8,s=255&this._subParamsIdx[i];s-n>0&&t.push(Array.prototype.slice.call(this._subParams,n,s))}return t},t.prototype.reset=function(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1},t.prototype.addParam=function(t){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(t<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=t>n?n:t}},t.prototype.addSubParam=function(t){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(t<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=t>n?n:t,this._subParamsIdx[this.length-1]++}},t.prototype.hasSubParams=function(t){return(255&this._subParamsIdx[t])-(this._subParamsIdx[t]>>8)>0},t.prototype.getSubParams=function(t){var i=this._subParamsIdx[t]>>8,n=255&this._subParamsIdx[t];return n-i>0?this._subParams.subarray(i,n):null},t.prototype.getSubParamsAll=function(){for(var t={},i=0;i<this.length;++i){var n=this._subParamsIdx[i]>>8,s=255&this._subParamsIdx[i];s-n>0&&(t[i]=this._subParams.slice(n,s))}return t},t.prototype.addDigit=function(t){var i;if(!(this._rejectDigits||!(i=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)){var s=this._digitIsSub?this._subParams:this.params,e=s[i-1];s[i-1]=~e?Math.min(10*e+t,n):t}},t}();i.Params=s},744:function(t,i,n){var s,e=this&&this.__extends||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),r=this&&this.__decorate||function(t,i,n,s){var e,r=arguments.length,h=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,s);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(h=(r<3?e(h):r>3?e(i,n,h):e(i,n))||h);return r>3&&h&&Object.defineProperty(i,n,h),h},h=this&&this.__param||function(t,i){return function(n,s){i(n,s,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferService=i.MINIMUM_ROWS=i.MINIMUM_COLS=void 0;var o=n(2585),u=n(5295),c=n(8460),f=n(844);i.MINIMUM_COLS=2,i.MINIMUM_ROWS=1;var a=function(t){function n(n){var s=t.call(this)||this;return s._optionsService=n,s.isUserScrolling=!1,s._onResize=new c.EventEmitter,s._onScroll=new c.EventEmitter,s.cols=Math.max(n.options.cols,i.MINIMUM_COLS),s.rows=Math.max(n.options.rows,i.MINIMUM_ROWS),s.buffers=new u.BufferSet(n,s),s}return e(n,t),Object.defineProperty(n.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),n.prototype.dispose=function(){t.prototype.dispose.call(this),this.buffers.dispose()},n.prototype.resize=function(t,i){this.cols=t,this.rows=i,this.buffers.resize(t,i),this.buffers.setupTabStops(this.cols),this._onResize.fire({cols:t,rows:i})},n.prototype.reset=function(){this.buffers.reset(),this.isUserScrolling=!1},n.prototype.scroll=function(t,i){void 0===i&&(i=!1);var n,s=this.buffer;(n=this._cachedBlankLine)&&n.length===this.cols&&n.getFg(0)===t.fg&&n.getBg(0)===t.bg||(n=s.getBlankLine(t,i),this._cachedBlankLine=n),n.isWrapped=i;var e=s.ybase+s.scrollTop,r=s.ybase+s.scrollBottom;if(0===s.scrollTop){var h=s.lines.isFull;r===s.lines.length-1?h?s.lines.recycle().copyFrom(n):s.lines.push(n.clone()):s.lines.splice(r+1,0,n.clone()),h?this.isUserScrolling&&(s.ydisp=Math.max(s.ydisp-1,0)):(s.ybase++,this.isUserScrolling||s.ydisp++)}else s.lines.shiftElements(e+1,r-e+1-1,-1),s.lines.set(r,n.clone());this.isUserScrolling||(s.ydisp=s.ybase),this._onScroll.fire(s.ydisp)},n.prototype.scrollLines=function(t,i){var n=this.buffer;if(t<0){if(0===n.ydisp)return;this.isUserScrolling=!0}else t+n.ydisp>=n.ybase&&(this.isUserScrolling=!1);var s=n.ydisp;n.ydisp=Math.max(Math.min(n.ydisp+t,n.ybase),0),s!==n.ydisp&&(i||this._onScroll.fire(n.ydisp))},n.prototype.scrollPages=function(t){this.scrollLines(t*(this.rows-1))},n.prototype.scrollToTop=function(){this.scrollLines(-this.buffer.ydisp)},n.prototype.scrollToBottom=function(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)},n.prototype.scrollToLine=function(t){var i=t-this.buffer.ydisp;0!==i&&this.scrollLines(i)},r([h(0,o.IOptionsService)],n)}(f.Disposable);i.BufferService=a},7994:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CharsetService=void 0;var n=function(){function t(){this.glevel=0,this._charsets=[]}return t.prototype.reset=function(){this.charset=void 0,this._charsets=[],this.glevel=0},t.prototype.setgLevel=function(t){this.glevel=t,this.charset=this._charsets[t]},t.prototype.setgCharset=function(t,i){this._charsets[t]=i,this.glevel===t&&(this.charset=i)},t}();i.CharsetService=n},1753:function(t,i,n){var s=this&&this.__decorate||function(t,i,n,s){var e,r=arguments.length,h=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,s);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(h=(r<3?e(h):r>3?e(i,n,h):e(i,n))||h);return r>3&&h&&Object.defineProperty(i,n,h),h},e=this&&this.__param||function(t,i){return function(n,s){i(n,s,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreMouseService=void 0;var r=n(2585),h=n(8460),o={NONE:{events:0,restrict:function(){return!1}},X10:{events:1,restrict:function(t){return 4!==t.button&&1===t.action&&(t.ctrl=!1,t.alt=!1,t.shift=!1,!0)}},VT200:{events:19,restrict:function(t){return 32!==t.action}},DRAG:{events:23,restrict:function(t){return 32!==t.action||3!==t.button}},ANY:{events:31,restrict:function(){return!0}}};function u(t,i){var n=(t.ctrl?16:0)|(t.shift?4:0)|(t.alt?8:0);return 4===t.button?(n|=64,n|=t.action):(n|=3&t.button,4&t.button&&(n|=64),8&t.button&&(n|=128),32===t.action?n|=32:0!==t.action||i||(n|=3)),n}var c=String.fromCharCode,f={DEFAULT:function(t){var i=[u(t,!1)+32,t.col+32,t.row+32];return i[0]>255||i[1]>255||i[2]>255?"":"[M"+c(i[0])+c(i[1])+c(i[2])},SGR:function(t){var i=0===t.action&&4!==t.button?"m":"M";return"[<"+u(t,!0)+";"+t.col+";"+t.row+i}},a=function(){function t(t,i){this._bufferService=t,this._coreService=i,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._onProtocolChange=new h.EventEmitter,this._lastEvent=null;for(var n=0,s=Object.keys(o);n<s.length;n++){var e=s[n];this.addProtocol(e,o[e])}for(var r=0,u=Object.keys(f);r<u.length;r++){var c=u[r];this.addEncoding(c,f[c])}this.reset()}return t.prototype.addProtocol=function(t,i){this._protocols[t]=i},t.prototype.addEncoding=function(t,i){this._encodings[t]=i},Object.defineProperty(t.prototype,"activeProtocol",{get:function(){return this._activeProtocol},set:function(t){if(!this._protocols[t])throw new Error('unknown protocol "'+t+'"');this._activeProtocol=t,this._onProtocolChange.fire(this._protocols[t].events)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"areMouseEventsActive",{get:function(){return 0!==this._protocols[this._activeProtocol].events},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"activeEncoding",{get:function(){return this._activeEncoding},set:function(t){if(!this._encodings[t])throw new Error('unknown encoding "'+t+'"');this._activeEncoding=t},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null},Object.defineProperty(t.prototype,"onProtocolChange",{get:function(){return this._onProtocolChange.event},enumerable:!1,configurable:!0}),t.prototype.triggerMouseEvent=function(t){if(t.col<0||t.col>=this._bufferService.cols||t.row<0||t.row>=this._bufferService.rows)return!1;if(4===t.button&&32===t.action)return!1;if(3===t.button&&32!==t.action)return!1;if(4!==t.button&&(2===t.action||3===t.action))return!1;if(t.col++,t.row++,32===t.action&&this._lastEvent&&this._compareEvents(this._lastEvent,t))return!1;if(!this._protocols[this._activeProtocol].restrict(t))return!1;var i=this._encodings[this._activeEncoding](t);return i&&("DEFAULT"===this._activeEncoding?this._coreService.triggerBinaryEvent(i):this._coreService.triggerDataEvent(i,!0)),this._lastEvent=t,!0},t.prototype.explainEvents=function(t){return{down:!!(1&t),up:!!(2&t),drag:!!(4&t),move:!!(8&t),wheel:!!(16&t)}},t.prototype._compareEvents=function(t,i){return t.col===i.col&&t.row===i.row&&t.button===i.button&&t.action===i.action&&t.ctrl===i.ctrl&&t.alt===i.alt&&t.shift===i.shift},s([e(0,r.IBufferService),e(1,r.ICoreService)],t)}();i.CoreMouseService=a},6975:function(t,i,n){var s,e=this&&this.__extends||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)},function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),r=this&&this.__decorate||function(t,i,n,s){var e,r=arguments.length,h=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,s);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(h=(r<3?e(h):r>3?e(i,n,h):e(i,n))||h);return r>3&&h&&Object.defineProperty(i,n,h),h},h=this&&this.__param||function(t,i){return function(n,s){i(n,s,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreService=void 0;var o=n(2585),u=n(8460),c=n(1439),f=n(844),a=Object.freeze({insertMode:!1}),l=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),v=function(t){function i(i,n,s,e){var r=t.call(this)||this;return r._bufferService=n,r._logService=s,r._optionsService=e,r.isCursorInitialized=!1,r.isCursorHidden=!1,r._onData=r.register(new u.EventEmitter),r._onUserInput=r.register(new u.EventEmitter),r._onBinary=r.register(new u.EventEmitter),r._scrollToBottom=i,r.register({dispose:function(){return r._scrollToBottom=void 0}}),r.modes=c.clone(a),r.decPrivateModes=c.clone(l),r}return e(i,t),Object.defineProperty(i.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onUserInput",{get:function(){return this._onUserInput.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),i.prototype.reset=function(){this.modes=c.clone(a),this.decPrivateModes=c.clone(l)},i.prototype.triggerDataEvent=function(t,i){if(void 0===i&&(i=!1),!this._optionsService.options.disableStdin){var n=this._bufferService.buffer;n.ybase!==n.ydisp&&this._scrollToBottom(),i&&this._onUserInput.fire(),this._logService.debug('sending data "'+t+'"',(function(){return t.split("").map((function(t){return t.charCodeAt(0)}))})),this._onData.fire(t)}},i.prototype.triggerBinaryEvent=function(t){this._optionsService.options.disableStdin||(this._logService.debug('sending binary "'+t+'"',(function(){return t.split("").map((function(t){return t.charCodeAt(0)}))})),this._onBinary.fire(t))},r([h(1,o.IBufferService),h(2,o.ILogService),h(3,o.IOptionsService)],i)}(f.Disposable);i.CoreService=v},3730:function(t,i,n){var s=this&&this.__decorate||function(t,i,n,s){var e,r=arguments.length,h=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,s);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(h=(r<3?e(h):r>3?e(i,n,h):e(i,n))||h);return r>3&&h&&Object.defineProperty(i,n,h),h},e=this&&this.__param||function(t,i){return function(n,s){i(n,s,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DirtyRowService=void 0;var r=n(2585),h=function(){function t(t){this._bufferService=t,this.clearRange()}return Object.defineProperty(t.prototype,"start",{get:function(){return this._start},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return this._end},enumerable:!1,configurable:!0}),t.prototype.clearRange=function(){this._start=this._bufferService.buffer.y,this._end=this._bufferService.buffer.y},t.prototype.markDirty=function(t){t<this._start?this._start=t:t>this._end&&(this._end=t)},t.prototype.markRangeDirty=function(t,i){if(t>i){var n=t;t=i,i=n}t<this._start&&(this._start=t),i>this._end&&(this._end=i)},t.prototype.markAllDirty=function(){this.markRangeDirty(0,this._bufferService.rows-1)},s([e(0,r.IBufferService)],t)}();i.DirtyRowService=h},4348:function(t,i,n){var s=this&&this.__spreadArray||function(t,i){for(var n=0,s=i.length,e=t.length;n<s;n++,e++)t[e]=i[n];return t};Object.defineProperty(i,"__esModule",{value:!0}),i.InstantiationService=i.ServiceCollection=void 0;var e=n(2585),r=n(8343),h=function(){function t(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this._entries=new Map;for(var n=0,s=t;n<s.length;n++){var e=s[n];this.set(e[0],e[1])}}return t.prototype.set=function(t,i){var n=this._entries.get(t);return this._entries.set(t,i),n},t.prototype.forEach=function(t){this._entries.forEach((function(i,n){return t(n,i)}))},t.prototype.has=function(t){return this._entries.has(t)},t.prototype.get=function(t){return this._entries.get(t)},t}();i.ServiceCollection=h;var o=function(){function t(){this._services=new h,this._services.set(e.IInstantiationService,this)}return t.prototype.setService=function(t,i){this._services.set(t,i)},t.prototype.getService=function(t){return this._services.get(t)},t.prototype.createInstance=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];for(var e=r.getServiceDependencies(t).sort((function(t,i){return t.index-i.index})),h=[],o=0,u=e;o<u.length;o++){var c=u[o],f=this._services.get(c.id);if(!f)throw new Error("[createInstance] "+t.name+" depends on UNKNOWN service "+c.id+".");h.push(f)}var a=e.length>0?e[0].index:i.length;if(i.length!==a)throw new Error("[createInstance] First service dependency of "+t.name+" at position "+(a+1)+" conflicts with "+i.length+" static arguments");return new(t.bind.apply(t,s([void 0],s(s([],i),h))))},t}();i.InstantiationService=o},7866:function(t,i,n){var s=this&&this.__decorate||function(t,i,n,s){var e,r=arguments.length,h=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,n,s);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(h=(r<3?e(h):r>3?e(i,n,h):e(i,n))||h);return r>3&&h&&Object.defineProperty(i,n,h),h},e=this&&this.__param||function(t,i){return function(n,s){i(n,s,t)}},r=this&&this.__spreadArray||function(t,i){for(var n=0,s=i.length,e=t.length;n<s;n++,e++)t[e]=i[n];return t};Object.defineProperty(i,"__esModule",{value:!0}),i.LogService=void 0;var h=n(2585),o={debug:h.LogLevelEnum.DEBUG,info:h.LogLevelEnum.INFO,warn:h.LogLevelEnum.WARN,error:h.LogLevelEnum.ERROR,off:h.LogLevelEnum.OFF},u=function(){function t(t){var i=this;this._optionsService=t,this.logLevel=h.LogLevelEnum.OFF,this._updateLogLevel(),this._optionsService.onOptionChange((function(t){"logLevel"===t&&i._updateLogLevel()}))}return t.prototype._updateLogLevel=function(){this.logLevel=o[this._optionsService.options.logLevel]},t.prototype._evalLazyOptionalParams=function(t){for(var i=0;i<t.length;i++)"function"==typeof t[i]&&(t[i]=t[i]())},t.prototype._log=function(t,i,n){this._evalLazyOptionalParams(n),t.call.apply(t,r([console,"xterm.js: "+i],n))},t.prototype.debug=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];this.logLevel<=h.LogLevelEnum.DEBUG&&this._log(console.log,t,i)},t.prototype.info=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];this.logLevel<=h.LogLevelEnum.INFO&&this._log(console.info,t,i)},t.prototype.warn=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];this.logLevel<=h.LogLevelEnum.WARN&&this._log(console.warn,t,i)},t.prototype.error=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];this.logLevel<=h.LogLevelEnum.ERROR&&this._log(console.error,t,i)},s([e(0,h.IOptionsService)],t)}();i.LogService=u},7302:(t,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OptionsService=i.DEFAULT_OPTIONS=i.DEFAULT_BELL_SOUND=void 0;var s=n(8460),e=n(6114),r=n(1439);i.DEFAULT_BELL_SOUND="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",i.DEFAULT_OPTIONS=Object.freeze({cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,bellSound:i.DEFAULT_BELL_SOUND,bellStyle:"none",drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,linkTooltipHoverDuration:500,letterSpacing:0,logLevel:"info",scrollback:1e3,scrollSensitivity:1,screenReaderMode:!1,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!0,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:e.isMac,rendererType:"canvas",windowOptions:{},windowsMode:!1,wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1});var h=["normal","bold","100","200","300","400","500","600","700","800","900"],o=["cols","rows"],u=function(){function t(t){this._onOptionChange=new s.EventEmitter,this.options=r.clone(i.DEFAULT_OPTIONS);for(var n=0,e=Object.keys(t);n<e.length;n++){var h=e[n];if(h in this.options)try{this.options[h]=this._sanitizeAndValidateOption(h,t[h])}catch(t){console.error(t)}}}return Object.defineProperty(t.prototype,"onOptionChange",{get:function(){return this._onOptionChange.event},enumerable:!1,configurable:!0}),t.prototype.setOption=function(t,n){if(!(t in i.DEFAULT_OPTIONS))throw new Error('No option with key "'+t+'"');if(o.includes(t))throw new Error('Option "'+t+'" can only be set in the constructor');this.options[t]!==n&&(n=this._sanitizeAndValidateOption(t,n),this.options[t]!==n&&(this.options[t]=n,this._onOptionChange.fire(t)))},t.prototype._sanitizeAndValidateOption=function(t,n){switch(t){case"bellStyle":case"cursorStyle":case"rendererType":case"wordSeparator":n||(n=i.DEFAULT_OPTIONS[t]);break;case"fontWeight":case"fontWeightBold":if("number"==typeof n&&1<=n&&n<=1e3)break;n=h.includes(n)?n:i.DEFAULT_OPTIONS[t];break;case"cursorWidth":n=Math.floor(n);case"lineHeight":case"tabStopWidth":if(n<1)throw new Error(t+" cannot be less than 1, value: "+n);break;case"minimumContrastRatio":n=Math.max(1,Math.min(21,Math.round(10*n)/10));break;case"scrollback":if((n=Math.min(n,4294967295))<0)throw new Error(t+" cannot be less than 0, value: "+n);break;case"fastScrollSensitivity":case"scrollSensitivity":if(n<=0)throw new Error(t+" cannot be less than or equal to 0, value: "+n)}return n},t.prototype.getOption=function(t){if(!(t in i.DEFAULT_OPTIONS))throw new Error('No option with key "'+t+'"');return this.options[t]},t}();i.OptionsService=u},8343:(t,i)=>{function n(t,i,n){i.di$target===i?i.di$dependencies.push({id:t,index:n}):(i.di$dependencies=[{id:t,index:n}],i.di$target=i)}Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0,i.serviceRegistry=new Map,i.getServiceDependencies=function(t){return t.di$dependencies||[]},i.createDecorator=function(t){if(i.serviceRegistry.has(t))return i.serviceRegistry.get(t);var s=function(t,i,e){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");n(s,t,e)};return s.toString=function(){return t},i.serviceRegistry.set(t,s),s}},2585:(t,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IUnicodeService=i.LogLevelEnum=i.IOptionsService=i.ILogService=i.IInstantiationService=i.IDirtyRowService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;var s,e=n(8343);i.IBufferService=e.createDecorator("BufferService"),i.ICoreMouseService=e.createDecorator("CoreMouseService"),i.ICoreService=e.createDecorator("CoreService"),i.ICharsetService=e.createDecorator("CharsetService"),i.IDirtyRowService=e.createDecorator("DirtyRowService"),i.IInstantiationService=e.createDecorator("InstantiationService"),i.ILogService=e.createDecorator("LogService"),i.IOptionsService=e.createDecorator("OptionsService"),(s=i.LogLevelEnum||(i.LogLevelEnum={}))[s.DEBUG=0]="DEBUG",s[s.INFO=1]="INFO",s[s.WARN=2]="WARN",s[s.ERROR=3]="ERROR",s[s.OFF=4]="OFF",i.IUnicodeService=e.createDecorator("UnicodeService")},1480:(t,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeService=void 0;var s=n(8460),e=n(225),r=function(){function t(){this._providers=Object.create(null),this._active="",this._onChange=new s.EventEmitter;var t=new e.UnicodeV6;this.register(t),this._active=t.version,this._activeProvider=t}return Object.defineProperty(t.prototype,"onChange",{get:function(){return this._onChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"versions",{get:function(){return Object.keys(this._providers)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"activeVersion",{get:function(){return this._active},set:function(t){if(!this._providers[t])throw new Error('unknown Unicode version "'+t+'"');this._active=t,this._activeProvider=this._providers[t],this._onChange.fire(t)},enumerable:!1,configurable:!0}),t.prototype.register=function(t){this._providers[t.version]=t},t.prototype.wcwidth=function(t){return this._activeProvider.wcwidth(t)},t.prototype.getStringCellWidth=function(t){for(var i=0,n=t.length,s=0;s<n;++s){var e=t.charCodeAt(s);if(55296<=e&&e<=56319){if(++s>=n)return i+this.wcwidth(e);var r=t.charCodeAt(s);56320<=r&&r<=57343?e=1024*(e-55296)+r-56320+65536:i+=this.wcwidth(r)}i+=this.wcwidth(e)}return i},t}();i.UnicodeService=r}},i={};function n(s){var e=i[s];if(void 0!==e)return e.exports;var r=i[s]={exports:{}};return t[s].call(r.exports,r,r.exports,n),r.exports}var s={};return(()=>{var t=s;Object.defineProperty(t,"__esModule",{value:!0}),t.Terminal=void 0;var i=n(511),e=n(3236),r=n(9042),h=n(8460),o=n(244),u=function(){function t(t){this._core=new e.Terminal(t),this._addonManager=new o.AddonManager}return t.prototype._checkProposedApi=function(){if(!this._core.optionsService.options.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")},Object.defineProperty(t.prototype,"onCursorMove",{get:function(){return this._core.onCursorMove},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onLineFeed",{get:function(){return this._core.onLineFeed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onSelectionChange",{get:function(){return this._core.onSelectionChange},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onData",{get:function(){return this._core.onData},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onBinary",{get:function(){return this._core.onBinary},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onTitleChange",{get:function(){return this._core.onTitleChange},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onBell",{get:function(){return this._core.onBell},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onScroll",{get:function(){return this._core.onScroll},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onKey",{get:function(){return this._core.onKey},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRender",{get:function(){return this._core.onRender},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onResize",{get:function(){return this._core.onResize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){return this._core.element},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parser",{get:function(){return this._checkProposedApi(),this._parser||(this._parser=new l(this._core)),this._parser},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"unicode",{get:function(){return this._checkProposedApi(),new v(this._core)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textarea",{get:function(){return this._core.textarea},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rows",{get:function(){return this._core.rows},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cols",{get:function(){return this._core.cols},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"buffer",{get:function(){return this._checkProposedApi(),this._buffer||(this._buffer=new f(this._core)),this._buffer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"markers",{get:function(){return this._checkProposedApi(),this._core.markers},enumerable:!1,configurable:!0}),t.prototype.blur=function(){this._core.blur()},t.prototype.focus=function(){this._core.focus()},t.prototype.resize=function(t,i){this._verifyIntegers(t,i),this._core.resize(t,i)},t.prototype.open=function(t){this._core.open(t)},t.prototype.attachCustomKeyEventHandler=function(t){this._core.attachCustomKeyEventHandler(t)},t.prototype.registerLinkMatcher=function(t,i,n){return this._checkProposedApi(),this._core.registerLinkMatcher(t,i,n)},t.prototype.deregisterLinkMatcher=function(t){this._checkProposedApi(),this._core.deregisterLinkMatcher(t)},t.prototype.registerLinkProvider=function(t){return this._checkProposedApi(),this._core.registerLinkProvider(t)},t.prototype.registerCharacterJoiner=function(t){return this._checkProposedApi(),this._core.registerCharacterJoiner(t)},t.prototype.deregisterCharacterJoiner=function(t){this._checkProposedApi(),this._core.deregisterCharacterJoiner(t)},t.prototype.registerMarker=function(t){return this._checkProposedApi(),this._verifyIntegers(t),this._core.addMarker(t)},t.prototype.addMarker=function(t){return this.registerMarker(t)},t.prototype.hasSelection=function(){return this._core.hasSelection()},t.prototype.select=function(t,i,n){this._verifyIntegers(t,i,n),this._core.select(t,i,n)},t.prototype.getSelection=function(){return this._core.getSelection()},t.prototype.getSelectionPosition=function(){return this._core.getSelectionPosition()},t.prototype.clearSelection=function(){this._core.clearSelection()},t.prototype.selectAll=function(){this._core.selectAll()},t.prototype.selectLines=function(t,i){this._verifyIntegers(t,i),this._core.selectLines(t,i)},t.prototype.dispose=function(){this._addonManager.dispose(),this._core.dispose()},t.prototype.scrollLines=function(t){this._verifyIntegers(t),this._core.scrollLines(t)},t.prototype.scrollPages=function(t){this._verifyIntegers(t),this._core.scrollPages(t)},t.prototype.scrollToTop=function(){this._core.scrollToTop()},t.prototype.scrollToBottom=function(){this._core.scrollToBottom()},t.prototype.scrollToLine=function(t){this._verifyIntegers(t),this._core.scrollToLine(t)},t.prototype.clear=function(){this._core.clear()},t.prototype.write=function(t,i){this._core.write(t,i)},t.prototype.writeUtf8=function(t,i){this._core.write(t,i)},t.prototype.writeln=function(t,i){this._core.write(t),this._core.write("\r\n",i)},t.prototype.paste=function(t){this._core.paste(t)},t.prototype.getOption=function(t){return this._core.optionsService.getOption(t)},t.prototype.setOption=function(t,i){this._core.optionsService.setOption(t,i)},t.prototype.refresh=function(t,i){this._verifyIntegers(t,i),this._core.refresh(t,i)},t.prototype.reset=function(){this._core.reset()},t.prototype.loadAddon=function(t){return this._addonManager.loadAddon(this,t)},Object.defineProperty(t,"strings",{get:function(){return r},enumerable:!1,configurable:!0}),t.prototype._verifyIntegers=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];for(var n=0,s=t;n<s.length;n++){var e=s[n];if(e===1/0||isNaN(e)||e%1!=0)throw new Error("This API only accepts integers")}},t}();t.Terminal=u;var c=function(){function t(t,i){this._buffer=t,this.type=i}return t.prototype.init=function(t){return this._buffer=t,this},Object.defineProperty(t.prototype,"cursorY",{get:function(){return this._buffer.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursorX",{get:function(){return this._buffer.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewportY",{get:function(){return this._buffer.ydisp},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"baseY",{get:function(){return this._buffer.ybase},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._buffer.lines.length},enumerable:!1,configurable:!0}),t.prototype.getLine=function(t){var i=this._buffer.lines.get(t);if(i)return new a(i)},t.prototype.getNullCell=function(){return new i.CellData},t}(),f=function(){function t(t){var i=this;this._core=t,this._onBufferChange=new h.EventEmitter,this._normal=new c(this._core.buffers.normal,"normal"),this._alternate=new c(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate((function(){return i._onBufferChange.fire(i.active)}))}return Object.defineProperty(t.prototype,"onBufferChange",{get:function(){return this._onBufferChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"active",{get:function(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"normal",{get:function(){return this._normal.init(this._core.buffers.normal)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alternate",{get:function(){return this._alternate.init(this._core.buffers.alt)},enumerable:!1,configurable:!0}),t}(),a=function(){function t(t){this._line=t}return Object.defineProperty(t.prototype,"isWrapped",{get:function(){return this._line.isWrapped},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._line.length},enumerable:!1,configurable:!0}),t.prototype.getCell=function(t,n){if(!(t<0||t>=this._line.length))return n?(this._line.loadCell(t,n),n):this._line.loadCell(t,new i.CellData)},t.prototype.translateToString=function(t,i,n){return this._line.translateToString(t,i,n)},t}(),l=function(){function t(t){this._core=t}return t.prototype.registerCsiHandler=function(t,i){return this._core.registerCsiHandler(t,(function(t){return i(t.toArray())}))},t.prototype.addCsiHandler=function(t,i){return this.registerCsiHandler(t,i)},t.prototype.registerDcsHandler=function(t,i){return this._core.registerDcsHandler(t,(function(t,n){return i(t,n.toArray())}))},t.prototype.addDcsHandler=function(t,i){return this.registerDcsHandler(t,i)},t.prototype.registerEscHandler=function(t,i){return this._core.registerEscHandler(t,i)},t.prototype.addEscHandler=function(t,i){return this.registerEscHandler(t,i)},t.prototype.registerOscHandler=function(t,i){return this._core.registerOscHandler(t,i)},t.prototype.addOscHandler=function(t,i){return this.registerOscHandler(t,i)},t}(),v=function(){function t(t){this._core=t}return t.prototype.register=function(t){this._core.unicodeService.register(t)},Object.defineProperty(t.prototype,"versions",{get:function(){return this._core.unicodeService.versions},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"activeVersion",{get:function(){return this._core.unicodeService.activeVersion},set:function(t){this._core.unicodeService.activeVersion=t},enumerable:!1,configurable:!0}),t}()})(),s})()}));class c{execute(t,i){t.writeln(`hello hello world: ${i}`)}}class f extends u.Terminal{constructor(t){super(t),this.commands=[{name:"Run easter egg",command:new c},{name:"Run easter egg #2",command:new c}]}bufferText(t=!1){let i=Array.from(new Array(this.rows)).map(((t,i)=>this.buffer.active.getLine(i).translateToString())).map((i=>t?i.trimEnd():i)).join("\n");return t?i.trimEnd():i}loadText(t){this.write(r.erase.display(2)),t.split("\n").forEach(((i,n)=>{this.write(i),n<t.length-1&&this.write(r.cursor.nextLine())}))}get cursorX(){return this.buffer.active.cursorX}get cursorY(){return this.buffer.active.cursorY}currentLine(){return this.buffer.active.getLine(this.cursorY).translateToString()}cursorToPrevWord(){const t=this.currentLine().slice(0,this.cursorX).match(/(\w+\W*)$/g);t&&t[0]&&this.write(r.cursor.position(this.cursorY+1,this.cursorX+1-t[0].length))}cursorToNextWord(){const t=this.currentLine().slice(this.cursorX).match(/^(\W*\w+)/g);t&&t[0]&&this.write(r.cursor.position(this.cursorY+1,this.cursorX+1+t[0].length))}cursorToNextEstimatedLine(){const t=this.currentLine().slice(0,this.cursorX).match(/(\s{2,})(\-\s)?((\S+\s?)+\s*)$/);t&&t[3]?this.write(r.cursor.position(this.cursorY+2,this.cursorX+1-t[3].length)):this.cursorToNextLine()}cursorToNextLine(){this.write(r.cursor.position(this.cursorY+2,1))}execute(t,i){t.execute(this,i)}}const a=class{constructor(i){t(this,i),this.textUpdated=n(this,"textUpdated",7),this.dimensions={cols:80,rows:24},this.tag="#untitled",this.text="",this.measure={w:0,h:0}}componentDidLoad(){this.term=new f({theme:{background:"#fafafa",foreground:"#3a3a3a",cursor:"#ffd866",selection:"#ffd866"}}),this.termFitAddon=new o.FitAddon,this.term.loadAddon(this.termFitAddon),this.term.open(this.editorEl),this.term.onData(this.term.write.bind(this.term)),this.term.attachCustomKeyEventHandler(this.terminalKeyHandler.bind(this)),this.updateTextHandler(this.text),this.updateDimensionsHandler(this.dimensions),this.onTerminalResize()}disconnectedCallback(){this.term.dispose()}updateTextHandler(t){this.term.clear(),this.term.write(t)}updateDimensionsHandler(t){this.term.resize(t.cols,t.rows)}onTerminalResize(){this.dimensions&&(this.termFitAddon.proposeDimensions().cols=this.dimensions.cols,this.termFitAddon.proposeDimensions().rows=this.dimensions.rows),this.termFitAddon.fit();const t=this.editorEl.querySelector(".xterm-screen");this.editorEl.style.height=t.style.height,this.editorEl.style.width=t.style.width,this.measure.w=t.clientWidth/this.term.cols,this.measure.h=t.clientHeight/this.term.rows}terminalKeyHandler(t){return"keydown"===t.type&&t.ctrlKey&&t.shiftKey&&"KeyC"===t.code?(this.term.clear(),!1):"keydown"===t.type&&"Backspace"===t.code?(this.term.write(r.cursor.back()+" "+r.cursor.back()),!1):"keydown"!==t.type||t.ctrlKey||"Enter"!==t.code?"keydown"===t.type&&t.ctrlKey&&"Enter"===t.code?(t.preventDefault(),this.term.cursorToNextLine(),!1):"keydown"===t.type&&t.ctrlKey&&"KeyA"===t.code?(t.preventDefault(),this.term.selectAll(),!1):"keydown"===t.type&&t.ctrlKey&&"ArrowLeft"===t.code?(t.preventDefault(),this.term.cursorToPrevWord(),!1):"keydown"===t.type&&t.ctrlKey&&"ArrowRight"===t.code?(t.preventDefault(),this.term.cursorToNextWord(),!1):void 0:(t.preventDefault(),this.term.cursorToNextEstimatedLine(),!1)}onMouseDown(t){if(0!==t.button)return;const i=t.layerY,n=Math.floor(t.layerX/this.measure.w),s=Math.floor(i/this.measure.h);this.term.write(r.cursor.position(s+1,n+1))}render(){return i("div",{class:"editor-container"},i("div",{class:"title"},this.tag),i("div",{class:"editor",onMouseDown:t=>this.onMouseDown(t),ref:t=>this.editorEl=t}))}static get watchers(){return{text:["updateTextHandler"],dimensions:["updateDimensionsHandler"]}}};a.style=".xterm{position:relative;user-select:none;-ms-user-select:none;-webkit-user-select:none}.xterm.focus,.xterm:focus{outline:none}.xterm .xterm-helpers{position:absolute;top:0;z-index:5}.xterm .xterm-helper-textarea{padding:0;border:0;margin:0;position:absolute;opacity:0;left:-9999em;top:0;width:0;height:0;z-index:-5;white-space:nowrap;overflow:hidden;resize:none}.xterm .composition-view{background:#000;color:#FFF;display:none;position:absolute;white-space:nowrap;z-index:1}.xterm .composition-view.active{display:block}.xterm .xterm-viewport{background-color:#000;overflow-y:scroll;cursor:default;position:absolute;right:0;left:0;top:0;bottom:0}.xterm .xterm-screen{position:relative}.xterm .xterm-screen canvas{position:absolute;left:0;top:0}.xterm .xterm-scroll-area{visibility:hidden}.xterm-char-measure-element{display:inline-block;visibility:hidden;position:absolute;top:0;left:-9999em;line-height:normal}.xterm{cursor:text}.xterm.enable-mouse-events{cursor:default}.xterm.xterm-cursor-pointer{cursor:pointer}.xterm.column-select.focus{cursor:crosshair}.xterm .xterm-accessibility,.xterm .xterm-message{position:absolute;left:0;top:0;bottom:0;right:0;z-index:10;color:transparent}.xterm .live-region{position:absolute;left:-9999px;width:1px;height:1px;overflow:hidden}.xterm-dim{opacity:0.5}.xterm-underline{text-decoration:underline}.editor-container{position:relative;display:inline-flex;flex-direction:column;outline:2px solid black;margin:4px}.editor-container>.title{padding:5px;background-color:black;color:white}.editor{width:100%;height:100%;position:relative}.editor .terminal.xterm{cursor:pointer}.ghost-cursor{position:absolute;pointer-events:none;background-color:rgba(0, 0, 0, 0.2)}";const l=class{constructor(i){t(this,i),this.commands=[{name:"Execute easter egg",command:new c}],this.enabled=!1}componentDidLoad(){this.input.focus()}handleKeyDown(t){return t.ctrlKey&&t.shiftKey&&"KeyP"===t.code?(this.enabled=!0,setTimeout((()=>this.input.focus())),void t.preventDefault()):"Escape"===t.code?(this.enabled=!1,this.input.blur(),void t.preventDefault()):void 0}onInputFocus(t){this.input.value=""}onInputBlur(t){this.input.value=""}render(){return i("div",{class:{"menu-container":!0,"-hidden":!this.enabled}},i("div",{class:"menu-dropdown"},i("input",{type:"text",class:"menu-input",ref:t=>this.input=t,onFocus:t=>this.onInputFocus(t),onBlur:t=>this.onInputBlur(t)})))}};l.style='.menu-container{position:absolute;top:0;width:100%;height:100%;z-index:1000;display:flex;justify-content:center;align-items:flex-start;pointer-events:none;background-color:rgba(0, 0, 0, 0.85)}.menu-container>*{pointer-events:fill}.menu-container.-hidden{display:none}.menu-dropdown{margin-top:100px;background-color:#000}.menu-dropdown .menu-input{padding:0 8px;border:0;outline:0;width:400px;height:28px;font-family:"Source Code Pro", monospace}';export{s as app_root,a as mono_editor,l as popup_menu}